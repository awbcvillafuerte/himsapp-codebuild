(window["webpackJsonpcustomer-care"]=window["webpackJsonpcustomer-care"]||[]).push([[5],{1878:function(e,t,a){},1891:function(e,t,a){"use strict";a.r(t);var n=a(68),s=a.n(n),i=a(93),c=a(13),r=a(14),l=a(18),o=a(17),u=a(19),m=a(66),d=a(0),p=a(20),f=a(772),k=a.n(f),g=a(43),b=a(107),_=a(755),h=a(769),v=a(759),y=a(63),C=a(24),E=a(49),O=a(229),T=a(346),j=a(453),w=a(1),x=a(1879),S=a(26),N=a(11),A=a(37),D=a(9),L=a(1890),R=(a(104),a(280)),I={ResetReducer:"TicketList_ResetReducer",SetReducer:"TicketList_SetReducer"},P=function(e){return{payload:e,type:I.SetReducer}},F=a(831),q=a.n(F),W=[{name:"urgency",title:"Urgency"},{name:"status",title:"Status"},{name:"ticket_id",title:"Ticket ID"},{name:"dueDate",title:"Due Date"},{name:"type",title:"Type"},{name:"specificType",title:"Specific Type"},{name:"member",title:"Member"},{name:"company",title:"Company"},{name:"ticketOwner",title:"Ticket Owner"},{name:"assignedTo",title:"Assigned To"},{name:"createdDate",title:"Created Date"},{name:"lastUpdate",title:"Last Update"},{name:"channel",title:"Channel"},{name:"is_vip",title:"VIP"}],z={formattedColumns:{required_columns:[],urgency_columns:["urgency"],text_columns:["status","app_uid","type","specificType","member","company","ticketOwner","assignedTo","channel"],date_columns:["dueDate","createdDate","lastUpdate"],boolean_columns:["is_vip"],detaillink_columns:["app_uid"]},columnExtensions:function(){var e=[];return W.map(function(t){var a=200;switch(t.name){case"urgency":case"status":case"app_uid":a=100;break;case"type":case"dueDate":a=120;break;case"specificType":case"company":a=250;break;default:a=200}e.push({columnName:t.name,width:a,wordWrapEnabled:!0})}),e}(),fixedColumns:["urgency","status","dueDate","app_uid","type","specificType","member"],cellProperties:[],columns:W,rows:function(){for(var e=[],t=["Inquiry","Availment","Request","Complaint"],a=["Billing Dispute Inquiry","Outpatient Consult","X-Ray Procedure Availment","Service Complaint","Dental Coverage","Premium Adjustment"],n=["open","pending","resolved","closed"],s=["email","fax","sms"],i=[!0,!1],c=0;c<50;c++){var r=q.a.random.arrayElement(n),l="closed"===r||"resolved"===r?3:q.a.random.arrayElement([1,2]);e.push({urgency:l,status:Object(A.capitalize)(r),app_uid:q.a.random.alphaNumeric(8),dueDate:q.a.date.future(),type:q.a.random.arrayElement(t),specificType:q.a.random.arrayElement(a),member:q.a.name.findName(),company:q.a.company.companyName(),ticketOwner:q.a.name.findName(),assignedTo:q.a.name.findName(),createdDate:q.a.date.future(),lastUpdate:q.a.date.future(),channel:q.a.random.arrayElement(s),is_vip:q.a.random.arrayElement(i)})}return e}()},U=a(65),M=(a(1878),a(22)),B=a(67),G=a(25);a.d(t,"TicketListPage",function(){return V}),a.d(t,"mapStateToProps",function(){return $}),a.d(t,"mapDispatchToProps",function(){return X});var H=Object(w.a)(function(e){return{popoverCheckbox:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}}}),J=function(e){var t=e.columns,a=e.selectedColumns,n=e.setSelectedColumns,s=H(e),i=Object(x.usePopupState)({variant:"popover",popupId:"columnListPopover"});return d.createElement("div",null,d.createElement(g.a,Object.assign({fullWidth:!0},Object(x.bindTrigger)(i)),d.createElement(b.a,{className:Object(D.default)("link-button"),align:"right"},d.createElement(S.a,{icon:N.I,className:Object(D.default)("link-button-icon")}),d.createElement("span",{className:Object(D.default)("link-button-text")},"Display Columns"))),d.createElement(_.a,Object.assign({},Object(x.bindPopover)(i),{anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}}),d.createElement(h.a,null,Object(A.map)(t,function(e,t){var i,c=Object(A.findIndex)(a,{name:e.name})>=0;return d.createElement(v.a,{key:t,control:d.createElement(y.a,{checked:c,onChange:(i=e,function(e){if(e.target.checked){var t=Object(m.a)(a);t.push(i),n(t)}else{var s=Object(m.a)(a);Object(A.remove)(s,function(e){return e.name===i.name}),n(s)}}),value:e.name,color:"primary"}),className:s.popoverCheckbox,label:e.title})}))))},V=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(o.a)(t).call(this,e))).tickets=void 0,a.tableListRef=void 0,a.onLogout=function(){window.location.replace("../index.html#/")},a.reset=function(){a.setState({loading:!1,query:""})},a.getTicketStats=function(e){a.setState({ticketStats:{all:e.length,open:e.filter(function(e){return"open"===e.status.toLowerCase()}).length,closed:e.filter(function(e){return"closed"===e.status.toLowerCase()}).length,resolved:e.filter(function(e){return"resolved"===e.status.toLowerCase()}).length,pending:e.filter(function(e){return"pending"===e.status.toLowerCase()}).length}})},a.loadTicketList=Object(i.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.state.loading){e.next=2;break}return e.abrupt("return");case 2:a.setState({loading:!0}),t={where:{$and:[{ticket_id:{$ne:null}}]}},G.a.get("customer-care/tickets?filter=".concat(JSON.stringify(t)),function(e){e.map(function(e){a.tickets.unshift({urgency:e.ticket_category.urgency,status:e.status,_id:e._id,ticket_id:e.ticket_id,caseId:e.pmaker_case_uid,dueDate:"",type:e.ticket_category.ticket_type,specificType:e.ticket_category.specific_type,member:e.member_data?M.a.toNameFormat(e.member_data.first_name,e.member_data.middle_name,e.member_data.last_name):"N/A",company:e.member_data?e.member_data.client:e.client_data?e.client_data.registered_name:"N/A",is_vip:e.member_data?e.member_data.is_vip?"Yes":"No":"N/A",ticketOwner:e.ticket_owner_name?e.ticket_owner_name:e.created_by.name,assignedTo:e.assign_to,createdDate:M.a.toDateAndTime(new Date(e.date_created)),lastUpdate:M.a.toDateAndTime(new Date(e.date_updated)),channel:e.received_via,transaction_no:e.transaction_no})}),a.getTicketStats(a.tickets),a.setState({loading:!1})});case 5:case"end":return e.stop()}},e)})),a.setSelectedColumns=function(e){a.setState({selectedColumns:e})},a.generateReport=function(){console.log("generate report")},a.onSearchTextChange=function(e){e.preventDefault();var t=e.target.value;a.setState({query:t})},a.onStatusFilterClick=function(e){a.state.status!==e&&(a.setState({status:e}),a.tableListRef.current.resetPage())},a.componentWillMount=function(){var e=z.columns;a.setState({columns:e,selectedColumns:e,fixedColumns:Object.keys(z).length>0?z.fixedColumns:[],formattedColumns:Object.keys(z).length>0?z.formattedColumns:[],columnExtensions:Object.keys(z).length>0?z.columnExtensions:[]})},a.componentDidMount=function(){a.loadTicketList()},a.getFilteredTickets=function(){var e=a.tickets;return e=e.filter(function(e){return""===a.state.status||e.status.toLowerCase()===a.state.status.toLowerCase()}).filter(function(e){return""===a.state.query||e.ticket_id.toLowerCase().includes(a.state.query.toLowerCase())}),a.tableListRef.current&&a.tableListRef.current.resetPage(),e},a.getTableColumns=function(){var e=0,t=function(t,a,n){var s={left:a?125*e:0,zIndex:a?125:0,minWidth:t,maxWidth:"300px",borderRight:n?"#9EA3AC 2px solid":void 0};return a&&e++,s},n=function(e,n,s,i,c,r,l){if(a.state.selectedColumns.find(function(e){return e.name===n}))return{name:e,key:n,style:t(s,i,c),filterType:r,sortType:l}},s=[n("Urgency","urgency","125px",!0,!1,"string","string"),n("Status","status","125px",!0,!0,"string","string"),n("Ticket ID","ticket_id","125px",!1,!1,"string","string"),n("Due Date","dueDate","125px",!0,!1,"string","string"),n("Type","type","125px",!0,!1,"string","string"),n("Specific Type","specificType","125px",!0,!1,"string","string"),n("Member","member","125px",!0,!0,"string","string"),n("Company","company","125px",!1,!1,"string","string"),n("Ticket Owner","ticketOwner","125px",!1,!1,"string","string"),n("Assigned To","assignedTo","200px",!1,!1,"string","string"),n("Created Date","createdDate","125px",!1,!1,"string","string"),n("Last Date","lastUpdate","125px",!1,!1,"string","string"),n("Channel","channel","125px",!1,!1,"string","string"),n("VIP","is_vip","125px",!1,!1,"string","string")].filter(function(e){return e});return console.log("TEST",s),s},a.state={loading:!1,status:"",query:"",columns:[],selectedColumns:[],fixedColumns:[],formattedColumns:{},columnExtensions:[],rows:[],ticketStats:{},ticketList:[],filters:{}},a.tickets=[],a.tableListRef=d.createRef(),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"sortTickets",value:function(e,t){this.tickets.sort(function(a,n){return a[e]&&n[e]&&a[e].toString().toLowerCase()>n[e].toString().toLowerCase()?t?1:-1:t?-1:1})}},{key:"render",value:function(){var e=this;return d.createElement("div",null,this.state.loading?d.createElement(R.a,null):null,d.createElement("div",{style:{position:"absolute",right:"1rem",top:"1rem"}},d.createElement(L.a,{color:"primary",style:{backgroundColor:"#CCCCCC"}},d.createElement(k.a,{onClick:this.onLogout}))),d.createElement("div",{className:Object(D.default)("TicketListPage")},d.createElement(C.a,{container:!0,direction:"row",justify:"space-between",alignItems:"baseline"},d.createElement(C.a,{item:!0,xs:12,className:Object(D.default)("header-label")},d.createElement(b.a,{className:Object(D.default)("title"),color:"textPrimary"},"Tickets"))),d.createElement(C.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",spacing:1,className:Object(D.default)("search")},d.createElement(C.a,{item:!0,sm:12,md:8},d.createElement(E.a,{id:"cc_search_tickets_tf",placeholder:"Search ticket ID",className:Object(D.default)("search-field"),margin:"dense",variant:"outlined",fullWidth:!0,onChange:this.onSearchTextChange,value:this.state.query,inputProps:{"aria-label":"bare"},InputProps:{startAdornment:d.createElement(S.a,{icon:N.C,className:Object(D.default)("input-adornment")})}})),d.createElement(C.a,{item:!0,sm:6,md:2,alignContent:"flex-end",justify:"flex-end"},d.createElement(g.a,{fullWidth:!0,onClick:function(){e.generateReport()},disabled:!0},d.createElement(b.a,{className:Object(D.default)("link-button disabled"),align:"right"},d.createElement(S.a,{icon:N.i,className:Object(D.default)("link-button-icon disabled")}),d.createElement("span",{className:Object(D.default)("link-button-text")},"Generate Report")))),d.createElement(C.a,{item:!0,sm:6,md:2,alignContent:"flex-end"},d.createElement(J,{setSelectedColumns:this.setSelectedColumns,columns:this.state.columns,selectedColumns:this.state.selectedColumns}))),d.createElement(C.a,{container:!0,direction:"row",className:Object(D.default)("tickets-table")},d.createElement(C.a,{item:!0,xs:12},d.createElement(O.a,{className:Object(D.default)("tickets-table-container")},d.createElement(C.a,{container:!0,xs:12},d.createElement(C.a,{item:!0,xs:!0,className:Object(D.default)("tickets-table-stats")},d.createElement(b.a,{align:"center",onClick:function(){e.onStatusFilterClick("")}},d.createElement("span",{className:""==this.state.status?Object(D.default)("tickets-all"):Object(D.default)("tickets-default")},this.state.ticketStats.all?this.state.ticketStats.all:0),d.createElement("span",{className:""==this.state.status?Object(D.default)("ticket-label-active"):Object(D.default)("ticket-label")},"ALL"))),d.createElement(C.a,{item:!0,xs:!0,className:Object(D.default)("tickets-table-stats")},d.createElement(b.a,{align:"center",onClick:function(){e.onStatusFilterClick("open")}},d.createElement("span",{className:"open"==this.state.status?Object(D.default)("tickets-open"):Object(D.default)("tickets-default")},this.state.ticketStats.open?this.state.ticketStats.open:0),d.createElement("span",{className:"open"==this.state.status?Object(D.default)("ticket-label-active"):Object(D.default)("ticket-label")},"OPEN"))),d.createElement(C.a,{item:!0,xs:!0,className:Object(D.default)("tickets-table-stats")},d.createElement(b.a,{align:"center",onClick:function(){e.onStatusFilterClick("pending")}},d.createElement("span",{className:"pending"==this.state.status?Object(D.default)("tickets-pending"):Object(D.default)("tickets-default")},this.state.ticketStats.pending?this.state.ticketStats.pending:0),d.createElement("span",{className:"pending"==this.state.status?Object(D.default)("ticket-label-active"):Object(D.default)("ticket-label")},"PENDING"))),d.createElement(C.a,{item:!0,xs:!0,className:Object(D.default)("tickets-table-stats")},d.createElement(b.a,{align:"center",onClick:function(){e.onStatusFilterClick("resolved")}},d.createElement("span",{className:"resolved"==this.state.status?Object(D.default)("tickets-resolved"):Object(D.default)("tickets-default")},this.state.ticketStats.resolved?this.state.ticketStats.resolved:0),d.createElement("span",{className:"resolved"==this.state.status?Object(D.default)("ticket-label-active"):Object(D.default)("ticket-label")},"RESOLVED"))),d.createElement(C.a,{item:!0,xs:!0,className:Object(D.default)("tickets-table-stats")},d.createElement(b.a,{align:"center",onClick:function(){e.onStatusFilterClick("closed")}},d.createElement("span",{className:"closed"==this.state.status?Object(D.default)("tickets-closed"):Object(D.default)("tickets-default")},this.state.ticketStats.closed?this.state.ticketStats.closed:0),d.createElement("span",{className:"closed"==this.state.status?Object(D.default)("ticket-label-active"):Object(D.default)("ticket-label")},"CLOSED")))),d.createElement(C.a,{item:!0,xs:12,style:{overflow:"auto"}},d.createElement(B.a,{ref:this.tableListRef,className:"ticket-list-table",canOverflow:!0,stickyHeader:!0,columns:this.getTableColumns(),rows:this.getFilteredTickets(),renderRow:function(t,a){return e.renderTableRow(t,a,e.state.columns,e.state.fixedColumns)},rowsPerPageOptions:[5,10,15]})))))))}},{key:"renderTableRow",value:function(e,t,a,n){var s=this,i=0,c=t%2===0?"#FFFFFF":"#F6F7FA";return d.createElement(T.a,{style:{backgroundColor:c},onClick:function(){U.a.get("cases/".concat(e.caseId),function(t){var a="Resolved"===e.status&&"Inquiry"!==e.type||"Outpatient Procedure"===e.specificType||"Emergency Room"===e.specificType||"Consultation"===e.specificType||"Inpatient - Proceed with Final Assessment"===t.current_task[0].tas_title||"Inpatient - Approver Proceed with Final Assessment"===t.current_task[0].tas_title||"Inpatient - Approvers Proceed with Final Assessment"===t.current_task[0].tas_title||"Inpatient - Generate Approval Code"===t.current_task[0].tas_title||"Inpatient - Approver Summarize Assessment"===t.current_task[0].tas_title||"Inpatient - Summarize Assessment"===t.current_task[0].tas_title||"Inpatient - Resolve Ticket"===t.current_task[0].tas_title||"Inpatient - Review Ticket"===t.current_task[0].tas_title||"Complaint - Resolve Ticket"===t.current_task[0].tas_title||"Complaint - Escalate Ticket 2"===t.current_task[0].tas_title||"Complaint - Close Ticket"===t.current_task[0].tas_title||"Complaint - Comment 2"===t.current_task[0].tas_title||"Complaint - Escalate Ticket 3"===t.current_task[0].tas_title||"Complaint - Claim Close Task"===t.current_task[0].tas_title||"Complaint - Comment 3"===t.current_task[0].tas_title||t.current_task[0].tas_title.includes("Outpatient")||"Approval - Approver Submit for Assessment"===t.current_task[0].tas_title||"Approval - Approver Summarize Assessment"===t.current_task[0].tas_title||"Approval - Resolve Ticket"===t.current_task[0].tas_title||"Approval - Claim Close Ticket"===t.current_task[0].tas_title||"Approval - Escalate Ticket 2"===t.current_task[0].tas_title||"Approval - Escalate Ticket 3"===t.current_task[0].tas_title||"Approval - Escalate Ticket 4"===t.current_task[0].tas_title||"Approval - Comment 2"===t.current_task[0].tas_title||"Approval - Comment 3"===t.current_task[0].tas_title||"Approval - Comment 4"===t.current_task[0].tas_title?"resolve-ticket":"update-ticket";window.location.href="#/customer-care/".concat(a,"/").concat(e.caseId,"/").concat(e._id)},function(){var t="Resolved"===e.status&&"Inquiry"!==e.type||"Outpatient Procedure"===e.specificType||"Emergency Room"===e.specificType||"Consultation"===e.specificType||"Complaint/Concern"===e.type?"resolve-ticket":"update-ticket";window.location.href="#/customer-care/".concat(t,"/").concat(e.caseId,"/").concat(e._id)})}},a.filter(function(e){for(var t=0;t<s.state.selectedColumns.length;t++)if(s.state.selectedColumns[t].name===e.name)return!0;return!1}).map(function(t,s){var c=n.filter(function(e){return e===t.name})[0],r=!0;c&&a[s+1]&&(r=!!n.filter(function(e){return e===a[s+1].name})[0]);var l={left:c?125*i:0,zIndex:c?125:0,position:c?"sticky":"relative",minWidth:"assignedTo"===t.name?"200px":"125px",maxWidth:"300px",borderRight:r?void 0:"#9EA3AC 2px solid"};c&&i++;return d.createElement(j.a,{style:l},"urgency"===t.name?d.createElement("div",{style:{width:"100%",textAlign:"center"}},d.createElement("div",{className:"number-item",style:{display:"inline-block",backgroundColor:{Low:"#3AB77D",Medium:"#FAB435",High:"#FD5451"}[e[t.name]]}},{Low:3,Medium:2,High:1}[e[t.name]])):e[t.name])}))}}]),t}(d.Component),$=function(e){return e.ticketList},X=function(e){return{Map:Object(p.b)(P,e)}}}}]);
//# sourceMappingURL=5.78da47f3.chunk.js.map
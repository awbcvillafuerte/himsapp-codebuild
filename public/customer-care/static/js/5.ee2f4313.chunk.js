(window["webpackJsonpcustomer-care"]=window["webpackJsonpcustomer-care"]||[]).push([[5],{1881:function(e,t,a){},1894:function(e,t,a){"use strict";a.r(t);var n=a(14),i=a(16),s=a(21),c=a(19),l=a(20),r=a(67),o=a(0),m=a(13),u=a(775),d=a.n(u),p=a(42),k=a(108),f=a(758),b=a(772),g=a(762),_=a(62),v=a(23),y=a(47),h=a(231),C=a(349),O=a(456),E=a(1),T=a(1882),j=a(35),w=a(11),x=a(37),S=a(10),D=a(1893),N=(a(105),a(282)),A={ResetReducer:"TicketList_ResetReducer",SetReducer:"TicketList_SetReducer"},R=function(e){return{payload:e,type:A.SetReducer}},I=a(834),L=a.n(I),P=[{name:"urgency",title:"Urgency"},{name:"status",title:"Status"},{name:"ticket_id",title:"Ticket ID"},{name:"dueDate",title:"Due Date"},{name:"type",title:"Type"},{name:"specificType",title:"Specific Type"},{name:"member",title:"Member"},{name:"company",title:"Company"},{name:"ticketOwner",title:"Ticket Owner"},{name:"assignedTo",title:"Assigned To"},{name:"createdDate",title:"Created Date"},{name:"lastUpdate",title:"Last Update"},{name:"channel",title:"Channel"},{name:"is_vip",title:"VIP"}],F={formattedColumns:{required_columns:[],urgency_columns:["urgency"],text_columns:["status","app_uid","type","specificType","member","company","ticketOwner","assignedTo","channel"],date_columns:["dueDate","createdDate","lastUpdate"],boolean_columns:["is_vip"],detaillink_columns:["app_uid"]},columnExtensions:function(){var e=[];return P.map(function(t){var a=200;switch(t.name){case"urgency":case"status":case"app_uid":a=100;break;case"type":case"dueDate":a=120;break;case"specificType":case"company":a=250;break;default:a=200}e.push({columnName:t.name,width:a,wordWrapEnabled:!0})}),e}(),fixedColumns:["urgency","status","dueDate","app_uid","type","specificType","member"],cellProperties:[],columns:P,rows:function(){for(var e=[],t=["Inquiry","Availment","Request","Complaint"],a=["Billing Dispute Inquiry","Outpatient Consult","X-Ray Procedure Availment","Service Complaint","Dental Coverage","Premium Adjustment"],n=["open","pending","resolved","closed"],i=["email","fax","sms"],s=[!0,!1],c=0;c<50;c++){var l=L.a.random.arrayElement(n),r="closed"===l||"resolved"===l?3:L.a.random.arrayElement([1,2]);e.push({urgency:r,status:Object(x.capitalize)(l),app_uid:L.a.random.alphaNumeric(8),dueDate:L.a.date.future(),type:L.a.random.arrayElement(t),specificType:L.a.random.arrayElement(a),member:L.a.name.findName(),company:L.a.company.companyName(),ticketOwner:L.a.name.findName(),assignedTo:L.a.name.findName(),createdDate:L.a.date.future(),lastUpdate:L.a.date.future(),channel:L.a.random.arrayElement(i),is_vip:L.a.random.arrayElement(s)})}return e}()},U=a(63),q=(a(1881),a(22)),W=a(65);a.d(t,"TicketListPage",function(){return H}),a.d(t,"mapStateToProps",function(){return G}),a.d(t,"mapDispatchToProps",function(){return B});var z=Object(E.a)(function(e){return{popoverCheckbox:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}}}),M=function(e){var t=e.columns,a=e.selectedColumns,n=e.setSelectedColumns,i=z(e),s=Object(T.usePopupState)({variant:"popover",popupId:"columnListPopover"});return o.createElement("div",null,o.createElement(p.a,Object.assign({fullWidth:!0},Object(T.bindTrigger)(s)),o.createElement(k.a,{className:Object(S.default)("link-button"),align:"right"},o.createElement(j.a,{icon:w.M,className:Object(S.default)("link-button-icon")}),o.createElement("span",{className:Object(S.default)("link-button-text")},"Display Columns"))),o.createElement(f.a,Object.assign({},Object(T.bindPopover)(s),{anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}}),o.createElement(b.a,null,Object(x.map)(t,function(e,t){var s,c=Object(x.findIndex)(a,{name:e.name})>=0;return o.createElement(g.a,{key:t,control:o.createElement(_.a,{checked:c,onChange:(s=e,function(e){if(e.target.checked){var t=Object(r.a)(a);t.push(s),n(t)}else{var i=Object(r.a)(a);Object(x.remove)(i,function(e){return e.name===s.name}),n(i)}}),value:e.name,color:"primary"}),className:i.popoverCheckbox,label:e.title})}))))},H=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).tickets=void 0,a.tableListRef=void 0,a.timeOut=void 0,a.onLogout=function(){window.location.replace("../index.html#/")},a.setSelectedColumns=function(e){a.setState({selectedColumns:e})},a.generateReport=function(){console.log("generate report")},a.onSearchTextChange=function(e){e.preventDefault();var t=e.target.value;a.setState({query:t}),clearTimeout(a.timeOut),a.timeOut=setTimeout(function(){a.tableListRef.current.apiCall(!0)},1e3)},a.onStatusFilterClick=function(e){a.state.status!==e&&a.setState({status:e},function(){a.tableListRef.current.apiCall(!0)})},a.componentWillMount=function(){var e=F.columns;a.setState({columns:e,selectedColumns:e,fixedColumns:Object.keys(F).length>0?F.fixedColumns:[],formattedColumns:Object.keys(F).length>0?F.formattedColumns:[],columnExtensions:Object.keys(F).length>0?F.columnExtensions:[]})},a.getTableColumns=function(){var e=0,t=function(t,a,n){var i={left:a?125*e:0,zIndex:a?130:5,minWidth:t,maxWidth:"300px",borderRight:n?"#9EA3AC 2px solid":void 0};return a&&e++,i},n=function(e,n,i,s,c,l,r,o,m){if(a.state.selectedColumns.find(function(e){return e.name===n}))return{name:e,key:n,style:t(i,s,c),filterType:l,filterOption:m,sortType:r,filterDisabled:o}};return[n("Urgency","urgency","125px",!0,!1,"dropdown","string",void 0,[{value:"",label:""},{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"}]),n("Status","status","125px",!0,!0,"string","string"),n("Ticket ID","ticket_id","125px",!1,!1,"string","string"),n("Due Date","dueDate","125px",!0,!1,"string",void 0,!0),n("Type","type","125px",!0,!1,"string","string"),n("Specific Type","specificType","125px",!0,!1,"string","string"),n("Member","member","125px",!0,!0,"string","string"),n("Company","company","125px",!1,!1,"string","string"),n("Ticket Owner","ticketOwner","125px",!1,!1,"string","string"),n("Assigned To","assignedTo","200px",!1,!1,"string","string"),n("Created Date","createdDate","125px",!1,!1,"date","date"),n("Last Date","lastUpdate","125px",!1,!1,"date","date"),n("Channel","channel","125px",!1,!1,"string","string"),n("VIP","is_vip","125px",!1,!1,"dropdown","string",void 0,[{value:"",label:""},{value:"false",label:"No"},{value:"true",label:"Yes"}])].filter(function(e){return e})},a.state={loading:!1,status:"",query:"",columns:[],selectedColumns:[],fixedColumns:[],formattedColumns:{},columnExtensions:[],rows:[],ticketStats:{},ticketList:[],filters:{}},a.tickets=[],a.tableListRef=o.createRef(),a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return o.createElement("div",null,this.state.loading?o.createElement(N.a,null):null,o.createElement("div",{style:{position:"absolute",right:"1rem",top:"1rem"}},o.createElement(D.a,{color:"primary",style:{backgroundColor:"#CCCCCC"}},o.createElement(d.a,{onClick:this.onLogout}))),o.createElement("div",{className:Object(S.default)("TicketListPage")},o.createElement(v.a,{container:!0,direction:"row",justify:"space-between",alignItems:"baseline"},o.createElement(v.a,{item:!0,xs:12,className:Object(S.default)("header-label")},o.createElement(k.a,{className:Object(S.default)("title"),color:"textPrimary"},"Tickets"))),o.createElement(v.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",spacing:1,className:Object(S.default)("search")},o.createElement(v.a,{item:!0,sm:12,md:8},o.createElement(y.a,{id:"cc_search_tickets_tf",placeholder:"Search ticket ID",className:Object(S.default)("search-field"),margin:"dense",variant:"outlined",fullWidth:!0,onChange:this.onSearchTextChange,value:this.state.query,inputProps:{"aria-label":"bare"},InputProps:{startAdornment:o.createElement(j.a,{icon:w.G,className:Object(S.default)("input-adornment")})}})),o.createElement(v.a,{item:!0,sm:6,md:2,alignContent:"flex-end",justify:"flex-end"},o.createElement(p.a,{fullWidth:!0,onClick:function(){e.generateReport()},disabled:!0},o.createElement(k.a,{className:Object(S.default)("link-button disabled"),align:"right"},o.createElement(j.a,{icon:w.m,className:Object(S.default)("link-button-icon disabled")}),o.createElement("span",{className:Object(S.default)("link-button-text")},"Generate Report")))),o.createElement(v.a,{item:!0,sm:6,md:2,alignContent:"flex-end"},o.createElement(M,{setSelectedColumns:this.setSelectedColumns,columns:this.state.columns,selectedColumns:this.state.selectedColumns}))),o.createElement(v.a,{container:!0,direction:"row",className:Object(S.default)("tickets-table")},o.createElement(v.a,{item:!0,xs:12},o.createElement(h.a,{className:Object(S.default)("tickets-table-container")},o.createElement(v.a,{container:!0,xs:12},o.createElement(v.a,{item:!0,xs:!0,className:Object(S.default)("tickets-table-stats")},o.createElement(k.a,{align:"center",onClick:function(){e.onStatusFilterClick("")}},o.createElement("span",{className:""==this.state.status?Object(S.default)("tickets-all"):Object(S.default)("tickets-default")},this.state.ticketStats.all?this.state.ticketStats.all:0),o.createElement("span",{className:""==this.state.status?Object(S.default)("ticket-label-active"):Object(S.default)("ticket-label")},"ALL"))),o.createElement(v.a,{item:!0,xs:!0,className:Object(S.default)("tickets-table-stats")},o.createElement(k.a,{align:"center",onClick:function(){e.onStatusFilterClick("open")}},o.createElement("span",{className:"open"==this.state.status?Object(S.default)("tickets-open"):Object(S.default)("tickets-default")},this.state.ticketStats.open?this.state.ticketStats.open:0),o.createElement("span",{className:"open"==this.state.status?Object(S.default)("ticket-label-active"):Object(S.default)("ticket-label")},"OPEN"))),o.createElement(v.a,{item:!0,xs:!0,className:Object(S.default)("tickets-table-stats")},o.createElement(k.a,{align:"center",onClick:function(){e.onStatusFilterClick("pending")}},o.createElement("span",{className:"pending"==this.state.status?Object(S.default)("tickets-pending"):Object(S.default)("tickets-default")},this.state.ticketStats.pending?this.state.ticketStats.pending:0),o.createElement("span",{className:"pending"==this.state.status?Object(S.default)("ticket-label-active"):Object(S.default)("ticket-label")},"PENDING"))),o.createElement(v.a,{item:!0,xs:!0,className:Object(S.default)("tickets-table-stats")},o.createElement(k.a,{align:"center",onClick:function(){e.onStatusFilterClick("resolved")}},o.createElement("span",{className:"resolved"==this.state.status?Object(S.default)("tickets-resolved"):Object(S.default)("tickets-default")},this.state.ticketStats.resolved?this.state.ticketStats.resolved:0),o.createElement("span",{className:"resolved"==this.state.status?Object(S.default)("ticket-label-active"):Object(S.default)("ticket-label")},"RESOLVED"))),o.createElement(v.a,{item:!0,xs:!0,className:Object(S.default)("tickets-table-stats")},o.createElement(k.a,{align:"center",onClick:function(){e.onStatusFilterClick("closed")}},o.createElement("span",{className:"closed"==this.state.status?Object(S.default)("tickets-closed"):Object(S.default)("tickets-default")},this.state.ticketStats.closed?this.state.ticketStats.closed:0),o.createElement("span",{className:"closed"==this.state.status?Object(S.default)("ticket-label-active"):Object(S.default)("ticket-label")},"CLOSED")))),o.createElement(v.a,{item:!0,xs:12},o.createElement(W.a,{ref:this.tableListRef,className:"ticket-list-table",style:{minHeight:"300px"},canOverflow:!0,stickyHeader:!0,columns:this.getTableColumns(),rows:this.tickets,renderRow:function(t,a){return e.renderTableRow(t,a,e.state.columns,e.state.fixedColumns)},rowsPerPageOptions:[5,10,15],serverSideOption:{getUrl:function(t,a,n){var i={where:{and:[{status:{regexp:"/".concat(e.state.status,"/i")}},e.state.query.length?{ticket_id:{regexp:"/".concat(e.state.query,"/i")}}:void 0,n.urgency&&n.urgency.value.length?{"ticket_category.urgency":{like:n.urgency.value,options:"i"}}:void 0,n.status?{status:{regexp:"/".concat(n.status,"/i")}}:void 0,n.ticket_id?{ticket_id:{regexp:"/".concat(n.ticket_id,"/i")}}:void 0,n.type?{"ticket_category.ticket_type":{like:n.type,options:"i"}}:void 0,n.specificType?{"ticket_category.specific_type":{like:n.specificType,options:"i"}}:void 0,n.member?{or:[{"member_data.last_name":{like:n.member,options:"i"}},{"member_data.middle_name":{like:n.member,options:"i"}},{"member_data.first_name":{like:n.member,options:"i"}}]}:void 0,n.company?{"client_data.registered_name":{like:n.company,options:"i"}}:void 0,n.ticketOwner?{ticket_owner_name:{like:n.ticketOwner,options:"i"},"created_by.name":{like:n.ticketOwner,options:"i"}}:void 0,n.assignedTo?{assign_to:{regexp:"/".concat(n.assignedTo,"/i")}}:void 0,n.createdDate?{date_created:{between:[q.a.getDate(new Date(n.createdDate.getTime()-864e5)),q.a.getDate(new Date(n.createdDate.getTime()+864e5))]}}:void 0,n.lastUpdate?{date_updated:{between:[q.a.getDate(new Date(n.lastUpdate.getTime()-864e5)),q.a.getDate(new Date(n.lastUpdate.getTime()+864e5))]}}:void 0,n.channel?{received_via:{regexp:"/".concat(n.channel,"/i")}}:void 0].filter(function(e){return e})},skip:t,limit:a,order:"date_created DESC"};return 0===i.where.and.length&&(i.where={}),"customer-care/tickets?filter=".concat(JSON.stringify(i),"&with_count=true&is_initial=true")},onSuccess:function(t){e.tickets=t.tickets.map(function(e){return{urgency:e.ticket_category.urgency,status:e.status,_id:e._id,ticket_id:e.ticket_id,caseId:e.pmaker_case_uid,dueDate:null,type:e.ticket_category.ticket_type,specificType:e.ticket_category.specific_type,member:e.member_data?q.a.toNameFormat(e.member_data.first_name,e.member_data.middle_name,e.member_data.last_name):"N/A",company:e.member_data?e.member_data.client:e.client_data?e.client_data.registered_name:"N/A",is_vip:e.member_data?e.member_data.is_vip?"Yes":"No":"N/A",ticketOwner:e.ticket_owner_name?e.ticket_owner_name:e.created_by.name,assignedTo:e.assign_to,createdDate:e.date_created?q.a.toDateAndTime(new Date(e.date_created)):null,lastUpdate:e.date_updated?q.a.toDateAndTime(new Date(e.date_updated)):null,channel:e.received_via,transaction_no:e.transaction_no}}),e.setState({ticketStats:{all:t.open+t.closed+t.resolved+t.pending+t.cancelled,open:t.open,closed:t.closed,resolved:t.resolved,pending:t.pending}})},getCount:function(e){return e.total}}})))))))}},{key:"renderTableRow",value:function(e,t,a,n){var i=this,s=0,c=t%2===0?"#FFFFFF":"#F6F7FA";return o.createElement(C.a,{style:{backgroundColor:c},onClick:function(){U.a.get("cases/".concat(e.caseId),function(t){var a="Resolved"===e.status&&"Inquiry"!==e.type||"Outpatient Procedure"===e.specificType||"Emergency Room"===e.specificType||"Consultation"===e.specificType||"Inpatient - Proceed with Final Assessment"===t.current_task[0].tas_title||"Inpatient - Approver Proceed with Final Assessment"===t.current_task[0].tas_title||"Inpatient - Approvers Proceed with Final Assessment"===t.current_task[0].tas_title||"Inpatient - Generate Approval Code"===t.current_task[0].tas_title||"Inpatient - Approver Summarize Assessment"===t.current_task[0].tas_title||"Inpatient - Summarize Assessment"===t.current_task[0].tas_title||"Inpatient - Resolve Ticket"===t.current_task[0].tas_title||"Inpatient - Review Ticket"===t.current_task[0].tas_title||"Complaint - Resolve Ticket"===t.current_task[0].tas_title||"Complaint - Escalate Ticket 2"===t.current_task[0].tas_title||"Complaint - Close Ticket"===t.current_task[0].tas_title||"Complaint - Comment 2"===t.current_task[0].tas_title||"Complaint - Escalate Ticket 3"===t.current_task[0].tas_title||"Complaint - Claim Close Task"===t.current_task[0].tas_title||"Complaint - Comment 3"===t.current_task[0].tas_title||t.current_task[0].tas_title.includes("Outpatient")||"Approval - Approver Submit for Assessment"===t.current_task[0].tas_title||"Approval - Approver Summarize Assessment"===t.current_task[0].tas_title||"Approval - Resolve Ticket"===t.current_task[0].tas_title||"Approval - Claim Close Ticket"===t.current_task[0].tas_title||"Approval - Escalate Ticket 2"===t.current_task[0].tas_title||"Approval - Escalate Ticket 3"===t.current_task[0].tas_title||"Approval - Escalate Ticket 4"===t.current_task[0].tas_title||"Approval - Comment 2"===t.current_task[0].tas_title||"Approval - Comment 3"===t.current_task[0].tas_title||"Approval - Comment 4"===t.current_task[0].tas_title?"resolve-ticket":"update-ticket";window.location.href="#/customer-care/".concat(a,"/").concat(e.caseId,"/").concat(e._id)},function(){var t="Resolved"===e.status&&"Inquiry"!==e.type||"Outpatient Procedure"===e.specificType||"Emergency Room"===e.specificType||"Consultation"===e.specificType||"Complaint/Concern"===e.type||"-"===e.caseId||"---"===e.caseId?"resolve-ticket":"update-ticket";window.location.href="#/customer-care/".concat(t,"/").concat(e.caseId,"/").concat(e._id)})}},a.filter(function(e){for(var t=0;t<i.state.selectedColumns.length;t++)if(i.state.selectedColumns[t].name===e.name)return!0;return!1}).map(function(t,i){var c=n.filter(function(e){return e===t.name})[0],l=!0;c&&a[i+1]&&(l=!!n.filter(function(e){return e===a[i+1].name})[0]);var r={left:c?125*s:0,zIndex:c?125:0,position:c?"sticky":"relative",minWidth:"assignedTo"===t.name?"200px":"125px",maxWidth:"300px",borderRight:l?void 0:"#9EA3AC 2px solid"};c&&s++;var m={Low:3,Medium:2,High:1};return o.createElement(O.a,{style:r},"urgency"===t.name?o.createElement("div",{style:{width:"100%",textAlign:"center"}},o.createElement("div",{className:m[e[t.name]]?"number-item":"",style:{display:"inline-block",backgroundColor:{Low:"#3AB77D",Medium:"#FAB435",High:"#FD5451"}[e[t.name]]}},m[e[t.name]]?m[e[t.name]]:"---")):e[t.name]?e[t.name]:"---")}))}}]),t}(o.Component),G=function(e){return e.ticketList},B=function(e){return{Map:Object(m.b)(R,e)}}}}]);
//# sourceMappingURL=5.ee2f4313.chunk.js.map
(window["webpackJsonpcustomer-care"]=window["webpackJsonpcustomer-care"]||[]).push([[5],{1792:function(e,t,a){},1806:function(e,t,a){"use strict";a.r(t);var n=a(45),c=a.n(n),i=a(64),r=a(8),s=a(9),l=a(12),o=a(11),u=a(13),m=a(114),d=a(0),p=a(95),f=a(336),b=a.n(f),k=a(717),h=a(115),g=a(735),y=a(1804),v=a(715),E=a(733),O=a(711),C=a(707),j=a(362),w=a(665),_=a(364),x=a(705),S=a(1793),T=a(46),N=a(15),L=a(737),D=a(6),P=a(1805),I=a(727),A=Object(x.a)({root:{position:"fixed",width:"100%",height:"100%",zIndex:9999,right:"0px",bottom:"0px",top:"0px",left:"0px",textAlign:"center",backgroundColor:"rgba(0, 0, 0, 0.5)"},container:{height:"100%",outline:0,alignItems:"center",justifyContent:"center",display:"flex",flexDirection:"column"}}),F=function(){var e=A();return d.createElement("div",{className:e.root},d.createElement("div",{className:e.container},d.createElement(I.a,{size:150})))};F.defaultProps={};var R={ResetReducer:"TicketList_ResetReducer",SetReducer:"TicketList_SetReducer"},q=function(e){return{payload:e,type:R.SetReducer}},z=a(745),W=a.n(z),H=[{name:"urgency",title:"Urgency"},{name:"status",title:"Status"},{name:"app_number",title:"Ticket ID"},{name:"dueDate",title:"Due Date"},{name:"type",title:"Type"},{name:"specificType",title:"Specific Type"},{name:"member",title:"Member"},{name:"company",title:"Company"},{name:"ticketOwner",title:"Ticket Owner"},{name:"assignedTo",title:"Assigned To"},{name:"createdDate",title:"Created Date"},{name:"lastUpdate",title:"Last Update"},{name:"channel",title:"Channel"},{name:"is_vip",title:"VIP"}],U={formattedColumns:{required_columns:[],urgency_columns:["urgency"],text_columns:["status","app_uid","type","specificType","member","company","ticketOwner","assignedTo","channel"],date_columns:["dueDate","createdDate","lastUpdate"],boolean_columns:["is_vip"],detaillink_columns:["app_uid"]},columnExtensions:function(){var e=[];return H.map(function(t){var a=200;switch(t.name){case"urgency":case"status":case"app_uid":a=100;break;case"type":case"dueDate":a=120;break;case"specificType":case"company":a=250;break;default:a=200}e.push({columnName:t.name,width:a,wordWrapEnabled:!0})}),e}(),fixedColumns:["urgency","status","dueDate","app_uid","type","specificType","member"],cellProperties:[],columns:H,rows:function(){for(var e=[],t=["Inquiry","Availment","Request","Complaint"],a=["Billing Dispute Inquiry","Outpatient Consult","X-Ray Procedure Availment","Service Complaint","Dental Coverage","Premium Adjustment"],n=["open","pending","resolved","closed"],c=["email","fax","sms"],i=[!0,!1],r=0;r<50;r++){var s=W.a.random.arrayElement(n),l="closed"===s||"resolved"===s?3:W.a.random.arrayElement([1,2]);e.push({urgency:l,status:Object(L.capitalize)(s),app_uid:W.a.random.alphaNumeric(8),dueDate:W.a.date.future(),type:W.a.random.arrayElement(t),specificType:W.a.random.arrayElement(a),member:W.a.name.findName(),company:W.a.company.companyName(),ticketOwner:W.a.name.findName(),assignedTo:W.a.name.findName(),createdDate:W.a.date.future(),lastUpdate:W.a.date.future(),channel:W.a.random.arrayElement(c),is_vip:W.a.random.arrayElement(i)})}return e}()},B="http://18.138.94.224:4101/api/",M=function(){function e(){Object(r.a)(this,e)}return Object(s.a)(e,null,[{key:"get",value:function(){var e=Object(i.a)(c.a.mark(function e(t,a,n){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:fetch(B+t,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("pm_token")}}).then(function(e){return e.json()}).then(function(e){return a(e)}).catch(function(e){return n(e)});case 1:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(i.a)(c.a.mark(function e(t,a,n,i){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:fetch(B+t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("pm_token")},body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(e){return n(e)}).catch(function(e){return i(e)});case 1:case"end":return e.stop()}},e)}));return function(t,a,n,c){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(i.a)(c.a.mark(function e(t,a,n,i){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:fetch(B+t,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("pm_token")},body:JSON.stringify(a)}).then(function(e){return e}).then(function(e){return n(e)}).catch(function(e){return i(e)});case 1:case"end":return e.stop()}},e)}));return function(t,a,n,c){return e.apply(this,arguments)}}()}]),e}(),J=a(242),G=(a(1792),a(16)),V=a(31),Y=a(24),X=a(18);a.d(t,"TicketListPage",function(){return Z}),a.d(t,"mapStateToProps",function(){return $}),a.d(t,"mapDispatchToProps",function(){return ee});var K=Object(x.a)(function(e){return{popoverCheckbox:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}}}),Q=function(e){var t=e.columns,a=e.selectedColumns,n=e.setSelectedColumns,c=K(e),i=Object(S.usePopupState)({variant:"popover",popupId:"columnListPopover"});return d.createElement("div",null,d.createElement(k.a,Object.assign({fullWidth:!0},Object(S.bindTrigger)(i)),d.createElement(h.a,{className:Object(D.default)("link-button"),align:"right"},d.createElement(T.a,{icon:N.t,className:Object(D.default)("link-button-icon")}),d.createElement("span",{className:Object(D.default)("link-button-text")},"Display Columns"))),d.createElement(g.a,Object.assign({},Object(S.bindPopover)(i),{anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}}),d.createElement(y.a,null,Object(L.map)(t,function(e,t){var i,r=Object(L.findIndex)(a,{name:e.name})>=0;return d.createElement(v.a,{key:t,control:d.createElement(E.a,{checked:r,onChange:(i=e,function(e){if(e.target.checked){var t=Object(m.a)(a);t.push(i),n(t)}else{var c=Object(m.a)(a);Object(L.remove)(c,function(e){return e.name===i.name}),n(c)}}),value:e.name,color:"primary"}),className:c.popoverCheckbox,label:e.title})}))))},Z=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(o.a)(t).call(this,e))).tickets=void 0,a.onLogout=function(){window.location.replace("../index.html#/")},a.reset=function(){a.setState({loading:!1,query:""})},a.getTicketStats=function(e){a.setState({ticketStats:{all:e.length,open:e.filter(function(e){return"open"===e.status.toLowerCase()}).length,closed:e.filter(function(e){return"closed"===e.status.toLowerCase()}).length,resolved:e.filter(function(e){return"resolved"===e.status.toLowerCase()}).length,pending:e.filter(function(e){return"pending"===e.status.toLowerCase()}).length}})},a.filterTickets=function(){},a.loadTicketList=Object(i.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.state.loading){e.next=2;break}return e.abrupt("return");case 2:a.setState({loading:!0}),J.a.get("cases",function(e){e.map(function(){var t=Object(i.a)(c.a.mark(function t(n){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J.a.get("cases/".concat(n.app_uid,"/variables?app_index=").concat(n.del_index),function(t){var c=t.APPLICATION,i=t.ticket_no;M.get("customer-care/tickets/".concat(i),function(i){a.tickets.push({urgency:i.ticket_category.urgency,status:i.status,ticket_no:i._id,dueDate:null,type:i.ticket_category.ticket_type,specificType:i.ticket_category.specific_type,member:i.caller_name,company:i.corporate_client,ticketOwner:"",assignedTo:i.ticket_category.assign_to,createdDate:new Date(i.date_created),lastUpdate:new Date(i.date_updated),channel:i.received_via,is_vip:!1,transaction_no:i.transaction_no,app_uid:c,app_number:G.a.generateTicketNumber(i.ticket_category.ticket_type,i.ticket_category.specific_type,n.app_number)}),a.setState({loading:!1}),a.getTicketStats(a.tickets),e.length==t.length&&console.log("HEY")},function(e){console.log(e)})},function(e){console.log(e)});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())},function(e){console.log(e)});case 4:case"end":return e.stop()}},e)})),a.setSelectedColumns=function(e){a.setState({selectedColumns:e})},a.getVisibleColumns=function(){return Object(L.filter)(a.state.columns,function(e){return Object(L.findIndex)(a.state.selectedColumns,{name:e.name})>=0})},a.generateReport=function(){console.log("generate report")},a.onSearchTextChange=function(e){e.preventDefault();var t=e.target.value;a.setState({query:t},function(){return a.filterTickets()})},a.onStatusFilterClick=function(e){a.state.status!==e&&a.setState({status:e},function(){return a.filterTickets()})},a.componentWillMount=function(){var e=U.columns;a.setState({columns:e,selectedColumns:e,fixedColumns:Object.keys(U).length>0?U.fixedColumns:[],formattedColumns:Object.keys(U).length>0?U.formattedColumns:[],columnExtensions:Object.keys(U).length>0?U.columnExtensions:[]})},a.componentDidMount=function(){a.loadTicketList()},a.getFilteredTickets=function(e){var t=a.tickets;return e.map(function(e){t=t.filter(function(t){return!a.state.filters[e.name]||(""===a.state.filters[e.name]||t[e.name]&&t[e.name].toString().toLowerCase().includes(a.state.filters[e.name].toLowerCase()))}).filter(function(e){return""===a.state.status||e.status.toLowerCase()===a.state.status.toLowerCase()}).filter(function(e){return""===a.state.query||e.app_number.toLowerCase().includes(a.state.query.toLowerCase())})}),t},a.state={loading:!1,status:"",query:"",columns:[],selectedColumns:[],fixedColumns:[],formattedColumns:{},columnExtensions:[],rows:[],ticketStats:{},ticketList:[],filters:{}},a.tickets=[],a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"sortTickets",value:function(e,t){this.tickets.sort(function(a,n){return a[e]&&n[e]&&a[e].toString().toLowerCase()>n[e].toString().toLowerCase()?t?1:-1:t?-1:1})}},{key:"render",value:function(){var e=this;return d.createElement("div",null,this.state.loading?d.createElement(F,null):null,d.createElement("div",{style:{position:"absolute",right:"1rem",top:"1rem"}},d.createElement(P.a,{color:"primary",style:{backgroundColor:"#CCCCCC"}},d.createElement(b.a,{onClick:this.onLogout}))),d.createElement("div",{className:Object(D.default)("TicketListPage")},d.createElement(O.a,{container:!0,direction:"row",justify:"space-between",alignItems:"baseline"},d.createElement(O.a,{item:!0,xs:12,className:Object(D.default)("header-label")},d.createElement(h.a,{className:Object(D.default)("title"),color:"textPrimary"},"Tickets"))),d.createElement(O.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",spacing:1,className:Object(D.default)("search")},d.createElement(O.a,{item:!0,sm:12,md:8},d.createElement(C.a,{id:"cc_search_tickets_tf",placeholder:"Search ticket ID, approval code, subject, or recipient",className:Object(D.default)("search-field"),margin:"dense",variant:"outlined",fullWidth:!0,onChange:this.onSearchTextChange,value:this.state.query,inputProps:{"aria-label":"bare"},InputProps:{startAdornment:d.createElement(T.a,{icon:N.p,className:Object(D.default)("input-adornment")})}})),d.createElement(O.a,{item:!0,sm:6,md:2,alignContent:"flex-end",justify:"flex-end"},d.createElement(k.a,{fullWidth:!0,onClick:function(){e.generateReport()}},d.createElement(h.a,{className:Object(D.default)("link-button"),align:"right"},d.createElement(T.a,{icon:N.e,className:Object(D.default)("link-button-icon")}),d.createElement("span",{className:Object(D.default)("link-button-text")},"Generate Report")))),d.createElement(O.a,{item:!0,sm:6,md:2,alignContent:"flex-end"},d.createElement(Q,{setSelectedColumns:this.setSelectedColumns,columns:this.state.columns,selectedColumns:this.state.selectedColumns}))),d.createElement(O.a,{container:!0,direction:"row",className:Object(D.default)("tickets-table")},d.createElement(O.a,{item:!0,xs:12},d.createElement(j.a,{className:Object(D.default)("tickets-table-container")},d.createElement(O.a,{container:!0,xs:12},d.createElement(O.a,{item:!0,xs:!0,className:Object(D.default)("tickets-table-stats")},d.createElement(h.a,{align:"center",onClick:function(){e.onStatusFilterClick("")}},d.createElement("span",{className:""==this.state.status?Object(D.default)("tickets-all"):Object(D.default)("tickets-default")},this.state.ticketStats.all?this.state.ticketStats.all:0),d.createElement("span",{className:""==this.state.status?Object(D.default)("ticket-label-active"):Object(D.default)("ticket-label")},"ALL"))),d.createElement(O.a,{item:!0,xs:!0,className:Object(D.default)("tickets-table-stats")},d.createElement(h.a,{align:"center",onClick:function(){e.onStatusFilterClick("open")}},d.createElement("span",{className:"open"==this.state.status?Object(D.default)("tickets-open"):Object(D.default)("tickets-default")},this.state.ticketStats.open?this.state.ticketStats.open:0),d.createElement("span",{className:"open"==this.state.status?Object(D.default)("ticket-label-active"):Object(D.default)("ticket-label")},"OPEN"))),d.createElement(O.a,{item:!0,xs:!0,className:Object(D.default)("tickets-table-stats")},d.createElement(h.a,{align:"center",onClick:function(){e.onStatusFilterClick("pending")}},d.createElement("span",{className:"pending"==this.state.status?Object(D.default)("tickets-pending"):Object(D.default)("tickets-default")},this.state.ticketStats.pending?this.state.ticketStats.pending:0),d.createElement("span",{className:"pending"==this.state.status?Object(D.default)("ticket-label-active"):Object(D.default)("ticket-label")},"PENDING"))),d.createElement(O.a,{item:!0,xs:!0,className:Object(D.default)("tickets-table-stats")},d.createElement(h.a,{align:"center",onClick:function(){e.onStatusFilterClick("resolved")}},d.createElement("span",{className:"resolved"==this.state.status?Object(D.default)("tickets-resolved"):Object(D.default)("tickets-default")},this.state.ticketStats.resolved?this.state.ticketStats.resolved:0),d.createElement("span",{className:"resolved"==this.state.status?Object(D.default)("ticket-label-active"):Object(D.default)("ticket-label")},"RESOLVED"))),d.createElement(O.a,{item:!0,xs:!0,className:Object(D.default)("tickets-table-stats")},d.createElement(h.a,{align:"center",onClick:function(){e.onStatusFilterClick("closed")}},d.createElement("span",{className:"closed"==this.state.status?Object(D.default)("tickets-closed"):Object(D.default)("tickets-default")},this.state.ticketStats.closed?this.state.ticketStats.closed:0),d.createElement("span",{className:"closed"==this.state.status?Object(D.default)("ticket-label-active"):Object(D.default)("ticket-label")},"CLOSED")))),d.createElement(O.a,{item:!0,xs:12,style:{overflow:"auto"}},d.createElement(V.a,{className:"ticket-list-table",canOverflow:!0,rows:this.getFilteredTickets(this.state.columns),stickyHeader:!0,renderHeader:function(){return e.renderTableHeader(e.state.columns,e.state.fixedColumns)},renderRow:function(t,a){return e.renderTableRow(t,a,e.state.columns,e.state.fixedColumns)},rowsPerPageOptions:[5,10,15]})))))))}},{key:"renderTableHeader",value:function(e,t){var a=this,n=0;return d.createElement(d.Fragment,null,e.map(function(c,i){var r=t.filter(function(e){return e===c.name})[0],s=!0;r&&e[i+1]&&(s=!!t.filter(function(t){return t===e[i+1].name})[0]);var l={left:r?125*n:0,zIndex:r?125:0,minWidth:"125px",maxWidth:"125px",borderRight:s?void 0:"#9EA3AC 2px solid"};return r&&n++,d.createElement(w.a,{style:l},d.createElement("span",{className:"header-2"},c.title),d.createElement("div",{style:{float:"right"}},d.createElement(Y.a,{icon:N.q,onClick:function(){a.sortTickets(c.name,!0),a.setState({loading:!1})}})),d.createElement(X.a,{value:a.state.filters[c.name],onChange:function(e){a.state.filters[c.name]=e,a.setState({filters:a.state.filters})}}))}))}},{key:"renderTableRow",value:function(e,t,a,n){var c=0,i=t%2===0?"#FFFFFF":"#F6F7FA";return d.createElement(_.a,{style:{backgroundColor:i},onClick:function(){"Inquiry"===e.type?window.location.href="#/customer-care/update-ticket/"+e.app_uid+"/"+e.app_number+"/"+e.ticket_no:"Outpatient Procedure"===e.specificType?window.location.href="#/customer-care/resolve-ticket/"+e.app_uid+"/"+e.app_number+"/"+e.ticket_no:"Inpatient"===e.specificType?window.location.href="#/customer-care/update-ticket/"+e.app_uid+"/"+e.app_number+"/"+e.ticket_no:"Consultation"===e.specificType&&(window.location.href="#/customer-care/resolve-ticket/"+e.app_uid+"/"+e.app_number+"/"+e.ticket_no)}},a.map(function(t,i){var r=n.filter(function(e){return e===t.name})[0],s=!0;r&&a[i+1]&&(s=!!n.filter(function(e){return e===a[i+1].name})[0]);var l={left:r?125*c:0,zIndex:r?125:0,position:r?"sticky":"relative",minWidth:"125px",maxWidth:"125px",borderRight:s?void 0:"#9EA3AC 2px solid"};r&&c++;return d.createElement(w.a,{style:l},0==i?d.createElement("div",{style:{width:"100%",textAlign:"center"}},d.createElement("div",{className:"number-item",style:{display:"inline-block",backgroundColor:{Low:"#3AB77D",Medium:"#FAB435",High:"#FD5451"}[e[t.name]]}},{Low:3,Medium:2,High:1}[e[t.name]])):3==i||10==i||11==i?G.a.toShortDateString(e[t.name]):13==i?e[t.name]?"Yes":"No":e[t.name])}))}}]),t}(d.Component),$=function(e){return e.ticketList},ee=function(e){return{Map:Object(p.b)(q,e)}}}}]);
//# sourceMappingURL=5.b69f448f.chunk.js.map
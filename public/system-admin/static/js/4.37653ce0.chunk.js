(window["webpackJsonpsystem-admin"]=window["webpackJsonpsystem-admin"]||[]).push([[4],{803:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n(0),r=n(749),o=n(37),l=Object(o.a)({root:{position:"fixed",width:"100%",height:"100%",zIndex:9999,right:"0px",bottom:"0px",top:"0px",left:"0px",textAlign:"center",backgroundColor:"rgba(0, 0, 0, 0.5)"},container:{height:"100%",outline:0,alignItems:"center",justifyContent:"center",display:"flex",flexDirection:"column"}}),i=function(){var e=l();return a.createElement("div",{className:e.root},a.createElement("div",{className:e.container},a.createElement(r.a,{size:150})))};i.defaultProps={}},804:function(e,t,n){"use strict";n.d(t,"a",function(){return k});var a=n(13),r=n(208),o=n(0),l=n(176),i=n(16),c=n(125),s=n(27),u=n(24),m=n(259),d=n(257),p=n(795),f=n(159),g=n(801),b=n(751),h=n(803),E=(n(805),n(77)),v=n(797),y=n(129),O=[{value:"all",label:"All"},{value:"active",label:"Active"},{value:"deactivated",label:"Deactivated"},{value:"awaiting activation",label:"Awaiting activation"}],S=function(e){var t=e.items,n=Object(r.a)(e,["items"]);return o.createElement(m.a,Object.assign({variant:"outlined",style:{width:"100%"},renderValue:function(e){if(null!=e){var n=t.find(function(t){return t.value===e});return n?n.label:"\u2014\u2014"}return"\u2014\u2014"}},n),t.map(function(e,t){return o.createElement(d.a,{key:t,value:e.value},e.label)}))},_=function(e){var t=e.filter,n=e.onFilter,a=e.filteringEnabled,r=e.classes,l=e.column;return a?"action_delete"===l.name?o.createElement(p.a,{style:{padding:"0px 10px 8px 10px"},classes:r}):"last_login"===l.name?o.createElement(p.a,{style:{padding:"0px 10px 8px 10px"},classes:r},o.createElement(E.a,{utils:y.a},o.createElement(v.a,{variant:"dialog",format:"MMMM DD, YYYY",inputVariant:"outlined",value:t?t.value:"",invalidDateMessage:"",onChange:function(e){n(e?{value:e.toISOString()}:null)}}))):"status"===l.name?o.createElement(p.a,{classes:r,style:{paddingTop:"5px"}},o.createElement(S,{onChange:function(e){return n(e.target.value?{value:e.target.value}:null)},name:"status",items:O,id:"status",value:t?t.value:""})):o.createElement(p.a,{style:{padding:"0px 10px 8px 10px"},classes:r},o.createElement(f.a,{classes:r,style:{width:"100%"},value:t?t.value:"",labelWidth:0,onChange:function(e){return n(e.target.value?{value:e.target.value}:null)},placeholder:""})):null},x=function(e){return"asc"===e.direction?o.createElement(s.a,{style:{marginLeft:"10px"},icon:u.s}):o.createElement(s.a,{style:{marginLeft:"10px"},icon:u.r})},C=function(e){var t=e.column,n=e.onSort,a=e.children,r=e.direction;return"action_delete"===t.name?null:o.createElement(g.a,{hideSortIcon:!0,onClick:n,style:{textOverflow:"ellipsis",overflow:"hidden"}},a,r?o.createElement(x,{direction:r}):o.createElement(s.a,{style:{marginLeft:"10px"},icon:u.q}))},j=function(e){var t=e.expanded;return o.createElement(o.Fragment,null,o.createElement("div",{style:{padding:"8.5px 12px",display:"table-cell",verticalAlign:"middle"}},o.createElement(s.a,{icon:t?u.b:u.a,size:"2x",color:"rgba(0, 0, 0, 0.54)"})))},k=function(e){var t=e.rows,n=e.columns,r=e.disableSort,m=e.disableFilter,d=e.enableGrouping,f=e.groupColumnName,g=e.viewOnly,E=e.message,v=e.columnExtensions,y=e.sortingStateColumnExtensions,O=e.defaultSorting,S=e.onDeleteRow,x=e.enableSelection,k=e.enableSelectAll,w=e.onRowClick,P=e.totalCount,N=e.onPageChange,M=e.currentPage,D=e.pageSize,I=e.onSetPageSize,R=e.onCheckRow,A=e.onSelectGroup,z=e.loading,T=e.onSortingChange,U=e.enableIntegratedSorting,F=e.enableOpenGroupTotalChecked,L=o.useState([]),B=Object(a.a)(L,2),Y=B[0],G=B[1],W=o.useState([5,10,15]),q=Object(a.a)(W,1)[0],V=o.useState([]),H=Object(a.a)(V,2),J=H[0],K=H[1],X=function(e){var t=e.row,n=e.onToggle;return o.createElement(p.a,null,o.createElement(b.a,{icon:o.createElement(s.a,{icon:u.l}),checkedIcon:o.createElement(s.a,{icon:u.d}),checked:t.checked,onClick:function(e){e.stopPropagation(),n(),R&&R(t)}}))};return o.createElement("div",{style:{padding:"10px 0"}},o.createElement(l.a,null,o.createElement(c.a,{rows:t,columns:n},o.createElement(i.o,{currentPage:M,onCurrentPageChange:N,pageSize:D,onPageSizeChange:I}),o.createElement(i.b,{totalCount:P}),!r&&T?o.createElement(i.s,{defaultSorting:O,columnExtensions:y,sorting:J,onSortingChange:function(e){T&&T(e),K(e)}}):r?null:o.createElement(i.s,{defaultSorting:[]}),g?null:o.createElement(i.r,{selection:Y,onSelectionChange:function(e){w?x||w(e[0]):G(e)}}),d&&f?o.createElement(i.h,{grouping:[{columnName:f}]}):null,m?null:o.createElement(i.e,{onFiltersChange:e.onFilterChange}),U?o.createElement(i.m,null):null,d?o.createElement(i.j,null):null,o.createElement(c.d,{columnExtensions:v,messages:{noData:E},cellComponent:function(e){var t=e.value,n=e.row;return"action_delete"===e.column.name?o.createElement(p.a,{style:{padding:"0px 30px 8px 10px",textAlign:"right"}},o.createElement("span",{onClick:function(){S&&S(n)}},o.createElement(s.a,{icon:u.k}))):o.createElement(p.a,null,t)}}),o.createElement(c.h,{showSortingControls:!r,sortLabelComponent:C}),o.createElement(c.b,{pageSizes:d?[30,40,50]:q}),g?null:o.createElement(c.i,{highlightRow:!0,selectByRowClick:!0,showSelectAll:!!k||void 0,cellComponent:X,showSelectionColumn:x}),d?o.createElement(c.g,{contentComponent:function(e){var n=e.row,a=!1,r=0,l=0;return t.map(function(e){e.name===n.value&&(l++,e.checked&&(a=!0,r++))}),g?g&&F?o.createElement(o.Fragment,null,o.createElement("div",{style:{padding:"8.5px 2px",display:"table-cell",verticalAlign:"middle"}},o.createElement("span",null,n.value)),o.createElement("div",{style:{padding:"8.5px 30px",display:"table-cell",verticalAlign:"middle"}},o.createElement("span",null,r,"/",l))):o.createElement("div",{style:{padding:"8.5px 2px",display:"table-cell",verticalAlign:"middle"}},o.createElement("span",null,n.value)):o.createElement(o.Fragment,null,o.createElement("div",{style:{padding:"8.5px 15.5px",display:"table-cell",verticalAlign:"middle"}},o.createElement(b.a,{icon:o.createElement(s.a,{icon:u.l}),checkedIcon:o.createElement(s.a,{icon:u.d}),checked:a,onClick:function(e){e.stopPropagation(),A&&A(n.value)}})),o.createElement("div",{style:{padding:"8.5px 2px",display:"table-cell",verticalAlign:"middle"}},o.createElement("span",null,n.value)),o.createElement("div",{style:{padding:"8.5px 30px",display:"table-cell",verticalAlign:"middle"}},o.createElement("span",null,r,"/",l)))},iconComponent:j}):null,m?null:o.createElement(c.f,{cellComponent:_})),z&&o.createElement(h.a,null)))};k.defaultProps={rows:[],columns:[],enableIntegratedSorting:!1,disableSort:!1,disableFilter:!1,enableGrouping:!1,enableSelection:!1,enableSelectAll:!1,enableOpenGroupTotalChecked:!1,groupColumnName:"",viewOnly:!0,columnExtensions:[],message:"",sortingStateColumnExtensions:[],defaultSorting:[],totalCount:0,currentPage:0,pageSize:0,groupNameChecked:[],loading:!1}},805:function(e,t,n){},818:function(e,t,n){"use strict";n.r(t);var a=n(13),r=n(22),o=n(0),l=n(61),i={ResetReducer:"Roles_ResetReducer",SetReducer:"Roles_SetReducer"},c=function(e){return{payload:e,type:i.SetReducer}},s=n(12),u=n(82),m=n(37),d=n(107),p=n(804),f=n(316),g=n(179),b=n(40),h=n.n(b),E=n(143),v=n(15),y=function(e){var t=e.classes,n=e.rows;return o.createElement(o.Fragment,null,o.createElement(s.a,{item:!0,xs:4},o.createElement(E.a,{className:t.inputLabel,htmlFor:"role_id"},"ROLE ID"),o.createElement(v.a,null,o.createElement("b",null,n&&n.role_id?n.role_id:"-"))),o.createElement(s.a,{item:!0,xs:4},o.createElement(E.a,{className:t.inputLabel,htmlFor:"primary_module"},"MODULE"),o.createElement(v.a,null,o.createElement("b",null,n&&n.module?n.module:"-"))),o.createElement(s.a,{item:!0,xs:4},o.createElement(E.a,{className:t.inputLabel,htmlFor:"description"},"DESCRIPTION"),o.createElement(v.a,null,o.createElement("b",null,n&&n.description?n.description:"-"))),o.createElement(s.a,{item:!0,xs:4},o.createElement(E.a,{className:t.inputLabel,htmlFor:"role_id"},"ROLE NAME"),o.createElement(v.a,null,o.createElement("b",null,n&&n.name?n.name:"-"))),o.createElement(s.a,{item:!0,xs:4},o.createElement(E.a,{className:t.inputLabel,htmlFor:"status"},"STATUS"),o.createElement(v.a,null,o.createElement("b",null,n&&n.status?n.status:"-"))),o.createElement(s.a,{item:!0,xs:4}),o.createElement(s.a,{item:!0,xs:4},o.createElement(E.a,{className:t.inputLabel,htmlFor:"primary_module"},"EFFECTIVITY DATE"),o.createElement(v.a,null,o.createElement("b",null,n&&n.effectivity_date?h()(n.effectivity_date).format("MMMM DD, YYYY"):"-"))),o.createElement(s.a,{item:!0,xs:4},o.createElement(E.a,{className:t.inputLabel,htmlFor:"primary_module"},"EXPIRY DATE"),o.createElement(v.a,null,o.createElement("b",null,n&&n.expiry_date?h()(n.expiry_date).format("MMMM DD, YYYY"):"-"))),o.createElement(s.a,{item:!0,xs:4},o.createElement(E.a,{className:t.inputLabel,htmlFor:"description"},"ATTACHED GROUP/S"),o.createElement(v.a,null,n&&n.associated_groups&&n.associated_groups.length>0?n.associated_groups.map(function(e,t){return o.createElement("b",null,"".concat(e.name).concat(t!==n.associated_groups.length-1?", ":""))}):"-")),o.createElement(s.a,{item:!0,xs:4},o.createElement(E.a,{className:t.inputLabel,htmlFor:"primary_module"},"LAST UPDATE"),o.createElement(v.a,null,o.createElement("b",null,n&&n.date_last_update?h()(n.date_last_update).format("MMMM DD, YYYY"):"-"))))},O=n(751),S=n(797);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(n,!0).forEach(function(t){Object(r.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var C=function(e){var t=e.rows,n=e.classes,r=e.dataChanges,l=o.useState({description:null,isProcessMaker:null,effectivityDate:t.effectivity_date,expiryDate:""}),i=Object(a.a)(l,2),c=i[0],u=i[1];return o.useEffect(function(){t.expiry_date&&""!==t.expiry_date&&u(x({},c,{expiryDate:t.expiry_date}))},[]),o.createElement(o.Fragment,null,o.createElement(s.a,{item:!0,xs:4},o.createElement(E.a,{className:n.inputLabel,htmlFor:"role_id"},"MODULE"),o.createElement(v.a,null,o.createElement("b",null,t.module))),o.createElement(s.a,{item:!0,xs:4},o.createElement(E.a,{className:n.inputLabel,htmlFor:"role_id"},"ROLE ID"),o.createElement(v.a,null,o.createElement("b",null,t.role_id))),o.createElement(s.a,{item:!0,xs:4},o.createElement(E.a,{className:n.inputLabel,htmlFor:"role_id"},"DESCRIPTION"),o.createElement(d.BasicTextField,{value:null!==c.description?c.description:t.description,onChange:function(e){u(x({},c,{description:e.target.value}))},onBlur:function(e){r(x({},c,{description:e.target.value}))},disabled:!!t.is_processMaker})),o.createElement(s.a,{item:!0,xs:4},o.createElement(E.a,{className:n.inputLabel,htmlFor:"role_id"},"ROLE NAME"),o.createElement(v.a,null,o.createElement("b",null,t&&t.name?t.name:"-"))),o.createElement(s.a,{item:!0,xs:4},o.createElement(E.a,{className:n.inputLabel},"IS A PROCESSMAKER PROCESS MAKER ROLE"),o.createElement(O.a,{checked:null!==c.isProcessMaker?c.isProcessMaker:t.is_processMaker,onChange:function(e){u(x({},c,{isProcessMaker:e.target.checked})),r(x({},c,{isProcessMaker:e.target.checked}))},disabled:!0})),o.createElement(s.a,{item:!0,xs:4},o.createElement(E.a,{className:n.inputLabel,htmlFor:"role_id"},"STATUS"),o.createElement(v.a,null,o.createElement("b",null,t&&t.status))),o.createElement(s.a,{item:!0,xs:6},o.createElement(E.a,{className:n.inputLabel,htmlFor:"role_id"},"EFFECTIVITY DATE"),o.createElement(S.a,{inputProps:{disabled:!0},maxDate:h()(c.expiryDate).subtract(1,"days").startOf("day"),maxDateMessage:"Effectivity date cannot be higher or equal than expiry date.",value:c.effectivityDate,format:"MMM DD, YYYY",style:{width:"100%",marginTop:10},onChange:function(e){u(x({},c,{effectivityDate:e})),r(x({},c,{effectivityDate:e}))},clearable:!0,disabled:!!t.is_processMaker,inputVariant:"outlined"})),o.createElement(s.a,{item:!0,xs:6},o.createElement(E.a,{className:n.inputLabel,htmlFor:"role_id"},"EXPIRY DATE (If applicable)"),o.createElement(S.a,{inputProps:{disabled:!0},clearable:!0,minDate:h()(c.effectivityDate).add(1,"days").startOf("day"),minDateMessage:"Expiry date cannot be lower or equal than effectivity date.",value:c.expiryDate,style:{width:"100%",marginTop:10},invalidDateMessage:"",format:"MMMM DD, YYYY",onChange:function(e){u(x({},c,{expiryDate:e})),r(x({},c,{expiryDate:e}))},disabled:!!t.is_processMaker,inputVariant:"outlined"})))},j=function(e){var t=e.rows,n=e.classes,r=e.mode,l=e.rbacList,i=e.rbacState,c=e.onUpdateChange,m=e.onNavigateSideMenu,b=e.onPageChange,E=e.onFilterChange,v=e.onSortChange,O=e.onPageSizeChange,S=e.onSearch,_=o.useState(!1),x=Object(a.a)(_,2),j=x[0],k=x[1],w=o.useState(0),P=Object(a.a)(w,2),N=P[0],M=P[1],D=o.useState(!1),I=Object(a.a)(D,2),R=I[0],A=I[1],z=o.useState(null),T=Object(a.a)(z,2),U=T[0],F=T[1],L=o.useState(!1),B=Object(a.a)(L,2),Y=B[0],G=B[1],W=o.useState(l),q=Object(a.a)(W,2),V=q[0],H=q[1],J=o.useState(!1),K=Object(a.a)(J,2),X=K[0],Q=K[1],Z=o.useState([]),$=Object(a.a)(Z,2),ee=$[0],te=$[1],ne=o.useState(!1),ae=Object(a.a)(ne,2),re=ae[0],oe=ae[1],le=o.useState(!1),ie=Object(a.a)(le,2),ce=ie[0],se=ie[1],ue=o.useState(!1),me=Object(a.a)(ue,2),de=me[0],pe=me[1],fe=o.useState(l),ge=Object(a.a)(fe,2),be=ge[0],he=ge[1],Ee=o.useState({description:null,isProcessMaker:null,effectivityDate:null,expiryDate:null}),ve=Object(a.a)(Ee,2),ye=ve[0],Oe=ve[1];o.useEffect(function(){he(l)},[l]);var Se=[{name:"User Management",value:"0"},{name:"Membership",value:"1"},{name:"Underwriting",value:"2"},{name:"Customer Care",value:"3"},{name:"Claims",value:"4"}],_e=function(e){console.log(be),console.log(l);var n;n=be.filter(function(e){return e.checked}),console.log(n);var a={module:t.module,name:t.name,role_id:t.role_id,effectivity_date:e.effectivityDate?h()(e.effectivityDate).toISOString():t.effectivity_date,description:null!==e.description?e.description:t.description,status:"active",date_last_update:h()().toISOString(),is_processmaker:e.isProcessMaker?e.isProcessMaker:!!t.is_processMaker&&t.is_processmaker,rbac:n.length>0?n:t.rbac};"edit"===r&&(a._id=t._id,a.status=t.status),""!==e.expiryDate&&(a.expiry_date=h()(e.expiryDate).toISOString()),c(a),pe(!0),console.log(de)};return o.createElement(o.Fragment,null,o.createElement(s.a,{container:!0,xs:12,spacing:4},"view"===r?o.createElement(y,{rows:t,onNavigateSideMenu:function(e){m&&m(e)},classes:n}):"edit"===r?o.createElement(C,{rows:t,classes:n,dataChanges:function(e){Oe(e),_e(e)}}):null,o.createElement(s.a,{item:!0,xs:12},o.createElement(f.a,{onSearch:S,onChange:S,placeholder:"Search policies"}),o.createElement(p.a,{rows:l,columns:[{name:"operation",title:"Object and Operations"},{name:"policy",title:"Policies"},{name:"policy_id",title:"Policy ID"},{name:"name",title:"Name"}],enableGrouping:!0,groupColumnName:"name",viewOnly:"view"===r,enableOpenGroupTotalChecked:"view"===r,message:"There are no policies to show yet.",enableSelection:"view"!==r,loading:X,onCheckRow:function(e){!function(e){Q(!0);var t=l,n=be;0===V.length?H(l):t=V,t.length>0&&(t.map(function(t){t._id===e._id&&(t.checked?n.push(t):n.filter(function(t){return e._id!==t._id}),t.checked=!t.checked)}),he(n),H(t)),_e(ye),Q(!1)}(e)},currentPage:i.currentPage,pageSize:i.limit,defaultFilters:ee,onFilterChange:function(e){te(e),E(e)},onSortingChange:v,onSetPageSize:O,onPageChange:b,totalCount:i.count?i.count:0,onSelectGroup:function(e){!function(e){Q(!0);var t=l,n=0,a=be;0===V.length&&H(l),t.length>0&&t.map(function(t){t.name==e&&!0===t.checked&&n++}),n>0?t.map(function(t){t.name==e&&(t.checked=!1)}):t.map(function(t){t.name==e&&(t.checked=!0,a.push(t))}),he(a),H(t),setTimeout(function(){Q(!1),_e(ye)},500)}(e)}}))),o.createElement(g.a,{isModalOpen:j,onClose:function(){},message:"New Role has been added successfully.",title:"Added New Role",buttons:o.createElement(s.a,{container:!0,justify:"center",alignItems:"center"},o.createElement(s.a,{item:!0,xs:6},o.createElement(u.a,{onClick:function(){k(!1)},className:n.button,variant:"contained",color:"primary"},"Okay")))}),o.createElement(g.a,{isModalOpen:R,onClose:function(){A(!1)},message:"Select a module for the role you will create:",title:"Choose a Module",buttons:o.createElement(s.a,{container:!0,justify:"center",alignItems:"center",style:{textAlign:"center"}},o.createElement(s.a,{item:!0,xs:6},o.createElement(u.a,{onClick:function(){A(!1)},variant:"outlined",color:"secondary",className:n.button},"Cancel")),o.createElement(s.a,{item:!0,xs:6},o.createElement(u.a,{variant:"contained",color:"primary",className:n.button,onClick:function(){G(!0),A(!1)}},"Continue")))},o.createElement("div",{style:{width:"90%",margin:"auto"}},o.createElement(d.BasicSelect,{menuItems:Se,width:"100%",value:N,onChange:function(e){M(e.target.value)}}))),o.createElement(g.a,{isModalOpen:Y,onClose:function(){G(!1)},message:"All progress made will be lost. Continue to change the module?",title:"Confirm Change Module",buttons:o.createElement(s.a,{container:!0,justify:"center",alignItems:"center"},o.createElement(s.a,{item:!0,xs:6},o.createElement(u.a,{onClick:function(){G(!1)},className:n.button,variant:"outlined",color:"secondary"},"Cancel")),o.createElement(s.a,{item:!0,xs:6},o.createElement(u.a,{className:n.button,variant:"contained",color:"primary",onClick:function(){return function(){var e=Se[Number(N)].name;G(!1),F(e),console.log(U)}()}},"Continue")))}),o.createElement(g.a,{isModalOpen:re,onClose:function(){oe(!1)},message:"New role has been deleted.",title:"Delete Success",buttons:o.createElement(s.a,{container:!0,justify:"center",alignItems:"center"},o.createElement(s.a,{item:!0},o.createElement(u.a,{onClick:function(){oe(!1)},className:n.button,variant:"contained",color:"primary"},"Okay")))}),o.createElement(g.a,{isModalOpen:ce,onClose:function(){se(!1)},message:"You do not have an assigned role to your account to perform this action.",title:"Cannot Edit Role",buttons:o.createElement(s.a,{container:!0,justify:"center",alignItems:"center"},o.createElement(s.a,{item:!0},o.createElement(u.a,{onClick:function(){se(!1)},className:n.button,variant:"contained",color:"primary"},"Okay")))}))},k=n(141),w=n(35),P=n.n(w),N=n(65),M=n(128),D=n(17),I=n.n(D),R=n(73),A=n(83),z=n(86),T=n(84),U=n(85),F=n(27),L=n(24),B=n(161);function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var G=Object(m.a)(function(e){return{gridContainerNoPadding:{padding:e.spacing(1)},searchIcon:{position:"absolute",left:"15px",top:"50%",transform:"translateY(-50%)",fontSize:"20px",color:"#b0b0b0"},searchContainer:{borderRadius:"3px",position:"relative"},searchBox:{display:"block",padding:"12px 12px 12px 40px",borderRadius:"3px",fontSize:"14px",width:"100%",border:"1px solid #c4c4c4",outline:"none",overflow:"hidden","&:hover":{border:"1px solid rgb(39, 46, 76)"},"&:focus":{outline:"2px solid #3AB77D"}},searchLabel:{fontSize:14,display:"block",padding:"5px 0"},comboBoxContainer:{opacity:100,position:"absolute",top:"100%",left:"0%",width:"100%",backgroundColor:"#fff",borderRadius:"2px",border:"1px solid #c4c4c4",padding:"10px",maxHeight:300,overflowY:"auto",zIndex:1e3},list:{fontSize:12,padding:"5px","&:hover":{backgroundColor:"#dddfe3"}}}}),W=function(e){var t=e.placeholder,n=e.searchLabel,l=e.onSearch,i=e.onChange,c=G(),u=o.useState(null),m=Object(a.a)(u,2),d=m[0],p=m[1],f=o.useState(null),g=Object(a.a)(f,2),b=g[0],h=g[1],E=o.useState(0),v=Object(a.a)(E,2),y=v[0],O=v[1],S=o.useState(!1),_=Object(a.a)(S,2),x=_[0],C=_[1],j=o.useState(),w=Object(a.a)(j,2),P=w[0],N=w[1],M=o.useState(!1),D=Object(a.a)(M,2),I=D[0],R=D[1];o.useEffect(function(){N(o.createRef())},[]);var A=function(){var t=b;console.log("SEARCH VAL",t),C(!0);var n=e.selectedUsers.map(function(e){return e.username});if(e.usersWithRole&&e.usersWithRole.length>0){var a=e.usersWithRole.map(function(e){return e.username});n=[].concat(Object(k.a)(n),Object(k.a)(a))}Object(B.l)({fields:e.fields,where:{username:{nin:n}}},t).then(function(e){var t=e.body.map(function(e){return e.roles=function(e){var t=[];return e.map(function(e){t.some(function(t){return t.role_id===e.role_id})||t.push(e)}),t}(e.roles),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(n,!0).forEach(function(t){Object(r.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{name:e.full_name?e.full_name:e.first_name+" "+e.middle_name+" "+e.last_name})});p(t),C(!1)}).catch(function(e){p([]),C(!1),console.log(e)})},z=function(e){var t=e.target.value;i&&i(t),t||p(null)};return o.useEffect(function(){b&&(R(!0),y&&clearTimeout(y),O(setTimeout(function(){b.length>=3&&(console.log("timeout search"),R(!1),A())},2e3)))},[b]),o.createElement(o.Fragment,null,o.createElement(s.a,{container:!0,xs:12,style:{padding:"10px 0"}},o.createElement(s.a,{item:!0,xs:12},n?o.createElement("label",{className:c.searchLabel},n):null),o.createElement(s.a,{item:!0,xs:12,className:c.searchContainer},o.createElement(F.a,{icon:L.p,className:c.searchIcon}),o.createElement("input",{ref:P,type:"search",placeholder:t,value:b&&void 0!==b.name?b.name:null,onChange:function(e){z(e),h(e.target.value)},onKeyUp:function(e){13==(e.keyCode||e.which)&&I&&b&&b.length>=3&&(console.log("enter search"),y&&clearTimeout(y),A(),R(!1))},className:c.searchBox}),x?o.createElement("div",{className:c.comboBoxContainer},"Loading..."):d&&d.length>0?o.createElement("div",{className:c.comboBoxContainer},o.createElement("ul",{style:{padding:0,margin:0,listStyle:"none"}},d&&d.map(function(e){return o.createElement("li",{className:c.list,onClick:function(){return function(e){P.current.focus(),p(null),l(e),h({name:""}),p(null)}(e)}},e&&e.name?e.name:null)}))):d&&0===d.length?o.createElement("div",{className:c.comboBoxContainer},"No Results"):null)))};function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var V=Object(m.a)(function(){return{selectedItems:{borderRadius:20,fontSize:13,backgroundColor:"#d1d4db",padding:"5px 10px"},xIcon:{fontSize:16}}});console.log(V);var H=function(e){function t(e){var n;return Object(R.a)(this,t),(n=Object(z.a)(this,Object(T.a)(t).call(this,e))).initializeData=function(){Object(B.l)(n.state.filter,"").then(function(e){var t=e.body.map(function(e){return e.roles=n.removeDuplicates(e.roles),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(n,!0).forEach(function(t){Object(r.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{name:e.full_name?e.full_name:e.first_name+" "+e.middle_name+" "+e.last_name})});n.props.setUsersWithRole(t)}).catch(function(e){console.log(e)})},n.handleOnSearch=function(e){if(!(!e||"object"!==typeof e||e&&!e.name||e&&!e.username)){var t=n.props.selectedUsers;t.push(e),n.props.setSelectedUsers(t),console.log(t)}},n.handleRemoveItem=function(e){var t=n.props.selectedUsers;t.splice(e,1),n.props.setSelectedUsers(t)},n.handleOnSaveItems=function(){n.props.onSave(n.props.selectedUsers)},n.state={selectedUsers:[],filter:{fields:n.props.apiCallFields,where:{and:[{}],or:[{"roles.role_id":n.props.roleId}]}}},n}return Object(U.a)(t,e),Object(A.a)(t,[{key:"componentDidUpdate",value:function(e){e.selectedUsers!==this.props.selectedUsers&&this.setState({selectedUsers:this.props.selectedUsers}),e.refreshUsersWithRole!==this.props.refreshUsersWithRole&&this.initializeData()}},{key:"componentDidMount",value:function(){this.initializeData()}},{key:"removeDuplicates",value:function(e){var t=[];return e.map(function(e){t.some(function(t){return t.role_id===e.role_id})||t.push(e)}),t}},{key:"render",value:function(){var e=this,t={buttonsContainer:{padding:"1em"},selectedContainer:{padding:"3em 0 2em"},selectedItems:{borderRadius:20,fontSize:13,backgroundColor:"#d1d4db",padding:"5px 10px",margin:"5px",display:"inline-block"},selectedText:{paddingRight:"5px"},saveButton:{width:"135px",fontSize:"14px",color:"#fff"},cancelButton:{width:"135px",fontSize:"14px"}};return o.createElement(o.Fragment,null,o.createElement("div",{style:{minHeight:400,minWidth:400}},o.createElement(W,{placeholder:"Please enter at least 3 characters to search.",fields:this.props.apiCallFields,searchLabel:"Search user account",onSearch:this.handleOnSearch,selectedUsers:this.state.selectedUsers,usersWithRole:this.props.usersWithRole}),o.createElement("div",{style:t.selectedContainer},o.createElement("div",null,this.state.selectedUsers.length>0?o.createElement("label",null,"Selected Users"):null),this.state.selectedUsers.map(function(n,a){return o.createElement("div",{style:t.selectedItems},o.createElement("span",{style:t.selectedText},n.name),o.createElement("span",{onClick:function(){return e.handleRemoveItem(a)}},o.createElement(F.a,{icon:L.x})))}))),o.createElement(s.a,{container:!0,spacing:3,justify:"center",alignItems:"baseline"},o.createElement(s.a,{item:!0,xs:4,style:{paddingRight:20}},o.createElement(u.a,{style:t.cancelButton,variant:"outlined",color:"secondary",onClick:function(){return e.props.onClose()}},"Cancel")),o.createElement(s.a,{item:!0,xs:4,style:{paddingLeft:20}},o.createElement(u.a,{disabled:this.state.selectedUsers.length<1,style:t.saveButton,variant:"contained",color:"primary",onClick:function(){return e.handleOnSaveItems()}},"Save"))))}}]),t}(o.Component),J=n(235),K=Object(m.a)(function(){return{selectedItems:{borderRadius:20,fontSize:13,backgroundColor:"#d1d4db",padding:"5px 10px"},xIcon:{fontSize:16}}});console.log(K);var X=function(e){function t(e){var n;return Object(R.a)(this,t),(n=Object(z.a)(this,Object(T.a)(t).call(this,e))).handleOnSearch=function(e){if(console.log(e),e&&"object"===typeof e&&(!e||e.name)){var t=n.state.selectedItems;t.push(e),n.setState({selectedItems:t}),console.log(t)}},n.handleRemoveItem=function(e){var t=n.state.selectedItems;t.splice(e,1),n.setState({selectedItems:t})},n.handleOnSaveItems=function(){n.props.onSave(n.state.selectedItems),n.setState({selectedItems:[]})},n.state={selectedItems:[],comboArray:[]},n}return Object(U.a)(t,e),Object(A.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(B.e)().then(function(t){console.log(t);var n={body:t.body,id:"_id",group_id:"group_id",name:"name",description:"description",user_count:"user_count",effectivity_date:"effectivity_date",date_updated:"date_updated",is_processmaker:"is_processmaker",pmaker_uid:"pmaker_uid",amount_limit:"amount_limit",roles:"roles",status:"status",department:"department",expiry_date:"expiry_date",rank:"rank",reports_to:"reports_to",meta_data:"meta_data"},a=[];n.body&&n.body.length>0&&(n.body.map(function(e){var t={id:e[n.id],group_id:e[n.group_id],name:e[n.name],description:e[n.description],user_count:e[n.user_count],effectivity_date:e[n.effectivity_date],date_updated:e[n.date_updated],is_processmaker:e[n.is_processmaker],pmaker_uid:e[n.pmaker_uid],amount_limit:e[n.amount_limit],roles:e[n.roles],status:e[n.status],department:e[n.department],expiry_date:e[n.expiry_date]?e[n.expiry_date]:void 0,rank:e[n.rank]?e[n.rank]:void 0,reports_to:e[n.reports_to]?e[n.reports_to]:void 0,meta_data:e[n.meta_data]?e[n.meta_data]:void 0};a.push(t)}),e.setState({comboArray:a}),console.log(e.state.comboArray))}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this,t={buttonsContainer:{padding:"1em"},selectedContainer:{padding:"3em 0 2em"},selectedItems:{borderRadius:20,fontSize:13,backgroundColor:"#d1d4db",padding:"5px 10px",margin:"5px",display:"inline-block"},selectedText:{paddingRight:"5px"},saveButton:{width:"135px",fontSize:"14px",color:"#fff"},cancelButton:{width:"135px",fontSize:"14px"}};return o.createElement(o.Fragment,null,o.createElement("div",{style:{minHeight:400,minWidth:400}},o.createElement(J.a,{placeholder:"Please enter at least 3 characters to search.",searchLabel:"Search user group",onSearch:this.handleOnSearch,comboBoxMode:!0,comboListsArray:this.state.comboArray}),o.createElement("div",{style:t.selectedContainer},this.state.selectedItems.length>0?o.createElement("div",null,o.createElement("label",null,"Selected Groups")):null,this.state.selectedItems.map(function(n,a){return o.createElement("div",{style:t.selectedItems},o.createElement("span",{style:t.selectedText},n.name),o.createElement("span",{onClick:function(){return e.handleRemoveItem(a)}},o.createElement(F.a,{icon:L.x})))}))),o.createElement(s.a,{container:!0,spacing:1},o.createElement(s.a,{item:!0,xs:6},o.createElement(u.a,{style:t.cancelButton,variant:"outlined",color:"secondary",onClick:function(){return e.props.onClose()}},"Cancel")),o.createElement(s.a,{item:!0,xs:6},o.createElement(u.a,{disabled:this.state.selectedItems.length<1,style:t.saveButton,variant:"contained",color:"primary",onClick:function(){return e.handleOnSaveItems()}},"Add"))))}}]),t}(o.Component),Q=n(92);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(n,!0).forEach(function(t){Object(r.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ee={_id:!0,first_name:!0,last_name:!0,middle_name:!0,username:!0,employee_id:!0,department:!0,main_module:!0,main_role:!0,group:!0,group_name:!0,reports_to:!0,roles:!0,full_name:!0,last_login:!0,status:!0},te=function(e){var t=e.rows,n=e.classes,r=Object(o.useState)("Groups"),l=Object(a.a)(r,2),i=l[0],c=l[1],m=Object(o.useState)(0),b=Object(a.a)(m,2),E=b[0],y=b[1],O=Object(o.useState)("none"),S=Object(a.a)(O,2),_=S[0],x=S[1],C=Object(o.useState)("none"),j=Object(a.a)(C,2),w=j[0],D=j[1],R=o.useState(!1),A=Object(a.a)(R,2),z=A[0],T=A[1],U=o.useState(0),F=Object(a.a)(U,2),L=F[0],Y=F[1],G=Object(o.useState)(),W=Object(a.a)(G,2),q=W[0],V=W[1],J=Object(o.useState)({limit:10,skip:0,currentPage:0,order:[],filter:[],count:0}),K=Object(a.a)(J,2),Z=K[0],te=K[1],ne=o.useState({rows:[],currentPage:0,totalCount:0,pageSize:10,offset:0,order:"",where:{},query:""}),ae=Object(a.a)(ne,2),re=ae[0],oe=ae[1],le=o.useState({title:"",message:"",open:!1,method:function(){}}),ie=Object(a.a)(le,2),ce=ie[0],se=ie[1],ue=o.useState({title:"",message:"",open:!1,method:function(){}}),me=Object(a.a)(ue,2),de=me[0],pe=me[1],fe=Object(o.useState)([]),ge=Object(a.a)(fe,2),be=ge[0],he=ge[1],Ee=Object(o.useState)([]),ve=Object(a.a)(Ee,2),ye=ve[0],Oe=ve[1],Se=Object(o.useState)(!1),_e=Object(a.a)(Se,2),xe=_e[0],Ce=_e[1],je=Object(o.useState)(!1),ke=Object(a.a)(je,2),we=ke[0],Pe=ke[1],Ne=Object(o.useState)(null),Me=Object(a.a)(Ne,2),De=Me[0],Ie=Me[1],Re=Object(o.useState)(!1),Ae=Object(a.a)(Re,2),ze=Ae[0],Te=Ae[1],Ue=Object(o.useState)(!1),Fe=Object(a.a)(Ue,2),Le=(Fe[0],Fe[1]),Be=[{name:"username",title:"Username"},{name:"full_name",title:"User Account"},{name:"last_login",title:"Last Activity Date",getCellValue:function(e){return e.last_login?h()(e.last_login).format("MMMM DD, YYYY"):"N/A"}},{name:"status",title:"Status",getCellValue:function(e){return e.status?e.status.charAt(0).toUpperCase()+e.status.slice(1):""}},{name:"action_delete",title:" "}];o.useEffect(function(){console.log(t),qe({pageSize:10,offset:0,role_id:"".concat(t.role_id),where:{},order:["group_id ASC"]},!0)},[]);var Ye=function(){var e=Object(N.a)(P.a.mark(function e(n){return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return T(!0),e.next=3,Object(B.b)(t.role_id,n).then(function(e){console.log(e),Le(!0)}).catch(function(e){Le(!1),console.log(e)});case 3:Te(!0),he([]),D("none"),We(Z.limit,Z.skip,Z.order,Z.currentPage,Z.filter),Ce(!xe);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Ge=function(){var e=Object(N.a)(P.a.mark(function e(n){return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Pe(!1),T(!0),e.next=4,Object(B.d)(t.role_id,n).then(function(e){return console.log(e)}).catch(function(e){return console.log(e)});case 4:D("none"),We(Z.limit,Z.skip,Z.order,Z.currentPage,Z.filter),Ce(!xe);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),We=function(e,n,a,r,o,l){L&&clearTimeout(L);var i={},c=a.length>0?"".concat("full_name"===a[0].columnName?"first_name":a[0].columnName," ").concat(a[0].direction):[];o.length>0&&o.map(function(e){"status"==e.columnName?"all"!==e.value&&(i[e.columnName]=e.value):"full_name"==e.columnName?i.first_name={like:"^".concat(e.value,".*"),options:"i"}:"last_login"==e.columnName?i.and=[{last_login:{lte:"".concat(h()(e.value).endOf("day").toISOString())}},{last_login:{gte:"".concat(h()(e.value).startOf("day").toISOString())}}]:i[e.columnName]={like:"^".concat(e.value,".*"),options:"i"}});var s={fields:ee,limit:e,offset:n,order:c,where:{and:[{"roles.role_id":t.role_id},{or:[i]}]}};Y(setTimeout(function(){T(!0),Object(B.l)(s,l||"").then(function(t){var l=t.body.map(function(e){return e.roles=function(e){var t=[];return e.map(function(e){t.some(function(t){return t.role_id===e.role_id})||t.push(e)}),t}(e.roles),e});V(l),te({currentPage:Z.currentPage>Math.ceil(t.count/e)-1?Math.ceil(t.count/e)-1:r,order:a,limit:e,skip:n,filter:o,count:t.count}),T(!1),console.log(l)}).catch(function(e){V([]),console.log(e),T(!1)})},o.length>0||l?2e3:0))},qe=function(e,t){T(!0),Object(B.f)(e.role_id,e.pageSize,e.offset,e.where,e.order,e.query).then(function(t){if(console.log(t),t.error){var n=$({},e,{rows:[],totalCount:0});Ve(n)}else{var a=$({},e,{rows:t.body,totalCount:t.count.count});Ve(a)}T(!1)}).catch(function(){console.log("catch"),T(!1);var t=$({},e,{rows:[],totalCount:0});Ve(t)})},Ve=function(e){oe($({},re,{},e))},He=function(){se($({},ce,{open:!1})),x("none"),qe({pageSize:10,offset:0,role_id:"".concat(t.role_id),where:{},order:["group_id ASC"]},!0)},Je=function(e){console.log("this is for deletion"),console.log(e),pe($({},de,{open:!0,title:"Remove from role",message:"Are you sure you want to remove ".concat(e.name," from the role ").concat(t.name,"?"),method:function(){!function(e){Ke(),T(!0);var n={body:[e],label:"name"},a=[];n.body&&n.body.length>0&&n.body.map(function(e){var n={_id:e._id,group_id:e.group_id,name:e.name,description:e.description,user_account:e.user_count,effectivity_date:e.effectivity_date,date_updated:e.date_updated,is_processmaker:e.is_processmaker,pmaker_uid:e.pmaker_uid,amount_limit:e.amount_limit,user_count:e.user_count,department:e.department,status:e.status.props.children},r=e.roles,o=[];r&&r.length>0&&r.map(function(e){e._id===t._id&&o.push(e)});var l=e.expiry_date,i=e.rank,c=e.reports_to,s=e.meta_data;void 0!==l&&(n.expiry_date=l),void 0!==i&&(n.rank=i),void 0!==c&&(n.reports_to=c),void 0!==s&&(n.meta_data=s),n.roles=o,a.push(n)}),console.log(a),Object(B.a)(t.role_id,a,"remove").then(function(t){T(!1),t.error?se($({},ce,{open:!0,title:"Remove User Group Failed!",message:"Something went wrong. User group wasn\u2019t removed.",method:He})):se($({},ce,{open:!0,title:"User group removed!",message:"".concat(e.name," has been successfully removed."),method:He}))}).catch(function(e){T(!1),se($({},ce,{open:!0,title:"Removed User Group Failed!",message:e.message,method:He})),console.log(e)}),console.log(JSON.stringify(a))}(e)}}))},Ke=function(){pe($({},de,{open:!1}))};return o.createElement(o.Fragment,null,z&&o.createElement(Q.a.LoadingIndicator,null),o.createElement(s.a,{container:!0,xs:12},o.createElement(s.a,{item:!0,xs:12},o.createElement(v.a,null,o.createElement("b",null,"Attached Groups and Users"))),o.createElement(s.a,{item:!0,xs:12},o.createElement(s.a,{container:!0,xs:12,alignItems:"center"},o.createElement(s.a,{item:!0,xs:6},o.createElement("ul",{style:{padding:"0",margin:"0"}},["Groups","Users"].map(function(e,a){return o.createElement("li",{className:n.menuList},o.createElement(M.a,{className:I()(n.menuLink,E===a?n.LinkActive:null),onClick:function(){return function(e,n){c(e),y(n),"Users"==e&&We(10,0,[],0,[]),"Groups"==e&&qe({pageSize:10,offset:0,role_id:"".concat(t.role_id),where:{},order:["group_id ASC"]},!0)}(e,a)}},e))}))),o.createElement(s.a,{item:!0,xs:6,className:n.alignRight}))),o.createElement(s.a,{item:!0,xs:12},"Groups"==i?o.createElement(o.Fragment,null,o.createElement(s.a,{className:n.alignRight},o.createElement(M.a,{onClick:function(){x("block")}}," Add to this role")),o.createElement(f.a,{onChange:function(e){L&&clearTimeout(L),Y(setTimeout(function(){var n={currentPage:0,pageSize:re.pageSize,offset:0,role_id:"".concat(t.role_id),order:re.order?re.order:"group_id ASC",where:re.where,query:e};qe(n)},3e3))},placeholder:"Search a user group",onSearch:function(e){L&&clearTimeout(L);var n={currentPage:0,pageSize:re.pageSize,offset:0,role_id:"".concat(t.role_id),order:re.order?re.order:"group_id ASC",where:re.where,query:e};qe(n)}}),o.createElement(p.a,{rows:function(e){var t=[];return e.length>0?(e.forEach(function(e){var n=$({},e,{group_id:"".concat(e.group_id),name:e.hasOwnProperty("name")?e.name:"N/A",user_count:e.hasOwnProperty("user_count")?e.user_count:"N/A",status:e.hasOwnProperty("status")?o.createElement("span",{style:{textTransform:"capitalize"}},e.status):"N/A"});t.push(n)}),t):[]}(re.rows),columns:[{name:"group_id",title:"Group ID"},{name:"name",title:"Group"},{name:"user_count",title:"Users in the Group"},{name:"status",title:"Status"},{name:"action_delete",title:" "}],viewOnly:!1,enableSelection:!1,totalCount:re.totalCount,currentPage:re.currentPage,pageSize:re.pageSize,columnExtensions:[{columnName:"action_delete",width:75,wordWrapEnabled:!0,align:"center"}],message:"There are no groups to show yet.",sortingStateColumnExtensions:[{columnName:"action_delete",sortingEnabled:!1}],onFilterChange:function(e){L&&clearTimeout(L),Y(setTimeout(function(){var n={currentPage:0,pageSize:re.pageSize,offset:0,role_id:"".concat(t.role_id),order:re.order?re.order:"group_id ASC",where:{},query:re.query};e.map(function(e){return"group_id"===e.columnName&&""!==e.value?n.where.group_id=parseInt(e.value):"name"===e.columnName?n.where.name={like:"".concat(e.value,".*"),options:"i"}:"user_count"===e.columnName&&""!==e.value?n.where.user_count=parseInt(e.value):"status"===e.columnName&&"all"!==e.value?n.where.status=e.value:""}),console.log(n),qe(n)},3e3))},onPageChange:function(e){var n={pageSize:re.pageSize,currentPage:e,role_id:"".concat(t.role_id),order:re.order?re.order:"group_id ASC",offset:re.pageSize*e,where:re.where,query:re.query};qe(n)},onSetPageSize:function(e){var n={pageSize:e,offset:re.offset,role_id:"".concat(t.role_id),order:re.order?re.order:"group_id ASC",where:re.where,query:re.query};re.currentPage>Math.ceil(re.totalCount/e)-1&&(n.currentPage=Math.ceil(re.totalCount/e)-1,n.offset=(Math.ceil(re.totalCount/e)-1)*e),qe(n)},onSortingChange:function(e){var n=$({},e[0],{direction:e[0].direction.toUpperCase()}),a=Object.values(n).join(" "),r={pageSize:re.pageSize,offset:re.offset,role_id:"".concat(t.role_id),order:[a],where:re.where,query:re.query};qe(r)},onDeleteRow:function(e){Je(e)}})):null,"Users"==i?o.createElement(o.Fragment,null,o.createElement(s.a,{className:n.alignRight},o.createElement(M.a,{onClick:function(){D("block")}}," Add to this role")),o.createElement(f.a,{onSearch:function(e){We(Z.limit,Z.skip,Z.order,Z.currentPage,Z.filter,e)},onChange:function(e){We(Z.limit,Z.skip,Z.order,Z.currentPage,Z.filter,e)},placeholder:"Search a user account"}),o.createElement(p.a,{rows:q||[],columns:Be,columnExtensions:[{columnName:"action_delete",width:75,wordWrapEnabled:!0,align:"center"}],message:"There are no user accounts to show yet.",sortingStateColumnExtensions:[{columnName:"action_delete",sortingEnabled:!1}],onDeleteRow:function(e){Ie(e),Pe(!0),console.log(e,"rowdeleted")},currentPage:Z.currentPage,pageSize:Z.limit,totalCount:Z.count,defaultFilters:Z.filter,onFilterChange:function(e){We(Z.limit,0,Z.order,0,e)},onSortingChange:function(e){We(Z.limit,Z.skip,e,Z.currentPage,Z.filter)},onSetPageSize:function(e){We(e,Z.skip,Z.order,Z.currentPage,Z.filter)},onPageChange:function(e){var t=e*Z.limit;We(Z.limit,t,Z.order,e,Z.filter)}})):null)),o.createElement(d.SideModalBlock,{handleClose:function(){x("none")},showBlock:"Groups"==i?_:"none",title:"Add to this Role"},o.createElement(X,{onClose:function(){x("none")},onSave:function(e){!function(e){T(!0);var n={body:e},a=[];re&&null!==re.length&&a.push.apply(a,Object(k.a)(re.rows)),n.body&&n.body.length>0&&n.body.map(function(e){var n={_id:e.id,group_id:e.group_id,name:e.name,description:e.description,user_account:e.user_count,effectivity_date:e.effectivity_date,date_updated:e.date_updated,is_processmaker:e.is_processmaker,pmaker_uid:e.pmaker_uid,amount_limit:e.amount_limit,user_count:e.user_count,status:e.status,department:e.department},r=e.roles;if(r&&r.length>0){var o=!0;r.map(function(e){e._id===t._id&&(o=!1)}),!0===o&&r.push(t)}else r.push(t);var l=e.expiry_date,i=e.rank,c=e.reports_to,s=e.meta_data;void 0!==l&&(n.expiry_date=l),void 0!==i&&(n.rank=i),void 0!==c&&(n.reports_to=c),void 0!==s&&(n.meta_data=s),n.roles=r,a.push(n)}),console.log(a),Object(B.a)(t.role_id,a,"").then(function(e){T(!1),e.error?se($({},ce,{open:!0,title:"Add User Group Failed!",message:"Something went wrong. New user wasn\u2019t added.",method:He})):se($({},ce,{open:!0,title:"User group added!",message:"New user group have been successfully added.",method:He}))}).catch(function(e){T(!1),se($({},ce,{open:!0,title:"Add User Group Failed!",message:e.message,method:He})),console.log(e)}),console.log(JSON.stringify(a))}(e)}})),o.createElement(d.SideModalBlock,{handleClose:function(){D("none")},showBlock:"Users"==i?w:"none",title:"Add to this Role"},o.createElement(H,{apiCallFields:ee,roleId:t.role_id,refreshUsersWithRole:xe,selectedUsers:be,setSelectedUsers:function(e){return he(Object(k.a)(e))},usersWithRole:ye,setUsersWithRole:function(e){return Oe(Object(k.a)(e))},onClose:function(){D("none")},onSave:function(e){if(Array.isArray(e)){var n=e.filter(function(e){return!(e&&e.roles&&e.roles.some(function(e){return e.role_id===t.role_id}))});console.log("ATTACH DATA",n),Ye(n)}}})),o.createElement(g.a,{isModalOpen:ce.open,onClose:ce.method,message:ce.message,title:ce.title,buttons:o.createElement(s.a,{container:!0,justify:"center",alignItems:"center"},o.createElement(s.a,{item:!0},o.createElement(u.a,{onClick:ce.method,className:n.button,variant:"contained",color:"primary"},"Okay")))}),o.createElement(g.a,{isModalOpen:de.open,onClose:Ke,message:de.message,title:de.title,buttons:o.createElement(s.a,{container:!0,justify:"center",alignItems:"center"},o.createElement(s.a,{item:!0,xs:6},o.createElement(u.a,{onClick:Ke,className:n.button,variant:"outlined",color:"secondary"},"Cancel")),o.createElement(s.a,{item:!0,xs:6},o.createElement(u.a,{onClick:de.method,className:n.button,variant:"contained",color:"primary"},"Remove")))}),o.createElement(g.a,{isModalOpen:we,onClose:function(){Pe(!1)},message:"Remove ".concat(De&&De.full_name?De.full_name:"user"," from this role?"),title:"Remove from Role",buttons:o.createElement(s.a,{container:!0,justify:"center",alignItems:"center"},o.createElement(s.a,{item:!0,xs:6},o.createElement(u.a,{onClick:function(){Pe(!1)},className:n.button,variant:"outlined",color:"secondary"},"Cancel")),o.createElement(s.a,{item:!0,xs:6},o.createElement(u.a,{className:n.button,variant:"contained",color:"primary",onClick:function(){return Ge([De])}},"Remove")))}),o.createElement(g.a,{isModalOpen:ze,onClose:function(){return Te(!1)},message:"New user account/s have been successfully added.",title:"User account added!",buttons:o.createElement(s.a,{container:!0,justify:"center",alignItems:"center"},o.createElement(s.a,{item:!0,xs:6},o.createElement(u.a,{className:n.button,variant:"contained",color:"primary",onClick:function(){return Te(!1)}},"Okay")))}))},ne=n(320),ae=n(318),re=n(155);n.d(t,"RolesPage",function(){return le}),n.d(t,"mapStateToProps",function(){return ie}),n.d(t,"mapDispatchToProps",function(){return ce});var oe=Object(m.a)(function(e){return{mainContainer:{padding:"32px 24px 25px"},main:{backgroundColor:"#F5F7FB",padding:"32px 24px",position:"relative"},headMain:{},gridContainer:{padding:e.spacing(1),paddingBottom:"75px"},gridContainerNoPadding:{padding:e.spacing(1)},sectionTitle:{fontSize:24,fontWeight:700,color:"#272e4c"},subSectionTitle:{fontSize:14,fontWeight:400,color:"#272e4c"},editBtn:{width:"135px",fontSize:"14px",color:"#fff"},alignRight:{textAlign:"right"},sideBarContainer:{borderRight:"1px solid #ccc",paddingRight:"25px"},contentContainer:{paddingLeft:"25px"},sideBarLists:{padding:0,margin:0,listStyle:"none"},sideBarLink:{color:"#272e4c",margin:"0 0 10px",display:"block"},fieldGroupTitle:{fontSize:13,fontWeight:700,color:"#272e4c"},listItemTextRoot:{flex:"none"},listItemTextPrimarySelected:{fontSize:14,fontWeight:700,color:"rgba(39, 46, 76, 1)",cursor:"pointer"},listItemTextPrimaryNotSelected:{fontSize:14,fontWeight:700,color:"rgba(39, 46, 76, 0.3)",cursor:"pointer"},dropzone:{width:"460px",height:"88px",marginTop:"10px",marginBottom:"20px",border:"2px dashed rgba(30, 32, 113, 0.3)",borderRadius:"5px",backgroundColor:"#e6e8ee",color:"#7b8094",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},inputLabel:{color:"#272e4c",fontSize:"12px",marginBottom:"5px"},keyboardDatePicker:{marginTop:"10px",marginBottom:"20px",width:"212px"},checkbox:{"&.Mui-checked":{color:"#1e2071"}},radio:{"&.Mui-checked":{color:"#1e2071"}},appBar:Object(r.a)({top:"auto",bottom:0,border:"1px solid #707070",backgroundColor:"rgba(54, 54, 54, 0.64)"},e.breakpoints.up("sm"),{width:"calc(100% - 72px)"}),grow:{flexGrow:1},button:{margin:"0 10px",minHeight:"42px",minWidth:"150px",fontSize:14},buttonTitle:{fontWeight:700,fontSize:13},buttonSubTitle:{fontWeight:400,fontSize:7},menuList:{display:"inline-block",padding:"10px 45px 10px 0"},menuLink:{color:"#929292",display:"block",fontSize:"1.10em","&:hover":{color:"#3ab77d"}},LinkActive:{color:"#3ab77d",fontWeight:"bold",textDecoration:"underline"}}}),le=function(e){var t=oe(),n=Object(o.useState)(!0),r=Object(a.a)(n,2),l=r[0],i=r[1],c=Object(o.useState)(!1),m=Object(a.a)(c,2),p=m[0],f=m[1],b=Object(o.useState)(!1),E=Object(a.a)(b,2),v=E[0],y=E[1],O=Object(o.useState)("Policies"),S=Object(a.a)(O,2),_=S[0],x=S[1],C=Object(o.useState)(0),k=Object(a.a)(C,2),w=k[0],P=k[1],N=Object(o.useState)(!1),M=Object(a.a)(N,2),D=M[0],I=M[1],R=Object(o.useState)(!1),A=Object(a.a)(R,2),z=A[0],T=A[1],U=Object(o.useState)(!1),F=Object(a.a)(U,2),L=F[0],Y=F[1],G=Object(o.useState)("view"),W=Object(a.a)(G,2),q=W[0],V=W[1],H=Object(o.useState)(!1),J=Object(a.a)(H,2),K=J[0],X=J[1],Q=Object(o.useState)([]),Z=Object(a.a)(Q,2),$=Z[0],ee=Z[1],le=Object(o.useState)("User Management"),ie=Object(a.a)(le,2),ce=ie[0],se=ie[1],ue=Object(o.useState)([]),me=Object(a.a)(ue,2),de=me[0],pe=me[1],fe=Object(o.useState)([]),ge=Object(a.a)(fe,2),be=ge[0],he=ge[1],Ee=Object(o.useState)(0),ve=Object(a.a)(Ee,1)[0],ye=Object(o.useState)(""),Oe=Object(a.a)(ye,2),Se=Oe[0],_e=Oe[1],xe=Object(o.useState)({}),Ce=Object(a.a)(xe,2),je=Ce[0],ke=Ce[1],we=Object(o.useState)(!1),Pe=Object(a.a)(we,2),Ne=Pe[0],Me=Pe[1],De=Object(o.useState)(""),Ie=Object(a.a)(De,2),Re=Ie[0],Ae=Ie[1],ze=Object(o.useState)({filter:[],order:"",limit:40,skip:0,count:0,currentPage:0}),Te=Object(a.a)(ze,2),Ue=Te[0],Fe=Te[1],Le=Object(o.useState)({set:!1,data:[]}),Be=Object(a.a)(Le,2),Ye=Be[0],Ge=Be[1],We=Object(o.useState)(0),qe=Object(a.a)(We,2),Ve=qe[0],He=qe[1],Je=Object(o.useState)(!1),Ke=Object(a.a)(Je,2),Xe=Ke[0],Qe=Ke[1],Ze=[{name:"Policies"},{name:"Groups And Users"}];o.useEffect(function(){$e()},[]);var $e=function(){V("view"),y(!0),Object(B.j)(e.match.params.id).then(function(e){var t=[{name:"ROLES",link:"/system-admin/users/roles"}];t.push({name:e.name}),he(t),ee(e),Ae(e.module),tt(Ue.filter,Ue.order,Ue.limit,Ue.skip,Ue.currentPage,e,"view","",e.module),console.log(e)}).catch(function(e){y(!1),console.log(e),alert(e)})},et=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},tt=function(e,t,n,a,r,o,l,i,c){console.log(o),Ve&&clearTimeout(Ve);var s={},u=t?"".concat(t[0].columnName," ").concat(t[0].direction):"";e.length>0?(e.map(function(e){s[e.columnName]={like:"^".concat(e.value,".*"),options:"i"}}),s.module={like:"^".concat(Re,".*"),options:"i"}):s={module:{like:"^".concat(c||Re,".*"),options:"i"}};var m={limit:n,skip:a,order:u,where:s};He(setTimeout(function(){y(!0),Object(B.i)(m,i||"").then(function(l){var i=l.body;o=et(o)?et(je)?$:je:o,Fe({currentPage:r,filter:e,order:t,limit:n,skip:a,count:l.count}),i.length>0&&i.map(function(e){o.rbac&&o.rbac.length>0&&o.rbac.map(function(t){e._id===t._id&&(e.checked=!0)})}),!1===Ye.set&&Ge({set:!0,data:i}),console.log(Ye),pe(i),y(!1)}).catch(function(e){console.log(e),y(!1),alert(e)})},e.length>0||i?2e3:0))},nt=function(e){x(e),i(!0),"Policies"===e&&$e(),Ze.map(function(t,n){t.name===e&&("Groups And Users"===e&&X(!0),P(n))})},at=function(){T(!1),I(!1)};return o.createElement(o.Fragment,null,Ne&&o.createElement(re.a,{to:{pathname:"/system-admin/users"}}),o.createElement(ne.a,{headingTitle:be[1]?be[1].name:"",breadCrumbsArray:be,buttonFunc:function(){i(!1),V("edit"),tt(Ue.filter,Ue.order,Ue.limit,Ue.skip,Ue.currentPage,$,"edit")},buttonName:"Edit Role",layoutType:"layout_1",enableButton:"view"===q&&"Policies"===_&&!1===$.is_processmaker}),o.createElement("div",{className:t.main},v?o.createElement(d.LoadingIndicator,null):null,o.createElement(s.a,{container:!0,xs:12},o.createElement(s.a,{item:!0,xs:3,className:t.sideBarContainer},o.createElement(ae.a,{items:Ze,activeItems:nt,setActiveItem:w})),o.createElement(s.a,{item:!0,xs:9,className:t.contentContainer},"Policies"==_&&o.createElement(j,{rbacList:de,loadRbacList:Ye.data,moduleName:ce,roleId:Se,rows:$,mode:q,classes:t,viewOnly:l,isEdited:p,rbacState:Ue,onSearch:function(e){tt(Ue.filter,Ue.order,Ue.limit,0,Ue.page,je||$,q,e)},onNavigateSideMenu:function(e){nt(e)},onChangeModuleName:function(e){!function(e){_e(function(e,t){var n="";switch(e){case"User Management":n="UM".concat(t);break;case"Membership":n="MS".concat(t);break;case"Underwriting":n="U".concat(t);break;case"Customer Care":n="C".concat(t);break;case"Claims":n="CL".concat(t);break;case"Franchising":n="FR".concat(t);break;default:n="UM".concat(t)}return n}(e,ve))}(e)},onUpdateChange:function(e){ke(e),f(!0),console.log(e)},onPageChange:function(e){var t=e*Ue.limit;tt(Ue.filter,Ue.order,Ue.limit,t,e,je||$,q)},onPageSizeChange:function(e){tt(Ue.filter,Ue.order,e,Ue.skip,Ue.currentPage,je||$,q)},onFilterChange:function(e){tt(e,Ue.order,Ue.limit,0,0,je||$,q)},onSortChange:function(e){tt(Ue.filter,e,Ue.limit,Ue.skip,Ue.currentPage,je||$,q)}}),"Groups And Users"==_&&o.createElement(te,{rows:$,classes:t,viewOnly:l,openSideModalBlock:K})))),o.createElement(g.a,{isModalOpen:z,onClose:at,message:Xe?o.createElement(o.Fragment,null,o.createElement("span",null,"Save all changes made?"),o.createElement("br",null),o.createElement("br",null),o.createElement("strong",null,"NOTE:"),o.createElement("br",null),o.createElement("span",null,"You changed the expiry date of this role. This will deactivate the role.")):"Save all changes made?",title:"Confirmation",buttons:o.createElement(s.a,{container:!0,justify:"center",alignItems:"center"},o.createElement(s.a,{item:!0,xs:6},o.createElement(u.a,{onClick:function(){T(!1)},className:t.button,variant:"outlined",color:"secondary"},"Cancel")),o.createElement(s.a,{item:!0,xs:6},o.createElement(u.a,{className:t.button,variant:"contained",color:"primary",onClick:function(){return function(){var e=je;e.expiry_date||null!==e.expiry_date||delete e.expiry_date,e.rbac&&e.rbac.map(function(e){e.checked&&delete e.checked}),y(!0),Object(B.m)(e._id,e).then(function(e){console.log(e),V("view"),tt(Ue.filter,Ue.order,Ue.limit,Ue.skip,Ue.currentPage,e,"view"),ee(e),Y(!0),T(!1),he([{name:"ROLES",link:"/system-admin/users/roles"},{name:e.name}]),se(e.module),y(!1),f(!1)}).catch(function(e){y(!1),alert(e)})}()}},"Save")))}),o.createElement(g.a,{isModalOpen:D,onClose:at,message:"Exit and remove all changes made?",title:"Confirmation",buttons:o.createElement(s.a,{container:!0,justify:"center",alignItems:"center"},o.createElement(s.a,{item:!0,xs:6},o.createElement(u.a,{onClick:function(){I(!1)},className:t.button,variant:"outlined",color:"secondary"},"Cancel")),o.createElement(s.a,{item:!0,xs:6},o.createElement(u.a,{className:t.button,variant:"contained",color:"primary",onClick:function(){$e(),tt(Ue.filter,Ue.order,Ue.limit,Ue.skip,Ue.currentPage,$,"view"),I(!1),Me(!0)}},"Continue")))}),o.createElement(g.a,{isModalOpen:L,onClose:function(){Y(!1)},message:"Changes has been saved.",title:"Save Success",buttons:o.createElement(s.a,{container:!0,justify:"center",alignItems:"center"},o.createElement(s.a,{item:!0,xs:6},o.createElement(u.a,{className:t.button,variant:"contained",color:"primary",onClick:function(){Y(!1)}},"Okay")))}),"edit"===q&&"Policies"===_&&""!==je&&!0===p?o.createElement(d.FloatingFooter,null,o.createElement(s.a,{container:!0,spacing:1,justify:"flex-end",style:{textAlign:"right"}},o.createElement(s.a,{item:!0},o.createElement(u.a,{className:t.button,variant:"contained",color:"primary",style:{backgroundColor:"#3C394A"},onClick:function(){return I(!0)}},"Cancel")),o.createElement(s.a,{item:!0},o.createElement(u.a,{className:t.button,variant:"contained",color:"primary",onClick:function(){var e=h()().startOf("day"),t=je&&je.expiry_date?h()(je.expiry_date).startOf("day"):void 0;e.isSameOrAfter(t)?Qe(!0):Qe(!1),T(!0)}},"Save Changes")))):"")},ie=function(e){return e.roles},ce=function(e){return{Map:Object(l.bindActionCreators)(c,e)}}}}]);
//# sourceMappingURL=4.37653ce0.chunk.js.map
(window["webpackJsonpsystem-admin"]=window["webpackJsonpsystem-admin"]||[]).push([[8],{802:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(0),o=a(748),i=a(42),l=Object(i.a)({root:{position:"fixed",width:"100%",height:"100%",zIndex:9999,right:"0px",bottom:"0px",top:"0px",left:"0px",textAlign:"center",backgroundColor:"rgba(0, 0, 0, 0.5)"},container:{height:"100%",outline:0,alignItems:"center",justifyContent:"center",display:"flex",flexDirection:"column"}}),s=function(){var e=l();return n.createElement("div",{className:e.root},n.createElement("div",{className:e.container},n.createElement(o.a,{size:150})))};s.defaultProps={}},816:function(e,t,a){"use strict";a.r(t);var n=a(140),o=a(14),i=a(0),l=a.n(i),s=a(62),r={ResetReducer:"Lookup_ResetReducer",SetReducer:"Lookup_SetReducer"},c=function(e){return{payload:e,type:r.SetReducer}},d=a(160),u=a(42),m=a(26),f=a.n(m),g=a(53),p=a(74),h=a(84),_=a(87),v=a(85),y=a(316),b=a(86),S=a(208),C=a(124),E=a(127),k=a(176),w=a(16),x=a(30),T=a(29),O=a(78),D=a(796),M=a(128),A=a(313),F=a(258),P=a(256),j=a(794),B=a(158),I=a(750),L=a(12),N=a(797),z=a(747),U=a(312),R=a(800),W=a(743),H=a(15),Y=a(801),V=a(438),G=a(39),q=a.n(G),J=!1,K=!1,$="",Q=!1,X={},Z=Object(A.a)({select:{backgroundColor:"transparent"}}),ee=Object(A.a)({root:{"& div.MuiInputBase-root":{backgroundColor:"transparent"}}}),te=Object(A.a)({root:{"&.Mui-checked":{color:"#3AB77D"}}}),ae=function(e){var t=e.id,a=e.value,n=e.items,o=Z();return i.createElement(F.a,{id:t,classes:o,value:a,style:{width:"100%",backgroundColor:"transparent"},renderValue:function(e){if(null!==e){var t=n.find(function(t){return t.value===e});return t?t.name:"\u2014"}return"\u2014"}},n.map(function(e){return i.createElement(P.a,{key:e.value,value:e.value},e.name)}))},ne=function(e){var t=e.items,a=Object(S.a)(e,["items"]);return i.createElement(F.a,Object.assign({variant:"outlined",style:{width:"100%"},renderValue:function(e){if(null!=e){var a=t.find(function(t){return t.value===e});return a?a.label:"\u2014\u2014"}return"\u2014\u2014"}},a),t.map(function(e,t){return i.createElement(P.a,{key:t,value:e.value},e.label)}))},oe=function(e){var t=e.filter,a=e.onFilter,n=e.filteringEnabled,o=e.classes,l=e.column;return n?l.datePicker?i.createElement(j.a,{style:{padding:"0px 10px 8px 10px"},classes:o},i.createElement(O.a,{utils:M.a},i.createElement(D.a,{variant:"dialog",format:"MMMM D, YYYY",inputVariant:"outlined",value:t?t.value:"",invalidDateMessage:"",onChange:function(e){console.log(e),a(e?{value:e.toISOString()}:null)}}))):l.staticDropdown?i.createElement(j.a,{style:{paddingTop:"5px"}},i.createElement(ne,{onChange:function(e){return a(e.target.value?{value:e.target.value}:null)},name:"status",items:l.staticDropdownOptions?l.staticDropdownOptions:[],id:"status",value:t?t.value:""})):i.createElement(j.a,{style:{padding:"0px 10px 8px 10px"},classes:o},i.createElement(B.a,{classes:o,style:{width:"100%"},value:t?t.value:"",labelWidth:0,onChange:function(e){return a(e.target.value?{value:e.target.value}:null)},placeholder:""})):l.actionColumn?i.createElement(j.a,{style:{padding:"0px 0px 0px 0px"},classes:o,align:"center"},i.createElement(I.a,{color:"primary",onChange:function(e){a(void 0!==e.target.checked?{action:e.target.checked}:null)}})):l.resetColumn?i.createElement(j.a,{align:"center"},i.createElement(L.a,{container:!0,justify:"center",style:{paddingLeft:"22px"}},i.createElement(E.a,{onClick:function(){a({reset_action:!0})}},i.createElement(L.a,{container:!0,justify:"center",alignItems:"center"},i.createElement(L.a,{item:!0,xs:12,alignContent:"center"},i.createElement(x.a,{icon:T.o,style:{fontSize:"20px"}})),i.createElement(L.a,{item:!0,xs:12,alignContent:"center"},i.createElement("span",{style:{fontSize:"10px"}},"Reset All")))))):i.createElement(j.a,{style:{padding:"0px 10px 8px 10px"},classes:o})},ie=function(e){var t=e.style,a=e.selected,n=e.onToggle,o=e.classes,l=Object(S.a)(e,["style","selected","onToggle","classes"]);return i.createElement(j.a,Object.assign({padding:"checkbox",style:t,classes:o},l),i.createElement(N.a,{classes:o,checked:a,onClick:function(e){e.stopPropagation(),n()}}))},le=function(e){var t=e.style,a=e.selected,n=e.onToggle,o=e.classes,l=Object(S.a)(e,["style","selected","onToggle","classes"]);return i.createElement(j.a,Object.assign({padding:"checkbox",style:t,classes:o},l),i.createElement(I.a,{icon:i.createElement(x.a,{icon:T.t}),checkedIcon:i.createElement(x.a,{icon:T.d}),classes:o,checked:a,onClick:function(e){e.stopPropagation(),n()}}))},se=function(e){var t=e.value,a=e.onValueChange;return i.createElement(B.a,{value:t||"",labelWidth:0,onChange:function(e){return a(e.target.value?e.target.value:null)},placeholder:"Search a benefit or benefit category",fullWidth:!0,startAdornment:i.createElement(z.a,{position:"start"},i.createElement(x.a,{icon:T.p}))})},re=function(e){var t=e.children;return i.createElement(U.a,{disableGutters:!0,children:t})},ce=function(e){return"asc"===e.direction?i.createElement(x.a,{style:{marginLeft:"10px"},icon:T.s}):i.createElement(x.a,{style:{marginLeft:"10px"},icon:T.r})},de=function(e){var t=e.column,a=e.onSort,n=e.children,o=e.direction;return void 0!==t.sortingEnabled&&null!==t.sortingEnabled&&!1===t.sortingEnabled?t.actionColumn||t.resetColumn?i.createElement(L.a,{container:!0,justify:"center"},t.title):i.createElement("span",null,t.title):i.createElement(R.a,{hideSortIcon:!0,onClick:a},n,o?i.createElement(ce,{direction:o}):i.createElement(x.a,{style:{marginLeft:"10px"},icon:T.q}))},ue=function(e){var t=e.value;return""===t||void 0===t||null===t?i.createElement(x.a,{style:{color:"#FD5451",fontSize:"16px"},icon:T.f}):t},me=function(e){return i.createElement(w.c,Object.assign({formatterComponent:ue},e))},fe=function(e){var t=e.row,a=e.value;return!0!==t.required||""!==a&&void 0!==a&&null!==a?!1!==t.required||""!==a&&void 0!==a&&null!==a?a:"N/A":i.createElement(x.a,{style:{color:"#FD5451",fontSize:"16px"},icon:T.f})},ge=function(e){return i.createElement(w.c,Object.assign({formatterComponent:fe},e))},pe=function(e){var t=e.column,a=e.row,n=e.value,o=te();return i.createElement(L.a,{container:!0,justify:"center"},i.createElement(W.a,{control:i.createElement(I.a,{checked:!(!a||!a.action_chosen),value:n,style:{padding:"0px 0px 0px 26px"},className:o.root,color:"primary",onChange:function(e){a.action_chosen=e.target.checked,Q=!0,X={value:e.target.checked,name:t.name,row:a}}}),label:""}))},he=function(e){return i.createElement(w.c,Object.assign({formatterComponent:pe},e))},_e=function(e){var t=e.column,a=e.row,n=t.name+"_"+a.id;return i.createElement("div",{id:n,onClick:function(e){console.log("e>",e)}},i.createElement(H.a,{color:"textPrimary",style:{paddingTop:"5px"}},i.createElement("span",null,i.createElement("span",{style:{paddingRight:"10px",fontSize:"15px"}},i.createElement(x.a,{icon:T.h,style:{color:"#0D5E40"}})),i.createElement("span",{style:{textDecoration:"underline",color:"#0D5E40"}},"Upload File"))))},ve=function(e){return i.createElement(w.c,Object.assign({formatterComponent:_e},e))},ye=function(e){var t=e.row,a=function(e){t.action_chosen=e.target.value};return i.createElement("div",null,i.createElement(Y.a,{"aria-label":"position",name:"position",onChange:function(e){e.stopPropagation(),K=!0,$=e.target.value},row:!0},[{value:"approve",label:"Approve"},{value:"disapprove",label:"Disapprove"}].map(function(e,n){return i.createElement(W.a,{checked:t&&t.action_chosen&&t.action_chosen===e.value,key:n,value:e.value,control:i.createElement(N.a,{style:{padding:"0px 2px 0px 2px",margin:0,fontSize:"10px"},onClick:a,color:"primary",size:"small"}),label:i.createElement("span",{style:{fontSize:"12px",fontWeight:600}},e.label),labelPlacement:"end"})})))},be=function(e){return i.createElement(w.c,Object.assign({formatterComponent:ye},e))},Se=function(e){var t=e.row,a=function(e){t.action_chosen=e.target.value};return i.createElement("div",null,i.createElement(Y.a,{"aria-label":"position",name:"position",key:"virtual-group-".concat(t._id,"-").concat(t._id),value:t&&t.action_chosen?t.action_chosen:void 0,onChange:function(e){e.stopPropagation(),K=!0,$=e.target.value},row:!0},[{value:"approve",label:"Approve"},{value:"disapprove",label:"Disapprove"}].map(function(e,n){return i.createElement(W.a,{key:"virtual-label-".concat(n,"-").concat(e,"-").concat(t._id),value:e.value,control:i.createElement(N.a,{key:"virtual-radio-".concat(n,"-").concat(e,"-").concat(t._id),id:t._id,onClick:a,color:"primary",size:"small"}),label:i.createElement("span",{key:"virtual-text-".concat(n,"-").concat(e),style:{fontSize:"14px",fontWeight:600}},e.label),labelPlacement:"end"})})))},Ce=function(e){return i.createElement(w.c,Object.assign({formatterComponent:Se},e))},Ee=function(e){var t=e.row;return i.createElement(L.a,{container:!0,justify:"center",alignItems:"center"},i.createElement(E.a,{onClick:function(){t&&(J=!0,t.action_chosen="")}},i.createElement(x.a,{icon:T.o,style:{fontSize:"20px"}})))},ke=function(e){return i.createElement(w.c,Object.assign({formatterComponent:Ee},e))},we=function(e){var t=e.value;return i.createElement("div",null,i.createElement(Y.a,{"aria-label":"position",name:"position",value:t,onChange:function(e){e.stopPropagation(),K=!0,$=e.target.value},row:!0},[{value:"approve",label:"Approve"},{value:"disapprove",label:"Disapprove"},{value:"for confirmation",label:"For Confirmation"}].map(function(e,t){return i.createElement(W.a,{key:t,value:e.value,control:i.createElement(N.a,{color:"primary"}),label:e.label,labelPlacement:"end",onClick:function(e){K=!0,console.log("radio button label onclick",e)},onChange:function(e){K=!0,console.log("radio button label onchange",e)}})})))},xe=function(e){return i.createElement(w.c,Object.assign({formatterComponent:we},e))},Te=function(e){var t=e.value;return console.log("Radio group value: ",t),i.createElement("div",null,i.createElement(Y.a,{"aria-label":"position",name:"position",value:t,onChange:function(e){e.stopPropagation(),K=!0,$=e.target.value},row:!0},[{value:"match",label:"Match"},{value:"not",label:"Not Match"},{value:"confirmation",label:"For Confirmation"}].map(function(e,t){return i.createElement(W.a,{key:t,value:e.value,control:i.createElement(N.a,{color:"primary"}),label:e.label,labelPlacement:"end",onClick:function(e){K=!0,console.log("radio button label onclick",e)},onChange:function(e){K=!0,console.log("radio button label onchange",e)}})})))},Oe=function(e){return i.createElement(w.c,Object.assign({formatterComponent:Te},e))},De=function(e){var t=e.value;return i.createElement(ae,{items:[{name:"",value:""},{name:"Married",value:"married"},{name:"Single",value:"single"},{name:"Widowed",value:"widowed"},{name:"Annulled",value:"annulled"}],value:t})},Me=function(e){return i.createElement(w.c,Object.assign({formatterComponent:De},e))},Ae=function(e){var t=e.value;return i.createElement(ae,{items:[{name:"First Name",value:"first_name"},{name:"Middle Name",value:"middle_name"},{name:"Last Name",value:"last_name"},{name:"Birthday",value:"birthday"},{name:"Civil Status",value:"civil_status"},{name:"Gender",value:"gender"},{name:"Plan Type",value:"plan_type"},{name:"Type",value:"type"}],value:t})},Fe=function(e){return i.createElement(w.c,Object.assign({formatterComponent:Ae},e))},Pe=function(e){var t=e.value;return i.createElement(ae,{items:[{name:"Civil Status",value:"civil_status"},{name:"Gender",value:"gender"}],value:t})},je=function(e){return i.createElement(w.c,Object.assign({formatterComponent:Pe},e))},Be=function(e){var t=e.value,a=ee();return i.createElement(V.a,{value:t,type:"number",classes:a})},Ie=function(e){return i.createElement(w.c,Object.assign({formatterComponent:Be},e))},Le=function(e){var t=e.value,a=ee();return i.createElement(V.a,{value:t,classes:a})},Ne=function(e){return i.createElement(w.c,Object.assign({formatterComponent:Le},e))},ze=function(e){var t=e.value,a=t;if(a)try{a=q()(t).format("MMM DD, YYYY")}catch(n){a=t}else a="";return a},Ue=function(e){return i.createElement(w.c,Object.assign({formatterComponent:ze},e))},Re=function(e){var t=e.value,a=t;if(a)try{a=q()(t).format("hh:mm:ss A")}catch(n){a=t}else a="";return a},We=function(e){return i.createElement(w.c,Object.assign({formatterComponent:Re},e))},He=function(e){var t=e.disableIntegratedFiltering,a=e.columns,l=e.formattedColumns,s=e.singleSelect,r=e.disablePaging,c=e.disableSearch,d=e.disableSelect,u=e.disableSort,m=e.disableFilter,f=e.toolbarType,g=e.columnExtensions,p=e.columnBands,h=e.id,_=e.showSelectionColumn,v=e.query,y=e.totalCount,b=e.currentPage,S=e.limit,E=e.disableIntegratedSorting,x=Object(i.useState)([]),T=Object(o.a)(x,2),O=T[0],D=T[1],M=Object(i.useState)(e.pageSizes?e.pageSizes:[10,25,50,100,0]),A=Object(o.a)(M,1)[0],F=Object(i.useState)(e.defaultSort?e.defaultSort:[]),P=Object(o.a)(F,2),j=P[0],B=P[1],I=Object(i.useState)(e.rows),L=Object(o.a)(I,2),N=L[0],z=L[1];Object(i.useEffect)(function(){z(e.rows)},[e.rows]),Object(i.useEffect)(function(){B(e.defaultSort?e.defaultSort:[])},[e.defaultSort]);var U=[];void 0!==l&&Object.keys(l).length>0&&(void 0!==l.number&&U.push(i.createElement(Ie,{for:l.number})),void 0!==l.text&&U.push(i.createElement(Ne,{for:l.text})),void 0!==l.system_name&&U.push(i.createElement(Fe,{for:l.system_name})),void 0!==l.data_name&&U.push(i.createElement(je,{for:l.data_name})),void 0!==l.value_name&&U.push(i.createElement(Me,{for:l.value_name})),void 0!==l.required_columns&&U.push(i.createElement(me,{for:l.required_columns})),void 0!==l.radio&&U.push(i.createElement(Oe,{for:l.radio})),void 0!==l.incomplete_radio&&U.push(i.createElement(xe,{for:l.incomplete_radio})),void 0!==l.approve_disapprove_action&&U.push(i.createElement(be,{for:l.approve_disapprove_action})),void 0!==l.approve_disapprove_action_virtual&&U.push(i.createElement(Ce,{for:l.approve_disapprove_action_virtual})),void 0!==l.approve_disapprove_reset&&U.push(i.createElement(ke,{for:l.approve_disapprove_reset})),void 0!==l.required_checkbox&&U.push(i.createElement(he,{for:l.required_checkbox})),void 0!==l.upload_file&&U.push(i.createElement(ve,Object.assign({for:l.upload_file},e))),void 0!==l.required_cell&&U.push(i.createElement(ge,Object.assign({for:l.required_cell},e))),void 0!==l.date&&U.push(i.createElement(Ue,{for:l.date})),void 0!==l.time&&U.push(i.createElement(We,{for:l.time})));var R=re;return i.createElement(k.a,{id:h},e.topBar?e.topBar():null,i.createElement(C.a,{rows:N,columns:a},U,r?null:i.createElement(w.o,{currentPage:b,onCurrentPageChange:function(t){var a=S*t;e.onPageChange(t,a)},pageSize:S,onPageSizeChange:function(t){e.ongPageSizeChange(t)}}),r?null:i.createElement(w.b,{totalCount:y}),!c||v?i.createElement(w.q,{value:v}):null,u?u?null:i.createElement(w.s,{defaultSorting:[]}):i.createElement(w.s,{defaultSorting:[],sorting:j,onSortingChange:function(t){e.updateSorting(t),B(t)}}),u||E?null:i.createElement(w.m,null),d&&_?null:i.createElement(w.r,{selection:O,onSelectionChange:function(t){if(console.log("here click row"),e.onClickRow)K||Q||J?K&&!J?(console.log("radioselected",t),e.onSelectedRadio&&e.onSelectedRadio(t[0],$),z(Object(n.a)(N)),K=!1):J?(e.onSelectedReset&&e.onSelectedReset(t),J=!1):Q&&(console.log(" here !!! >>>",e.onClickCell),e.onClickCell&&e.onClickCell(X),Q=!1,X={}):(console.log("onclickrow"),e.onClickRow(t));else if(s){var a=t.find(function(e){return-1===O.indexOf(e)});console.log(t,O,a),void 0!==a&&D([a])}else D(t)}}),d?null:i.createElement(w.l,null),m?null:i.createElement(w.e,{defaultFilters:[],filters:void 0!==e.defaultFilter?e.defaultFilter:[],columnFilteringEnabled:e.columnFilteringEnabled,columnExtensions:e.filterExtensions,onFiltersChange:e.onFilterChange}),m||t?null:i.createElement(w.i,null),e.isVirtualTable?null:i.createElement(C.d,{columnExtensions:g,messages:{noData:e.message}}),e.isVirtualTable?i.createElement(C.k,{columnExtensions:g,height:300}):null,d||_?_?null:i.createElement(C.i,{selectByRowClick:!0,showSelectionColumn:!1,cellComponent:s?ie:le,headerCellComponent:le}):i.createElement(C.i,{showSelectAll:!s,cellComponent:s?ie:le,headerCellComponent:le}),i.createElement(C.h,{showSortingControls:!u,sortLabelComponent:de}),m?null:i.createElement(C.f,{cellComponent:oe}),p?i.createElement(C.e,{columnBands:p}):null,!c||f?i.createElement(C.j,{rootComponent:R}):null,c?null:i.createElement(C.c,{inputComponent:se}),r?null:i.createElement(C.b,{pageSizes:A})))};He.defaultProps={rows:[],columns:[],columnExtensions:[],filterExtensions:[],columnBands:null,formattedColumns:{},singleSelect:!1,disableSearch:!1,disablePaging:!1,disableSelect:!1,disableFilter:!1,disableSort:!1,toolbarType:null,defaultFilter:[],showSelectionColumn:!1,columnFilteringEnabled:!0,id:"table-1",totalCount:0,message:"No available data",query:"",currentPage:0,limit:0};var Ye=a(71),Ve=a(741),Ge=a(823),qe=a(802),Je=a(318),Ke=a(139),$e=new Ke.a;$e.getAccessToken();var Qe=function(e,t){var a={limit:e,skip:t},n={method:"GET"};return $e.getAccessToken()?$e.call(n,"icd10-codes/search?filter=".concat(JSON.stringify(a)),!0):$e.fetchAccessToken().then(function(){return $e.call(n,"icd10-codes/search?filter=".concat(JSON.stringify(a)),!0)})},Xe=function(e,t,a,n,o,i){var l="";void 0!==i&&""!==i&&(l="&filter[where][main_category][like]=".concat(i));var s="";o&&0!==o.length&&(s="&filter[order]="+o[0].columnName+" "+o[0].direction);var r="";a&&a.forEach(function(e){r=r+"&"+e.columnName+"="+e.value});var c=n?"&search="+n:"",d="icd10-codes/search?filter[limit]=".concat(e,"&filter[skip]=").concat(t)+c+r+s+l;0===e&&(d="icd10-codes/search?filter[skip]=".concat(t)+c+r+s+l);var u={method:"GET"};return $e.getAccessToken()?$e.call(u,d,!0):$e.fetchAccessToken().then(function(){return $e.call(u,d,!0)})},Ze=function(e){var t={method:"POST",body:e};return $e.getAccessToken()?$e.call(t,"icd10-codes/multiple",!0):$e.fetchAccessToken().then(function(){return $e.call(t,"icd10-codes/multiple",!0)})},et=function(e,t){var a={method:"PUT",body:e};return $e.getAccessToken()?$e.call(a,"icd10-codes/edit/".concat(t),!0):$e.fetchAccessToken().then(function(){return $e.call(a,"icd10-codes/edit/".concat(t),!0)})},tt=function(e,t,a,n,o){var i={},l="icd10-synonyms/list",s={};e&&Array.isArray(e)&&e.length>0&&(s.where={},e.forEach(function(e){"status"!==e.columnName?s.where[e.columnName]={like:e.value,options:"i"}:s.where[e.columnName]=e.value})),o&&Array.isArray(o)&&o.length>0&&(s.order="".concat(o[0].columnName," ").concat(o[0].direction)),n&&(s.skip=n),a&&(s.limit=a),t&&(i.search=t),Object.entries(s).length>0&&(i.filter=JSON.stringify(s));for(var r=0,c=0,d=Object.keys(i);c<d.length;c++){var u=d[c];l+=r?"&":"?",l+="".concat(u,"=").concat(i[u]),r+=1}var m={method:"GET"};return $e.getAccessToken()?$e.call(m,l,!0):$e.fetchAccessToken().then(function(){return $e.call(m,l,!0)})},at=function(e,t,a,n,o){var i={limit:a,skip:n,where:e},l="";t&&(l="&search="+t),o&&(i.order=o);var s={method:"GET"};return $e.fetchAccessToken().then(function(){return $e.call(s,"icd10-synonyms/search?filter=".concat(JSON.stringify(i)).concat(l),!0)})},nt=function(e){console.log("payload",e);var t={method:"POST",body:e};return $e.fetchAccessToken().then(function(){return $e.call(t,"icd10-synonyms/create",!0)})},ot=function(e){var t={where:e},a={method:"GET"};return $e.fetchAccessToken().then(function(){return $e.call(a,"icd10-synonyms/list?filter=".concat(JSON.stringify(t),"&tabCount=true"),!0)})},it=function(e){var t={method:"PATCH",body:e};return $e.fetchAccessToken().then(function(){return $e.call(t,"icd10-synonyms/edit",!0)})},lt=a(83),st=a(257),rt=a(178),ct=a(159),dt=a(177),ut=a(6),mt=Object(u.a)(function(e){return{dialog:{},dialogAction:{marginBottom:e.spacing(2)}}}),ft=function(e){var t=mt();return l.a.createElement(st.a,{open:e.isModalOpen,onClose:function(){e.onClose()},"aria-labelledby":"form-dialog-title",maxWidth:"sm",className:t.dialog},l.a.createElement(dt.a,{id:"form-dialog-title"},e.title),l.a.createElement(ct.a,null,l.a.createElement(L.a,{container:!0,spacing:2,justify:"space-between",alignItems:"flex-start"},l.a.createElement(L.a,{item:!0,xs:12},e.message))),l.a.createElement(rt.a,{className:Object(ut.default)(t.dialogAction)},l.a.createElement(L.a,{container:!0,spacing:2,justify:"center",alignItems:"flex-start"},l.a.createElement(L.a,{item:!0,xs:4},l.a.createElement(lt.a,{onClick:function(){e.onClose(!0)},variant:"outlined",color:"default",fullWidth:!0},"Cancel")),l.a.createElement(L.a,{item:!0,xs:4},l.a.createElement(lt.a,{onClick:function(){e.onSubmit(),e.onClose()},variant:"contained",color:"primary",fullWidth:!0},"submit"===e.submitType?"Submit":"Confirm")))))};ft.defaultProps={isModalOpen:!1};var gt=a(27),pt=function(e){var t="Awaiting Activation",a=new Date,n=e.effectivity_date?new Date(new Date(e.effectivity_date).setHours(0,0,0,0)):void 0,o=e.expiry_date?new Date(new Date(e.expiry_date).setHours(0,0,0,0)):void 0;console.log("DATES : ",a,n,o),o&&n&&console.log("BOOLS",n<=a,o<=a),n&&q()(n).isValid()&&n<=a&&(t="Active"),o&&q()(o).isValid()&&o<=a&&(t="Deactivated");var i=!!e.gender||void 0,l=e.gender?e.gender:void 0;return{_id:e._id,category_code:e.category_code,diagnosis_code:e.diagnosis_code?e.diagnosis_code.toString():void 0,full_code:e.full_code,abbreviated_description:e.abbreviated_description,full_description:e.full_description,category_title:e.category_title,main_category:e.main_category,gender_limited:i,gender:l,effectivity_date:e.effectivity_date,expiry_date:e.expiry_date,status:t,date_updated:e.date_updated}},ht=function(e){var t="Awaiting Activation",a=new Date,n=e.effectivity_date?new Date(new Date(e.effectivity_date).setHours(0,0,0,0)):void 0,o=e.expiry_date?new Date(new Date(e.expiry_date).setHours(0,0,0,0)):void 0;console.log("DATES : ",a,n,o),o&&n&&console.log("BOOLS",n<=a,o<=a),n&&q()(n).isValid()&&n<=a&&(t="Active"),o&&q()(o).isValid()&&o<=a&&(t="Deactivated");var i=!!e.gender||void 0,l=e.gender?e.gender:void 0;return{_id:e._id,code:e.code,description:e.description,category:e.category,gender_limited:i,gender:l,effectivity_date:e.effectivity_date,expiry_date:e.expiry_date,status:t,date_updated:e.date_updated}},_t=function(e){return e?{_id:e._id,category_code:e.category_code,diagnosis_code:e.diagnosis_code?e.diagnosis_code.toString():void 0,full_code:e.full_code,abbreviated_description:e.abbreviated_description,full_description:e.full_description,category_title:e.category_title,main_category:e.main_category,effectivity_date:e.effectivity_date,expiry_date:e.expiry_date,status:e.status,gender_limited:Boolean(e.gender_limited),gender:e.gender_limited?e.gender:"",date_updated:e.date_updated}:yt()},vt=function(e){return e?{_id:e._id,code:e.code,description:e.description,category:e.category,effectivity_date:e.effectivity_date,expiry_date:e.expiry_date,status:e.status,gender_limited:Boolean(e.gender_limited),gender:e.gender_limited?e.gender:""}:bt()},yt=function(){return{full_code:"",full_description:"",category_title:"",main_category:"",effectivity_date:"",expiry_date:"",status:"",gender_limited:!1,gender:""}},bt=function(){return{code:"",description:"",category:"",effectivity_date:"",expiry_date:"",status:"",gender_limited:!1,gender:""}},St=function(e){var t=Object.assign({},e);return t.gender=t.gender_limited?t.gender:"",void 0!==t.status&&delete t.status,""===t.expiry_date&&delete t.expiry_date,t},Ct=function(e){var t=Object.assign({},e);return t.gender=t.gender_limited?t.gender:"",void 0!==t.status&&delete t.status,""===t.expiry_date&&delete t.expiry_date,t},Et=function(e){var t=[];return Array.isArray(e)?t=e:t.push(e),t.map(function(e){return""===e.expiry_date&&delete e.expiry_date,void 0!==e.status&&delete e.status,e.gender=e.gender_limited?e.gender:"",e})},kt=function(e){var t=[];return Array.isArray(e)?t=e:t.push(e),t.map(function(e){return""===e.expiry_date&&delete e.expiry_date,void 0!==e.status&&delete e.status,e.gender=e.gender_limited?e.gender:"",e})},wt=function(e,t,a){return{approve:[{full_code:e,synonyms:[t],diagnosis_code:a}]}},xt=function(e){var t=e.filter(function(e){return"approve"===e.action_chosen}),a=[],n=e.filter(function(e){return"approve"===e.action_chosen||"disapprove"===e.action_chosen}).map(function(e){var t="approve"===e.action_chosen?"active":"disapprove"===e.action_chosen?"inactive":"";return delete e.action_chosen,e.status=t,e});return t.forEach(function(e){var t=[];a.some(function(t){return t.full_code===e.full_code})&&(t=a.filter(function(t){return t.full_code===e.full_code})[0].synonyms,a=a.filter(function(t){return t.full_code!==e.full_code}));var n=e.title.toLowerCase();t.includes(n)||t.push(n),a.push({full_code:e.full_code,synonyms:t})}),console.log("PATCH SYNONYMS",n,"ICD APPEND",a),{patch_synonyms:n,icd_append_synonyms:a}},Tt=function(e){var t=e.filter(function(e){return e.action_chosen}),a=[],n=e.filter(function(e){return e.action_chosen}).map(function(e){return delete e.action_chosen,e.status="inactive",e});return t.forEach(function(e){var t=[];a.some(function(t){return t.full_code===e.full_code})&&(t=a.filter(function(t){return t.full_code===e.full_code})[0].synonyms,a=a.filter(function(t){return t.full_code!==e.full_code}));var n=e.title.toLowerCase();t.includes(n)||t.push(n),a.push({full_code:e.full_code,synonyms:t})}),console.log("PATCH SYNONYMS",n,"ICD DISCARD",a),{patch_synonyms:n,icd_discard_synonyms:a}},Ot=function(e){var t=e.filter(function(e){return e.action_chosen}),a=[],n=e.filter(function(e){return e.action_chosen}).map(function(e){return delete e.action_chosen,e.status="active",e});return t.forEach(function(e){var t=[];a.some(function(t){return t.full_code===e.full_code})&&(t=a.filter(function(t){return t.full_code===e.full_code})[0].synonyms,a=a.filter(function(t){return t.full_code!==e.full_code}));var n=e.title.toLowerCase();t.includes(n)||t.push(n),a.push({full_code:e.full_code,synonyms:t})}),console.log("PATCH SYNONYMS",n,"ICD APPEND",a),{patch_synonyms:n,icd_append_synonyms:a}},Dt=function(){return{_id:"",code:"",description:"",effectivity_date:"",expiry_date:"",status:""}},Mt=function(e){return e&&e._id&&e.code&&e.description&&e.status&&e.effectivity_date?(Object.keys(e).forEach(function(t){e[t]&&"N/A"!==e[t]||(e[t]="")}),e):Dt()},At=function(e){var t=Object.assign({},e);return e&&e._id&&e.code&&e.description&&e.effectivity_date&&e.status?t:Dt()},Ft=a(805),Pt=new gt.c.IndexedDBHelper,jt=function(e){function t(e){var a;Object(p.a)(this,t),(a=Object(_.a)(this,Object(v.a)(t).call(this,e))).requiredFields=void 0,a.excludeFields=void 0,a.escFunction=function(e){27===e.keyCode&&a.handleCloseSideModalBlock()},a.initialData=function(){a.setState({no_data_message:"Searching for ICD10 codes"}),a.searchCode(10,0,a.state.default_filters,a.state.global_filter,a.state.default_sorting,a.state.default_clicked)},a.addCodeIndexdb=function(e){Pt.openDb("himsDb").then(function(t){var a=t.result;try{Pt.saveToStore(a,"icd10_list",e).then(function(e){return console.log("RES",e)}).catch(function(e){return console.log(e)})}catch(n){console.log(n)}})},a.patchCodeIndexdb=function(e){Pt.openDb("himsDb").then(function(t){var a=t.result;try{Pt.updateEntryByKey(a,"icd10_list",e._id,e).then(function(e){return console.log("Successfully patched code in IndexDB",e)}).catch(function(e){return console.log(e)})}catch(n){console.log(n)}})},a.fetchICDCategoriesIndexdb=Object(g.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gt.c.StorageService("icd10_list").then(function(e){if(Array.isArray(e)&&e.length>0){var t=[],n=[{name:"",value:""}];e.filter(function(e){return!(!e||!e.main_category||t.includes(e.main_category))&&(t.push(e.main_category),n.push({name:e.main_category,value:e.main_category}),!0)}),a.props.setICDCategories(t),a.props.setICDCategoryDropdown(n),a.setState({icd_categories:t,icd_category_dropdown_choices:n})}}).catch(function(e){return console.log(e)});case 2:case"end":return e.stop()}},e)})),a.searchCode=function(e,t,n,o,i,l){Xe(e,t,n,o,i,l).then(function(e){if(a.setState({no_data_message:"No available data"}),e&&void 0===e.error){var t=a.generateDataForTable(e.result?e.result:[]);a.setState({code_response:e,code_data_all:t,code_data:t,loading_state:!1,totalCount:e.total&&e.total.count?e.total.count:0})}else if(e&&e.error&&401===e.error.statusCode){var n=a.generateDataForTable([]);a.setState({code_response:[],code_data_all:n,loading_state:!1,isModalOpen:!0,modalTitle:"Unauthorized",modalMessage:"You are not authorized to view ICD10 codes."})}else{var o=a.generateDataForTable([]);a.setState({code_response:[],code_data_all:o,loading_state:!1,isModalOpen:!0,modalTitle:"Loading failed",modalMessage:"An error occured while loading the list of codes."})}}).catch(function(){var e=a.generateDataForTable([]);a.setState({code_response:[],code_data_all:e,loading_state:!1,isModalOpen:!0,modalTitle:"Loading failed",modalMessage:"An error occured while loading the list of codes.",page:0})})},a.patchCode=function(e){var t=St(e),n=t.full_code;a.setState({loading_state:!0,no_data_message:"Searching for ICD10 codes"}),et(JSON.stringify(t),t._id).then(function(e){a.setState({loading_state:!1,no_data_message:"No available data"}),e&&void 0===e.error&&void 0!==e.message?(a.changePageUpdate(a.state.limit,a.state.limit*a.state.page),a.patchCodeIndexdb(t),a.setState({disableSaveButton:!0,isModalOpen:!0,modalTitle:"Success",modalMessage:"You have ".concat(e.message," code!")})):e&&e.error&&401===e.error.statusCode?a.setState({isModalOpen:!0,modalTitle:"Unauthorized",modalMessage:"You are not authorized to edit ICD10 codes."}):e&&e.error&&400===e.error.statusCode&&e.error.message?a.setState({isModalOpen:!0,modalTitle:"ICD10 Code Already Exists",modalMessage:l.a.createElement("span",null,l.a.createElement("strong",null,"[",n,"]")," cannot be added. This already exists on the list.")}):a.setState({isModalOpen:!0,modalTitle:"Failed",modalMessage:"Something went wrong while saving!"})}).catch(function(e){"Error: This code already exists."==e?a.setState({isModalOpen:!0,modalTitle:"ICD10 Code Already Exists",modalMessage:l.a.createElement("span",null,l.a.createElement("strong",null,"[",n,"]")," cannot be added. This already exists on the list."),loading_state:!1}):a.setState({isModalOpen:!0,modalTitle:"Failed",modalMessage:"Something went wrong while saving!",loading_state:!1})})},a.addCodes=function(e){a.setState({loading_state:!0});var t=Et(e),n="";t&&t.length>0&&(n=t[0].full_code),Ze(JSON.stringify(t)).then(function(e){a.setState({loading_state:!1}),e&&void 0===e.error&&e.message&&e.result?(a.changePageUpdate(a.state.limit,a.state.limit*a.state.page),a.addCodeIndexdb(e.result),a.setState({disableSaveButton:!0,isModalOpen:!0,modalTitle:"Success",modalMessage:"You have successfully added ".concat(e.result.length," ICD10 code/s!")})):e&&e.error&&401===e.error.statusCode?a.setState({isModalOpen:!0,modalTitle:"Unauthorized",modalMessage:"You are not authorized to add ICD10 codes."}):e&&e.error&&400===e.error.statusCode&&e.error.message?a.setState({isModalOpen:!0,modalTitle:"ICD10 Code Already Exists",modalMessage:l.a.createElement("span",null,l.a.createElement("strong",null,"[",n,"]")," cannot be added. This already exists on the list.")}):a.setState({isModalOpen:!0,modalTitle:"Failed",modalMessage:"Something went wrong while adding!"})}).catch(function(e){"Error: This code already exists."==e?a.setState({isModalOpen:!0,modalTitle:"ICD10 Code Already Exists",modalMessage:l.a.createElement("span",null,l.a.createElement("strong",null,"[",n,"]")," cannot be added. This already exists on the list."),loading_state:!1}):a.setState({isModalOpen:!0,modalTitle:"Failed",modalMessage:"Something went wrong while saving!",loading_state:!1})})},a.changePageUpdate=function(e,t){a.handleCloseSideModalBlock(),a.setState({loading_state:!0,no_data_message:"Searching for ICD10 codes"}),0!==a.state.default_filters.length||""!==a.state.global_filter||0!==a.state.default_sorting.length||""!==a.state.default_clicked?a.searchCode(e,t,a.state.default_filters,a.state.global_filter,a.state.default_sorting,a.state.default_clicked):Qe(e,t).then(function(e){if(a.setState({no_data_message:"No available data"}),e&&void 0===e.error){var t=a.generateDataForTable(e.result?e.result:[]);a.setState({code_response:e,code_data_all:t,code_data:t,loading_state:!1,totalCount:e.total&&e.total.count?e.total.count:0})}else if(e&&e.error&&401===e.error.statusCode){var n=a.generateDataForTable([]);a.setState({code_response:[],code_data_all:n,loading_state:!1,isModalOpen:!0,modalTitle:"Unauthorized",modalMessage:"You are not authorized to view ICD10 codes."})}else{var o=a.generateDataForTable([]);a.setState({code_response:[],code_data_all:o,loading_state:!1,isModalOpen:!0,modalTitle:"Loading failed",modalMessage:"An error occured while loading the list of codes."})}})},a.handleChangeSorting=function(e){a.setState({default_sorting:e,loading_state:!0,no_data_message:"Searching for ICD10 codes"}),e&&e.length>0&&a.searchCode(a.state.limit,a.state.page*a.state.limit,a.state.default_filters,a.state.global_filter,e,a.state.default_clicked)},a.handleFilterByColumn=function(e){var t=Object(y.a)(a);t.state.typingTimeout&&clearTimeout(t.state.typingTimeout),t.setState({default_filters:e,typing:!1,page:0,typingTimeout:setTimeout(function(){t.setState({loading_state:!0,no_data_message:"Searching for ICD10 codes"}),0!==t.state.default_filters?t.searchCode(t.state.limit,0,e,t.state.global_filter,t.state.default_sorting,t.state.default_clicked):t.initialData()},2e3)})},a.handleSearch=function(e){var t=e.target.value,n=Object(y.a)(a);n.state.typingTimeout&&clearTimeout(n.state.typingTimeout),n.setState({global_filter:t,typing:!1,page:0,typingTimeout:setTimeout(function(){n.setState({loading_state:!0,limit:10,no_data_message:"Searching for ICD10 codes"}),""!==n.state.global_filter?n.searchCode(n.state.limit,0,n.state.default_filters,n.state.global_filter,n.state.default_sorting,n.state.default_clicked):n.initialData()},2e3)})},a.handleClickRow=function(e){var t=a.state.code_response;if(a.state.code_response&&a.state.code_response.result){var n=pt(t.result[e]);a.checkFields(n,!0),a.setState({code_info:n},function(){return a.handleChangeSideModalBlockMode("view")})}},a.handlePageChange=function(e,t){a.setState({page:e}),a.changePageUpdate(a.state.limit,t)},a.handlePageSizeChange=function(e){a.state.totalCount>=1e5?a.setState({isPageSizeModal:!0}):(a.setState({limit:e}),a.changePageUpdate(e,e*a.state.page))},a.handleClickItemFromList=function(e){a.setState({default_clicked:e}),a.handleCloseSideModalBlock(),a.setState({page:0,loading_state:!0,no_data_message:"Searching for ICD10 codes"}),void 0!==e&&a.searchCode(a.state.limit,0,a.state.default_filters,a.state.global_filter,a.state.default_sorting,e)},a.handleCloseSideModalBlock=function(){a.setState({show_side_modal_block:"none",side_modal_block_mode:"",code_info:yt()})},a.handleChangeSideModalBlockMode=function(e){var t="";if(e&&"edit"===e){t="Edit ".concat(a.state.block_title);var n=_t(Object(Ft.cloneDeep)(a.state.code_info));a.setState({code_info:n})}else e&&"view"===e&&a.state.code_info?t=a.state.code_info.full_code?a.state.code_info.full_code:"":e&&"add"===e&&(t="Add ICD10 Code");a.setState({side_modal_block_mode:e,block_title:t},function(){return a.handleOpenBlock()})},a.handleOpenBlock=function(){a.setState({show_side_modal_block:"block"},function(){return a.passDataToSideModalBlockBody()})},a.handleInvalidFieldsPrompt=function(){a.setState({isModalOpen:!0,modalTitle:"Incomplete/Invalid Fields",modalMessage:"Please complete the form before proceeding."})},a.passDataToSideModalBlockBody=function(){a.state.code_info&&!a.state.code_info.gender_limited&&(a.state.code_info.gender="",a.setState({code_info:a.state.code_info}))},a.checkFields=function(e,t){if(a.setState({loading_state:!0}),e){var n=a.getInvalidFields(e,t);if(n&&0!==n.length)a.handleInvalidFieldsPrompt();else{if(a.state.disableSaveButton||!a.state.clickSaveButton)return;"edit"===a.state.side_modal_block_mode?a.setState({clickSaveButton:!1,confirm_modal_message:"Are you sure you want to edit this ICD10 code?",confirm_modal_open:!0,confirm_modal_title:"Confirm edit ICD10 code",action_after_confirm:function(){return a.patchCode(e)}}):"add"===a.state.side_modal_block_mode&&a.setState({clickSaveButton:!1,confirm_modal_message:"Are you sure you want to add this ICD10 code?",confirm_modal_open:!0,confirm_modal_title:"Confirm add ICD10 code",action_after_confirm:function(){return a.addCodes(e)}})}}},a.getInvalidFields=function(e,t){var n=[],o=[],i={};void 0!==a.excludeFields&&(i=a.excludeFields);var l=Object.keys(i);Object.keys(e).forEach(function(i){a.requiredFields&&a.requiredFields.includes(i)&&!l.includes(i)&&!e[i]&&(t?o.push(i):n.push(i))});var s=q()(e.effectivity_date),r=q()(e.expiry_date);return e&&e.effectivity_date&&e.expiry_date&&s.isValid()&&r.isValid()&&s.startOf("day").diff(r.startOf("day"))>0&&(t?o.push("effectivity_date"):n.push("effectivity_date")),e&&e.gender_limited&&!e.gender&&(t?o.push("gender"):n.push("gender")),o&&0!==o.length?a.state.disableSaveButton||a.setState({disableSaveButton:!0}):a.setState({disableSaveButton:!1}),a.setState({loading_state:!1,invalid_fields:n}),n},a.requiredFields=Je.a.ICD10.editOrAdd.checkInvalidFields,a.excludeFields=Je.a.ICD10.editOrAdd.excludeFields;var n={formattedColumns:{},columnExtensions:[{columnName:"full_code",width:150,wordWrapEnabled:!0},{columnName:"full_description",width:500,wordWrapEnabled:!0}],columns:[{name:"full_code",title:"ICD10 Code"},{name:"full_description",title:"Description"}],rows:[]};return a.state={icd_category_dropdown_choices:e.icdCategoryDropdown,icd_categories:e.icdCategories,no_data_message:"",confirm_modal_title:"",confirm_modal_message:"",confirm_modal_open:!1,action_after_confirm:function(){},invalid_fields:[],highlightedCodeFromList:-1,loading_state:!0,code_response:[],code_info:yt(),show_side_modal_block:"none",side_modal_block_mode:"",code_data:n,code_data_all:n,block_title:"",global_filter:"",default_filters:[],default_sorting:[{columnName:"full_code",direction:"asc"}],default_clicked:"",isModalOpen:!1,isPageSizeModal:!1,modalTitle:"",modalMessage:"",action_after_info:function(){},totalCount:0,typing:!1,typingTimeout:0,page:0,limit:10,disableSaveButton:!1,clickSaveButton:!1},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.state.icd_category_dropdown_choices&&this.state.icd_categories.length?this.initialData():this.fetchICDCategoriesIndexdb().then(function(){return e.initialData()}).catch(function(){return e.initialData()}),document.addEventListener("keydown",this.escFunction,!1)}},{key:"generateDataForTable",value:function(e){var t={formattedColumns:{},columnExtensions:[{columnName:"full_code",width:150,wordWrapEnabled:!0},{columnName:"full_description",width:500,wordWrapEnabled:!0}],columns:[{name:"full_code",title:"ICD10 Code"},{name:"full_description",title:"Description"}],rows:[]};for(var a in e){var n=e[a],o={};o.full_code=n.full_code,o.full_description=n.full_description,t.rows.push(o)}return t}},{key:"renderSideModalBlock",value:function(){var e=this;return l.a.createElement(d.SideModalBlock,{blockPosition:"fixed",title:this.state.block_title,editIconDescription:"Edit Code",showBlock:this.state.show_side_modal_block,handleClose:this.handleCloseSideModalBlock,sideModalBlockMode:this.state.side_modal_block_mode,changeMode:this.handleChangeSideModalBlockMode},this.state.side_modal_block_mode?l.a.createElement(d.SideModalBody,{formFields:this.state.code_info,invalidFields:this.state.invalid_fields,handleClose:this.handleCloseSideModalBlock,refreshData:function(t){e.setState({code_info:t},function(){return e.checkFields(t,!0)})},handleSave:function(t){e.state.side_modal_block_mode&&e.setState({clickSaveButton:!0},function(){return e.checkFields(t)})},formName:"ICD10",mode:this.state.side_modal_block_mode?this.state.side_modal_block_mode:"",checkBoxWithDropDownFieldsInitState:!(!this.state.code_info||!this.state.code_info.gender_limited),dynamicDropdownChoices:this.state.icd_category_dropdown_choices,disableSaveButton:this.state.disableSaveButton,datePairField1MaxDate:this.state.code_info&&this.state.code_info.expiry_date&&q()(this.state.code_info.expiry_date).isValid()?q()(this.state.code_info.expiry_date).format("MM-DD-YY").toString():void 0,datePairField2MinDate:this.state.code_info&&this.state.code_info.effectivity_date&&q()(this.state.code_info.effectivity_date).isValid()?q()(this.state.code_info.effectivity_date).format("MM-DD-YY").toString():void 0}):null)}},{key:"renderCodeInfo",value:function(){var e=this.props.classes;return l.a.createElement(l.a.Fragment,null,l.a.createElement("li",{key:"year-of-release",className:e.codeHeader},"YEAR OF RELEASE"),l.a.createElement("li",{key:"year-of-release-value",className:e.codeHeaderValue},"2020"),l.a.createElement(Ye.a,{key:"effectivity-date"},l.a.createElement("div",{className:e.codeHeader},"EFFECTIVITY DATE"),l.a.createElement("div",{className:e.codeHeaderValue},"Jan 1, 2020")))}},{key:"renderCodeList",value:function(e){var t=this,a=this.props.classes;return l.a.createElement(Ye.a,{key:e,classes:{root:a.codeListItemsRoot,primary:this.state.highlightedCodeFromList===this.state.icd_categories.indexOf(e)?a.codeListItemsSelected:a.codeListItems},onClick:function(){t.state.icd_categories.indexOf(e)!==t.state.highlightedCodeFromList?(t.setState({highlightedCodeFromList:t.state.icd_categories.indexOf(e)}),t.handleClickItemFromList(e)):(t.setState({highlightedCodeFromList:-1}),t.handleClickItemFromList(""))}},l.a.createElement("br",null),e)}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.icd_categories;return l.a.createElement("div",null,this.state.loading_state?l.a.createElement(qe.a,null):null,l.a.createElement(L.a,{container:!0},l.a.createElement(L.a,{container:!0,item:!0,xs:12,md:3},l.a.createElement(L.a,{container:!0,className:t.borderedGrid},l.a.createElement(Ve.a,null,this.renderCodeInfo(),a?a.map(function(t){return e.renderCodeList(t)}):null))),l.a.createElement(L.a,{container:!0,item:!0,xs:12,md:9,style:{paddingLeft:"37px"}},l.a.createElement(L.a,{container:!0},l.a.createElement(L.a,{item:!0,xs:12,md:9},l.a.createElement(V.a,{style:{width:"100%",backgroundColor:"white"},id:"code_search",placeholder:"Search a code or description",label:"",margin:"none",fullWidth:!0,variant:"outlined",value:this.state.global_filter,inputProps:{"aria-label":"bare"},onChange:this.handleSearch,InputProps:{startAdornment:l.a.createElement(z.a,{position:"start"},l.a.createElement(Ge.a,{style:{color:"rgba(54, 54, 54, 0.4)"}}))}})),l.a.createElement(L.a,{item:!0,xs:8,md:3,style:{paddingRight:"15px",marginTop:15,textAlign:"center"}},l.a.createElement(x.a,{icon:T.n,className:t.plusIcon}),l.a.createElement(E.a,{className:t.addACode,onClick:function(){e.setState({block_title:"Add ICD10 Code",code_info:yt(),disableSaveButton:!0},function(){return e.handleChangeSideModalBlockMode("add")})}},"Add a Code")),l.a.createElement(d.GridHorizontalDivider,{height:"30px"}),l.a.createElement(L.a,{style:{minHeight:690,overflow:"auto"}},l.a.createElement(He,{id:"tab-all",totalCount:this.state.totalCount,update:this.changePageUpdate,updateSorting:this.handleChangeSorting,rows:Object.keys(this.state.code_data).length>0?this.state.code_data.rows:[],columns:Object.keys(this.state.code_data).length>0?this.state.code_data.columns:[],message:this.state.global_filter?"No available data":this.state.no_data_message,onClickRow:this.handleClickRow,disableSelect:!0,disableSearch:!0,formattedColumns:Object.keys(this.state.code_data).length>0?this.state.code_data.formattedColumns:{},columnExtensions:Object.keys(this.state.code_data).length>0?this.state.code_data.columnExtensions:[],onFilterChange:this.handleFilterByColumn,onSortingChange:this.handleChangeSorting,onPageChange:this.handlePageChange,ongPageSizeChange:this.handlePageSizeChange,defaultFilter:this.state.default_filters,currentPage:this.state.page,limit:this.state.limit,pageSizes:[10,25,50,100]}))))),this.renderSideModalBlock(),l.a.createElement(d.MsgModal,{onClose:function(){e.setState({isModalOpen:!1})},title:this.state.modalTitle,isModalOpen:this.state.isModalOpen,message:this.state.modalMessage}),l.a.createElement(ft,{onClose:function(){return e.setState({confirm_modal_open:!1})},title:this.state.confirm_modal_title,isModalOpen:this.state.confirm_modal_open,submitType:"confirm",onSubmit:function(){e.state.action_after_confirm&&e.state.action_after_confirm()},message:this.state.confirm_modal_message}))}}]),t}(l.a.Component),Bt=new Ke.a;Bt.getAccessToken();var It=function(e,t){var a={limit:e,skip:t},n={method:"GET"};return Bt.getAccessToken()?Bt.call(n,"cpts/search?filter=".concat(JSON.stringify(a)),!0):Bt.fetchAccessToken().then(function(){return Bt.call(n,"cpts/search?filter=".concat(JSON.stringify(a)),!0)})},Lt=function(e,t,a,n,o,i){var l="";void 0!==i&&""!==i&&i.length>0&&(l="&filter[where][category]="+i);var s="";o&&0!==o.length&&(s="&filter[order]="+o[0].columnName+" "+o[0].direction);var r="";a&&a.forEach(function(e){r=r+"&"+e.columnName+"="+e.value});var c=n?"&search="+n:"",d="cpts/search?filter[limit]=".concat(e,"&filter[skip]=").concat(t)+c+r+s+l;0===e&&(d="cpts/search?filter[skip]=".concat(t)+c+r+s+l);var u={method:"GET"};return Bt.getAccessToken()?Bt.call(u,d,!0):Bt.fetchAccessToken().then(function(){return Bt.call(u,d,!0)})},Nt=function(e){var t={method:"POST",body:e};return Bt.getAccessToken()?Bt.call(t,"cpts/multiple",!0):Bt.fetchAccessToken().then(function(){return Bt.call(t,"cpts/multiple",!0)})},zt=function(e,t){var a={method:"PUT",body:e};return Bt.getAccessToken()?Bt.call(a,"cpts/edit/".concat(t),!0):Bt.fetchAccessToken().then(function(){return Bt.call(a,"cpts/edit/".concat(t),!0)})},Ut=function(e){var t={method:"DELETE"};return Bt.getAccessToken()?Bt.call(t,"cpts/".concat(e),!0):Bt.fetchAccessToken().then(function(){return Bt.call(t,"cpts/".concat(e),!0)})},Rt=new gt.c.IndexedDBHelper,Wt=function(e){function t(e){var a;Object(p.a)(this,t),(a=Object(_.a)(this,Object(v.a)(t).call(this,e))).requiredFields=void 0,a.excludeFields=void 0,a.escFunction=function(e){27===e.keyCode&&a.handleCloseSideModalBlock()},a.initialData=function(){a.setState({no_data_message:"Searching for CPT codes"}),a.searchCode(10,0,a.state.default_filters,a.state.global_filter,a.state.default_sorting,a.state.default_clicked)},a.addCPTIndexDB=function(e){Rt.openDb("himsDb").then(function(t){var a=t.result;try{Rt.saveToStore(a,"cpt_list",e).then(function(e){return console.log("RES",e)}).catch(function(e){return console.log(e)})}catch(n){console.log(n)}})},a.patchCPTIndexDB=function(e){Rt.openDb("himsDb").then(function(t){var a=t.result;try{Rt.updateEntryByKey(a,"cpt_list",e._id,e).then(function(e){return console.log("RES",e)}).catch(function(e){return console.log(e)})}catch(n){console.log(n)}})},a.fetchCPTCategories=Object(g.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loading_state:!0}),e.next=3,gt.c.StorageService("cpt_list").then(function(e){if(Array.isArray(e)&&e.length>0){var t=[],n=[],o=[{name:"",value:""}];e.filter(function(e){return!t.includes(e.category)&&(t.push(e.category),n.push(e.code),o.push({name:e.category,value:e.category}),!0)}),a.props.setCPTCategories(t),a.props.setCPTCategoryDropdown(o),a.props.setCPTCategoryRanges(Object(Ft.cloneDeep)(n)),a.setState({cpt_categories:t,cpt_category_range:n,category_dropdown_choices:o},function(){return a.setState({loading_state:!1})})}}).catch(function(e){return console.log(e)});case 3:case"end":return e.stop()}},e)})),a.patchCode=function(e){var t=Ct(e),n=t.code;a.setState({loading_state:!0,no_data_message:"Searching for CPT codes"}),zt(JSON.stringify(t),t._id).then(function(t){a.setState({no_data_message:"No available data",loading_state:!1}),t&&void 0===t.error&&t.message?(a.changePageUpdate(a.state.limit,a.state.limit*a.state.page),a.patchCPTIndexDB(e),a.setState({disableSaveButton:!0,isModalOpen:!0,modalTitle:"Success",modalMessage:"You have ".concat(t.message," code!")})):t&&t.error&&401===t.error.statusCode?a.setState({isModalOpen:!0,modalTitle:"Unauthorized",modalMessage:"You are not authorized to edit CPT codes."}):t&&t.error&&400===t.error.statusCode&&t.error.message?a.setState({isModalOpen:!0,modalTitle:"CPT Code Already Exists",modalMessage:l.a.createElement("span",null,l.a.createElement("strong",null,"[",n,"]")," cannot be added. This already exists on the list.")}):a.setState({isModalOpen:!0,modalTitle:"Failed",modalMessage:"Something went wrong while saving!"})}).catch(function(e){"Error: This code already exists."==e?a.setState({isModalOpen:!0,modalTitle:"CPT Code Already Exists",modalMessage:l.a.createElement("span",null,l.a.createElement("strong",null,"[",n,"]")," cannot be added. This already exists on the list."),loading_state:!1}):a.setState({isModalOpen:!0,modalTitle:"Failed",modalMessage:"Something went wrong while saving!",loading_state:!1})})},a.addCodes=function(e){a.setState({loading_state:!0,no_data_message:"Searching for CPT codes"});var t=kt(e),n="";t&&t.length>0&&(n=t[0].code),Nt(JSON.stringify(t)).then(function(e){a.setState({loading_state:!1,no_data_message:"No available data"}),e&&void 0===e.error&&e.message&&e.result?(a.changePageUpdate(a.state.limit,a.state.limit*a.state.page),a.addCPTIndexDB(e.result),a.setState({disableSaveButton:!0,isModalOpen:!0,modalTitle:"Success",modalMessage:"You have successfully added ".concat(e.result.length," CPT code/s!")})):e&&e.error&&401===e.error.statusCode?a.setState({isModalOpen:!0,modalTitle:"Unauthorized",modalMessage:"You are not authorized to add CPT codes."}):e&&e.error&&400===e.error.statusCode&&e.error.message?a.setState({isModalOpen:!0,modalTitle:"CPT Code Already Exists",modalMessage:l.a.createElement("span",null,l.a.createElement("strong",null,"[",n,"]")," cannot be added. This already exists on the list.")}):a.setState({isModalOpen:!0,modalTitle:"Failed",modalMessage:"Something went wrong while adding!"})}).catch(function(e){"Error: This code already exists."==e?a.setState({isModalOpen:!0,modalTitle:"CPT Code Already Exists",modalMessage:l.a.createElement("span",null,l.a.createElement("strong",null,"[",n,"]")," cannot be added. This already exists on the list."),loading_state:!1}):a.setState({isModalOpen:!0,modalTitle:"Failed",modalMessage:"Something went wrong while saving!",loading_state:!1})})},a.searchCode=function(e,t,n,o,i,l){Lt(e,t,n,o,i,l).then(function(e){if(a.setState({no_data_message:"No available data"}),e&&void 0===e.error){var t=a.generateDataForTable(e.result?e.result:[]);a.setState({code_response:e,code_data_all:t,code_data:t,loading_state:!1,totalCount:e.total&&e.total.count?e.total.count:0})}else if(e&&e.error&&401===e.error.statusCode){var n=a.generateDataForTable([]);a.setState({code_response:[],code_data_all:n,loading_state:!1,isModalOpen:!0,modalTitle:"Unauthorized",modalMessage:"You are not authorized to view CPT codes."})}else{var o=a.generateDataForTable([]);a.setState({code_response:[],code_data_all:o,loading_state:!1,isModalOpen:!0,modalTitle:"Loading failed",modalMessage:"An error occured while loading the list of codes."})}}).catch(function(){var e=a.generateDataForTable([]);a.setState({code_response:[],code_data_all:e,loading_state:!1,isModalOpen:!0,modalTitle:"Loading failed",modalMessage:"An error occured while loading the list of codes."})})},a.deleteCPT=function(e){e&&(a.setState({loading_state:!0}),Ut(e).then(function(e){a.setState({loading_state:!1}),a.changePageUpdate(a.state.limit,a.state.limit*a.state.page),e&&e.error?a.setState({isModalOpen:!0,modalTitle:"Failed",modalMessage:"Something went wrong while deleting the CPT Code!"}):a.setState({isModalOpen:!0,modalTitle:"Success",modalMessage:"You have successfully deleted a CPT code!"})}).catch(function(e){a.setState({isModalOpen:!0,modalTitle:"Failed",modalMessage:"Something went wrong while deleting the ICD10 Code!"}),a.setState({loading_state:!1}),console.log("client error: ",e)}))},a.changePageUpdate=function(e,t){a.handleCloseSideModalBlock(),a.setState({no_data_message:"Searching for CPT codes"}),a.setState({loading_state:!0}),0!==a.state.default_filters.length||""!==a.state.global_filter||0!==a.state.default_sorting.length||""!==a.state.default_clicked?a.searchCode(e,t,a.state.default_filters,a.state.global_filter,a.state.default_sorting,a.state.default_clicked):(a.setState({no_data_message:"Searching for CPT codes"}),It(e,t).then(function(e){if(a.setState({no_data_message:"No available data"}),e&&void 0===e.error){var t=a.generateDataForTable(e.result?e.result:[]);a.setState({code_response:e,code_data_all:t,code_data:t,loading_state:!1,totalCount:e.total&&e.total.count?e.total.count:0})}else if(e&&e.error&&401===e.error.statusCode){var n=a.generateDataForTable([]);a.setState({code_response:[],code_data_all:n,loading_state:!1,isModalOpen:!0,modalTitle:"Unauthorized",modalMessage:"You are not authorized to view CPT codes."})}else{var o=a.generateDataForTable([]);a.setState({code_response:[],code_data_all:o,loading_state:!1,isModalOpen:!0,modalTitle:"Loading failed",modalMessage:"An error occured while loading the list of codes."})}}))},a.handleChangeSorting=function(e){a.setState({no_data_message:"Searching for CPT codes"}),a.setState({default_sorting:e,loading_state:!0}),e&&e.length>0&&a.searchCode(a.state.limit,a.state.page*a.state.limit,a.state.default_filters,a.state.global_filter,e,a.state.default_clicked)},a.handleFilterByColumn=function(e){var t=Object(y.a)(a);t.state.typingTimeout&&clearTimeout(t.state.typingTimeout),t.setState({default_filters:e,typing:!1,page:0,typingTimeout:setTimeout(function(){t.setState({no_data_message:"Searching for CPT codes",loading_state:!0}),0!==t.state.default_filters?t.searchCode(t.state.limit,0,e,t.state.global_filter,t.state.default_sorting,t.state.default_clicked):t.initialData()},2e3)})},a.handleSearch=function(e){var t=e.target.value,n=Object(y.a)(a);n.state.typingTimeout&&clearTimeout(n.state.typingTimeout),n.setState({global_filter:t,typing:!1,page:0,typingTimeout:setTimeout(function(){n.setState({no_data_message:"Searching for CPT codes",loading_state:!0,limit:10}),""!==n.state.global_filter?n.searchCode(n.state.limit,0,n.state.default_filters,n.state.global_filter,n.state.default_sorting,n.state.default_clicked):n.initialData()},2e3)})},a.handleClickRow=function(e){var t=a.state.code_response;if(a.state.code_response&&a.state.code_response.result){var n=ht(t.result[e]);a.checkFields(n,!0),a.setState({code_info:n},function(){return a.handleChangeSideModalBlockMode("view")})}},a.handlePageChange=function(e,t){a.setState({page:e}),a.changePageUpdate(a.state.limit,t)},a.handlePageSizeChange=function(e){a.state.totalCount>=1e5?a.setState({isPageSizeModal:!0}):(a.setState({limit:e}),a.changePageUpdate(e,e*a.state.page))},a.handleClickItemFromList=function(e){a.setState({default_clicked:e}),a.handleCloseSideModalBlock(),a.setState({no_data_message:"Searching for CPT codes",page:0,loading_state:!0}),void 0!==e&&a.searchCode(a.state.limit,0,a.state.default_filters,a.state.global_filter,a.state.default_sorting,e)},a.handleCloseSideModalBlock=function(){a.setState({show_side_modal_block:"none",side_modal_block_mode:"",code_info:bt()})},a.handleChangeSideModalBlockMode=function(e){var t="";if(e&&"edit"===e&&a.state.block_title){t="Edit ".concat(a.state.block_title);var n=vt(Object(Ft.cloneDeep)(a.state.code_info));a.setState({code_info:n})}else e&&"view"===e&&a.state.code_info?t=a.state.code_info.code?a.state.code_info.code:"":e&&"add"===e&&(t="Add CPT Code");a.setState({side_modal_block_mode:e,block_title:t},function(){return a.handleOpenBlock()})},a.handleOpenBlock=function(){a.setState({show_side_modal_block:"block"},function(){return a.passDataToSideModalBlockBody()})},a.handleInvalidFieldsPrompt=function(){a.setState({isModalOpen:!0,modalTitle:"Incomplete/Invalid Fields",modalMessage:"Please complete the form before proceeding."})},a.passDataToSideModalBlockBody=function(){a.state.code_info&&!a.state.code_info.gender_limited&&(a.state.code_info.gender="",a.setState({code_info:a.state.code_info}))},a.checkFields=function(e,t){if(a.setState({loading_state:!0}),e){var n=a.getInvalidFields(e,t);if(n&&0!==n.length)a.handleInvalidFieldsPrompt();else{if(a.state.disableSaveButton||!a.state.clickSaveButton)return;"edit"===a.state.side_modal_block_mode?a.setState({clickSaveButton:!1,confirm_modal_message:"Are you sure you want to edit this CPT code?",confirm_modal_open:!0,confirm_modal_title:"Confirm edit CPT code",action_after_confirm:function(){return a.patchCode(e)}}):"add"===a.state.side_modal_block_mode&&a.setState({clickSaveButton:!1,confirm_modal_message:"Are you sure you want to add this CPT code?",confirm_modal_open:!0,confirm_modal_title:"Confirm add CPT code",action_after_confirm:function(){return a.addCodes(e)}})}}},a.getInvalidFields=function(e,t){var n=[],o=[],i={};void 0!==a.excludeFields&&(i=a.excludeFields);var l=Object.keys(i);Object.keys(e).forEach(function(i){void 0===a.requiredFields||!a.requiredFields.includes(i)||l.includes(i)||e[i]||(t?o.push(i):n.push(i))});var s=q()(e.effectivity_date),r=q()(e.expiry_date);return e&&e.effectivity_date&&e.expiry_date&&s.isValid()&&r.isValid()&&s.startOf("day").diff(r.startOf("day"))>0&&(t?o.push("effectivity_date"):n.push("effectivity_date")),e&&e.gender_limited&&!e.gender&&(t?o.push("gender"):n.push("gender")),o&&0!==o.length?a.state.disableSaveButton||a.setState({disableSaveButton:!0}):a.setState({disableSaveButton:!1}),a.setState({loading_state:!1,invalid_fields:n}),n},a.requiredFields=Je.a.CPT.editOrAdd.checkInvalidFields,a.excludeFields=Je.a.CPT.editOrAdd.excludeFields;var n={formattedColumns:{},columnExtensions:[{columnName:"code",width:150,wordWrapEnabled:!0},{columnName:"description",width:500,wordWrapEnabled:!0}],columns:[{name:"code",title:"CPT Code"},{name:"description",title:"Description"}],rows:[]};return a.state={category_dropdown_choices:e.cptCategoryDropdown,cpt_categories:e.cptCategories,cpt_category_range:e.cptCategoryRanges,no_data_message:"",confirm_modal_title:"",confirm_modal_message:"",confirm_modal_open:!1,action_after_confirm:function(){},invalid_fields:[],highlightedCodeFromList:-1,loading_state:!0,code_response:[],code_info:bt(),show_side_modal_block:"none",side_modal_block_mode:"",code_data:n,code_data_all:n,block_title:"",global_filter:"",default_filters:[],default_sorting:[{columnName:"code",direction:"asc"}],default_clicked:"",isModalOpen:!1,isPageSizeModal:!1,modalTitle:"",modalMessage:"",totalCount:0,typing:!1,typingTimeout:0,page:0,limit:10,disableSaveButton:!1,clickSaveButton:!1},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.state.category_dropdown_choices&&this.state.cpt_categories&&this.state.cpt_category_range?this.initialData():this.fetchCPTCategories().then(function(){return e.initialData()}).catch(function(){return e.initialData()}),document.addEventListener("keydown",this.escFunction,!1)}},{key:"generateDataForTable",value:function(e){var t={formattedColumns:{},columnExtensions:[{columnName:"code",width:150,wordWrapEnabled:!0},{columnName:"description",width:500,wordWrapEnabled:!0}],columns:[{name:"code",title:"CPT Code"},{name:"description",title:"Description"}],rows:[]};for(var a in e){var n=e[a],o={};o.code=n.code,o.description=n.description,t.rows.push(o)}return t}},{key:"renderSideModalBlock",value:function(){var e=this;return l.a.createElement(d.SideModalBlock,{blockPosition:"fixed",title:this.state.block_title,editIconDescription:"Edit Code",showBlock:this.state.show_side_modal_block,handleClose:this.handleCloseSideModalBlock,sideModalBlockMode:this.state.side_modal_block_mode,changeMode:this.handleChangeSideModalBlockMode},this.state.side_modal_block_mode?l.a.createElement(d.SideModalBody,{formFields:this.state.code_info,invalidFields:this.state.invalid_fields,handleClose:this.handleCloseSideModalBlock,disableSaveButton:this.state.disableSaveButton,dynamicDropdownChoices:this.state.category_dropdown_choices,refreshData:function(t){e.setState({code_info:t},function(){return e.checkFields(t,!0)})},delete:function(t){e.state.side_modal_block_mode&&"edit"===e.state.side_modal_block_mode&&e.setState({confirm_modal_message:"Are you sure you want to delete this CPT code?",confirm_modal_open:!0,confirm_modal_title:"Confirm delete CPT code",action_after_confirm:function(){return e.deleteCPT(t._id)}})},handleSave:function(t){e.state.side_modal_block_mode&&e.setState({clickSaveButton:!0},function(){return e.checkFields(t)})},formName:"CPT",mode:this.state.side_modal_block_mode?this.state.side_modal_block_mode:"",checkBoxWithDropDownFieldsInitState:!(!this.state.code_info||!this.state.code_info.gender_limited),datePairField1MaxDate:this.state.code_info&&this.state.code_info.expiry_date&&q()(this.state.code_info.expiry_date).isValid()?q()(this.state.code_info.expiry_date).format("MM-DD-YY").toString():void 0,datePairField2MinDate:this.state.code_info&&this.state.code_info.effectivity_date&&q()(this.state.code_info.effectivity_date).isValid()?q()(this.state.code_info.effectivity_date).format("MM-DD-YY").toString():void 0}):null)}},{key:"renderCodeInfo",value:function(){var e=this.props.classes;return l.a.createElement(l.a.Fragment,null,l.a.createElement("li",{key:"version",className:e.codeHeader},"VERSION"),l.a.createElement("li",{key:"year-of-release-value",className:e.codeHeaderValue},"2020"),l.a.createElement(Ye.a,{key:"effectivity-date"},l.a.createElement("div",{className:e.codeHeader},"EFFECTIVITY DATE"),l.a.createElement("div",{className:e.codeHeaderValue},"Jan 1, 2020")))}},{key:"renderCodeList",value:function(e){var t=this,a=this.props.classes,n=this.state.cpt_category_range,o=this.state.cpt_categories,i="";if(!(n.length>0&&o.length>0))return l.a.createElement(l.a.Fragment,null);var s=n[o.indexOf(e)];return s&&(i="".concat(s.slice(0,4),"0000 - ").concat(s.slice(0,4),"9999 :")),l.a.createElement(Ye.a,{key:e,classes:{root:a.codeListItemsRoot,primary:this.state.highlightedCodeFromList===o.indexOf(e)?a.codeListItemsSelected:a.codeListItems},onClick:function(){o.indexOf(e)!==t.state.highlightedCodeFromList?(t.setState({highlightedCodeFromList:o.indexOf(e)}),t.handleClickItemFromList(e)):(t.setState({highlightedCodeFromList:-1}),t.handleClickItemFromList(""))}},l.a.createElement("br",null),i,l.a.createElement("br",null),e)}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.cpt_categories;return l.a.createElement("div",null,this.state.loading_state?l.a.createElement(qe.a,null):null,l.a.createElement(L.a,{container:!0},l.a.createElement(L.a,{container:!0,item:!0,xs:12,md:3},l.a.createElement(L.a,{container:!0,className:t.borderedGrid},l.a.createElement(Ve.a,null,this.renderCodeInfo(),a?a.map(function(t){return e.renderCodeList(t)}):null))),l.a.createElement(L.a,{container:!0,item:!0,xs:12,md:9,style:{paddingLeft:"37px"}},l.a.createElement(L.a,{container:!0},l.a.createElement(L.a,{item:!0,xs:12,md:9},l.a.createElement(V.a,{style:{width:"100%",backgroundColor:"white"},id:"code_search",placeholder:"Search a code or description",label:"",margin:"none",fullWidth:!0,variant:"outlined",value:this.state.global_filter,inputProps:{"aria-label":"bare"},onChange:this.handleSearch,InputProps:{startAdornment:l.a.createElement(z.a,{position:"start"},l.a.createElement(Ge.a,{style:{color:"rgba(54, 54, 54, 0.4)"}}))}})),l.a.createElement(L.a,{item:!0,xs:8,md:3,style:{paddingRight:"15px",marginTop:15,textAlign:"center"}},l.a.createElement(x.a,{icon:T.n,className:t.plusIcon}),l.a.createElement(E.a,{className:t.addACode,onClick:function(){e.setState({block_title:"Add CPT Code",code_info:bt(),disableSaveButton:!0},function(){return e.handleChangeSideModalBlockMode("add")})}},"Add a Code")),l.a.createElement(d.GridHorizontalDivider,{height:"30px"}),l.a.createElement(L.a,{style:{minHeight:690,overflow:"auto"}},l.a.createElement(He,{id:"tab-all",totalCount:this.state.totalCount,update:this.changePageUpdate,updateSorting:this.handleChangeSorting,rows:Object.keys(this.state.code_data).length>0?this.state.code_data.rows:[],columns:Object.keys(this.state.code_data).length>0?this.state.code_data.columns:[],message:this.state.global_filter?"No available data.":this.state.no_data_message,onClickRow:this.handleClickRow,disableSelect:!0,disableSearch:!0,formattedColumns:Object.keys(this.state.code_data).length>0?this.state.code_data.formattedColumns:{},columnExtensions:Object.keys(this.state.code_data).length>0?this.state.code_data.columnExtensions:[],onFilterChange:this.handleFilterByColumn,onSortingChange:this.handleChangeSorting,onPageChange:this.handlePageChange,ongPageSizeChange:this.handlePageSizeChange,defaultFilter:this.state.default_filters,currentPage:this.state.page,limit:this.state.limit,pageSizes:[10,25,50,100]}))))),this.renderSideModalBlock(),l.a.createElement(d.MsgModal,{onClose:function(){return e.setState({isModalOpen:!1})},title:this.state.modalTitle,isModalOpen:this.state.isModalOpen,message:this.state.modalMessage}),l.a.createElement(ft,{onClose:function(){return e.setState({confirm_modal_open:!1})},title:this.state.confirm_modal_title,isModalOpen:this.state.confirm_modal_open,submitType:"confirm",onSubmit:function(){e.state.action_after_confirm&&e.state.action_after_confirm()},message:this.state.confirm_modal_message}))}}]),t}(l.a.Component),Ht=a(22),Yt=a(822),Vt=a(179),Gt=a(142),qt=a(748);function Jt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Kt={All:{filterExtensions:[{columnName:"status",filteringEnabled:!1,sortingEnabled:!1}],columnExtensions:[{columnName:"title",width:370,wordWrapEnabled:!0},{columnName:"status",width:150,wordWrapEnabled:!0}],columns:[{name:"title",title:"Synonyms"},{name:"status",title:"Status",sortingEnabled:!1}]},Others:{formattedColumns:{Unapproved:{approve_disapprove_action_virtual:["action"]},Approved:{required_checkbox:["action"]},Inactive:{required_checkbox:["action"]}},filterExtensions:[{columnName:"action",filteringEnabled:!1,sortingEnabled:!1}],columnExtensions:[{columnName:"title",width:270,wordWrapEnabled:!0},{columnName:"action",width:250,wordWrapEnabled:!0}],columns:[{name:"title",title:"Synonyms"},{name:"action",title:"Action",sortingEnabled:!1,actionColumn:!0,actionValue:!1}]}},$t=Object(u.a)(function(){return{selectedItems:{borderRadius:20,fontSize:13,backgroundColor:"#d1d4db",padding:"5px 10px"},xIcon:{fontSize:16},input:{marginBottom:"2px"},inputLabel:{color:"#272e4c",fontSize:"12px",marginBottom:"5px",marginTop:"20px"}}});console.log($t);var Qt=function(e){function t(e){var a;Object(p.a)(this,t),(a=Object(_.a)(this,Object(v.a)(t).call(this,e))).addSynonym=function(){if(a.props.data&&a.props.data.full_code&&a.state.textFieldValue){var e=a.props.data&&a.props.data.diagnosis_code?a.props.data.diagnosis_code:"";a.props.addSynonym(a.props.data.full_code,a.state.textFieldValue,e),a.setState({textFieldValue:""})}},a.handleFilterByColumn=function(e){if(("Approved"===a.state.activeLink||"Inactive"===a.state.activeLink)&&e&&Array.isArray(e)&&e.some(function(e){return"action"===e.columnName})){var t=e.filter(function(e){return"action"===e.columnName})[0].action;a.handleHeaderCheckbox(t)}a.setState({defaultFilters:e})},a.handleHeaderCheckbox=function(e){var t=a.state.rows,n=a.state.activeLink,o="Approved"===n?"active":"Inactive"===n?"inactive":"";o&&(t.filter(function(e){return e.status===o}).forEach(function(t){return t.action_chosen=e}),a.setState({rows:t},a.formChanges))},a.handleChangeSorting=function(e){a.setState({defaultSorting:e})},a.APIGetAllSynonyms=function(){if(a.props.data&&a.props.data.full_code){var e={full_code:a.props.data.full_code};a.setState({isLoading:!0}),ot(e).then(function(e){var t=e&&e.unapproved&&e.unapproved.count?e.unapproved.count:0,n=e&&e.total&&e.total.count?e.total.count:0,o=e&&e.inactive&&e.inactive.count?e.inactive.count:0,i=e&&e.active&&e.active.count?e.active.count:0;console.log(e),e.eror?a.setState({noData:"No available data",isLoading:!1}):a.setState({tabCount:{All:n,Unapproved:t,Inactive:o,Approved:i},rows:e.result,totalCount:e.total.count,isLoading:!1},a.tabsCount)}).catch(function(e){console.log(e),a.setState({isLoading:!1})})}},a.titleCase=function(e){for(var t=e.toLowerCase().split(" "),a=0;a<t.length;a++)t[a]=t[a][0].toUpperCase()+t[a].slice(1);return t.join(" ")},a.rowDataFixer=function(){var e=a.state,t=e.activeLink,n=e.rows;return"All"===t?n.map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Jt(a,!0).forEach(function(t){Object(Ht.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Jt(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e,{status:a.titleCase(e.status)})}):"Unapproved"===t?n.filter(function(e){return e.status&&"unapproved"===e.status.toLowerCase()}):"Approved"===t?n.filter(function(e){return e.status&&"active"===e.status.toLowerCase()}):"Inactive"===t?n.filter(function(e){return e.status&&"inactive"===e.status.toLowerCase()}):[]},a.getColumns=function(){var e=a.state.activeLink,t="All"===e?"All":"Others",n=Object(Ft.cloneDeep)(Kt);return"Unapproved"===e&&delete n[t].columns[1].actionColumn,"Approved"===e&&(n[t].columns[1].title="Deactivate"),"Inactive"===e&&(n[t].columns[1].title="Activate"),n[t].columns},a.getColumnExtensions=function(){var e=a.state.activeLink;return Kt["All"===e?"All":"Others"].columnExtensions},a.getFilterExtensions=function(){var e=a.state.activeLink;return Kt["All"===e?"All":"Others"].filterExtensions},a.getFormattedColumns=function(){var e=a.state.activeLink;if("All"!==e)return Kt.Others.formattedColumns[e]},a.checkIfSelectBox=function(){return"Approved"!==a.state.activeLink&&"Inactive"!==a.state.activeLink},a.handleClickRow=function(e){a.props.setActiveLink(e.status)},a.handleOnClickRow=function(e){var t=a.state,n=t.rows;if("All"===t.activeLink&&n&&n[e]&&n[e].status){var o="active"===n[e].status?"Approved":a.titleCase(n[e].status);a.changeTab(o)}},a.handleMenuClick=function(){var e=Object(g.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t!==a.state.activeLink&&a.state.hasUnsavedChanges?a.props.changeTabUnsaved(t):a.changeTab(t);case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.changeTab=function(e){return a.props.setActiveLink(e)},a.formChanges=function(){var e=a.state,t=e.activeLink,n=e.rows;if("Unapproved"===t){var o=["approve","disapprove"],i=n&&n.some(function(e){return o.includes(e.action_chosen)});a.props.setHasUnsavedChanges(i)}else if("Approved"===t||"Inactive"===t){var l=n&&n.some(function(e){return e.action_chosen});a.props.setHasUnsavedChanges(l)}},a.handleSave=function(){var e=a.state,t=e.activeLink,n=e.rows;"Unapproved"===t?a.props.patchSynonyms(Object(Ft.cloneDeep)(n)):"Approved"===t?a.props.deactivateSynonyms(Object(Ft.cloneDeep)(n)):"Inactive"===t&&a.props.activateSynonyms(Object(Ft.cloneDeep)(n))},a.tabsCount=function(){var e=a.state.rows,t=e&&e.length?e.length:0,n=0,o=0,i=0;e.forEach(function(e){"active"===e.status?i++:"inactive"===e.status?o++:"unapproved"===e.status&&n++}),a.setState({tabCount:{All:t,Unapproved:n,Inactive:o,Approved:i}})};return a.state={rowActions:[],tabCount:{All:0,Unapproved:0,Approved:0,Inactive:0},hasUnsavedChanges:a.props.hasUnsavedChanges,isLoading:!1,defaultFilters:[],defaultSorting:[],textFieldValue:"",menuTabs:["All","Unapproved","Approved","Inactive"],activeLink:a.props.activeLink,rows:[],totalCount:0,columns:[{name:"title",title:"Synonyms"},{name:"status",title:"Status",sortingEnabled:!1}],noData:""},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidUpdate",value:function(e,t){e.data!==this.props.data&&(this.resetStates(),this.props.setActiveLink("All"),this.APIGetAllSynonyms()),t.activeLink!==this.state.activeLink&&this.resetStates(),e.hasUnsavedChanges!==this.props.hasUnsavedChanges&&this.setState({hasUnsavedChanges:this.props.hasUnsavedChanges}),e.getRowsTrigger!==this.props.getRowsTrigger&&this.props.getRowsForUnsavedChanges(this.state.rows),e.activeLink!==this.props.activeLink&&this.setState({activeLink:this.props.activeLink},this.tabsCount)}},{key:"resetStates",value:function(){var e=this.state.rows;e.forEach(function(e){return e.action_chosen=""}),this.setState({rows:e,defaultFilters:[],defaultSorting:[]}),this.props.setHasUnsavedChanges(!1)}},{key:"render",value:function(){var e=this;return i.createElement(i.Fragment,null,i.createElement("div",{style:{minHeight:600,minWidth:500}},i.createElement("b",null,i.createElement("span",{style:{fontSize:"16px"}},this.props.data.full_code),i.createElement("br",null),i.createElement("span",{style:{fontSize:"18px"}},this.props.data.full_description)),i.createElement("hr",null),i.createElement(L.a,{item:!0,container:!0,justify:"space-between"},i.createElement(Gt.a,{style:{color:"#272e4c",fontSize:"12px",marginBottom:"5px",marginTop:"5px"}},"Add a Synonym"),i.createElement(L.a,{container:!0,item:!0,justify:"space-between"},i.createElement(V.a,{type:"text",style:{width:"65%",marginBottom:"2px"},value:this.state.textFieldValue,required:!0,id:"outline-add-synonyms",variant:"outlined",onChange:function(t){return e.setState({textFieldValue:t.target.value})}}),i.createElement(lt.a,{style:{marginLeft:"10px",height:"40px",width:"30%",fontSize:"14px",color:"#fff"},variant:"contained",color:"primary",onClick:this.addSynonym},"Add Synonym")),i.createElement(L.a,{container:!0,item:!0,justify:"flex-end"})),i.createElement(L.a,{item:!0,xs:12,md:12,style:{paddingRight:"8px",marginTop:8}},i.createElement(L.a,{item:!0,xs:12,md:12,style:{marginLeft:"8px"}},i.createElement("ul",{style:{padding:"0",margin:"0"}},this.state.menuTabs.map(function(t){return i.createElement("li",{key:"".concat(t," tab"),style:{display:"inline-block",padding:"10px 25px 10px 0"}},i.createElement(E.a,{style:e.state.activeLink===t?{color:"#3ab77d",fontWeight:"bold",textDecoration:"underline"}:{color:"#929292",display:"block",fontSize:"1em"},onClick:function(){return e.handleMenuClick(t)}},t,"(",e.state.tabCount[t],")"))})))),i.createElement("hr",null),this.state.isLoading?i.createElement(L.a,{style:{textAlign:"center"}},i.createElement(d.GridHorizontalDivider,{height:"50px"}),i.createElement(qt.a,{size:100})):null,!this.state.isLoading&&this.state.activeLink?i.createElement(i.Fragment,null,i.createElement(L.a,{style:{maxHeight:"300px"}},i.createElement(d.GridHorizontalDivider,{height:"10px"}),i.createElement(He,{id:"modal-table-".concat(this.state.activeLink),key:"side-modal-table-".concat(this.state.activeLink),totalCount:10,update:function(){},updateSorting:this.handleChangeSorting,rows:this.rowDataFixer(),columns:this.getColumns(),disablePaging:!0,message:"",onClickRow:this.handleOnClickRow,onClickCell:function(t){var a=t&&t.row?t.row:void 0;if(a&&a._id){var n=e.state.rows,o=!0,i=!1,l=void 0;try{for(var s,r=n[Symbol.iterator]();!(o=(s=r.next()).done);o=!0){var c=s.value;if(c._id===a._id){c.action_chosen=a.action_chosen;break}}}catch(d){i=!0,l=d}finally{try{o||null==r.return||r.return()}finally{if(i)throw l}}e.setState({rows:n},e.formChanges)}},disableSelect:!0,disableSearch:!0,formattedColumns:this.getFormattedColumns(),columnExtensions:this.getColumnExtensions(),filterExtensions:this.getFilterExtensions(),defaultSort:this.state.defaultSorting,onFilterChange:this.handleFilterByColumn,onSortingChange:this.handleChangeSorting,onPageChange:function(){},ongPageSizeChange:function(){},defaultFilter:this.state.defaultFilters,currentPage:0,limit:0,isVirtualTable:!0,onSelectedRadio:function(t,a){e.formChanges(),console.log(t,a)}})),["Unapproved","Approved","Inactive"].includes(this.state.activeLink)?i.createElement(i.Fragment,null,i.createElement(d.GridHorizontalDivider,{height:"25px"}),i.createElement("div",null,i.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},i.createElement(lt.a,{style:{width:"130px"},onClick:this.handleSave,variant:"contained",color:"primary",disabled:!this.state.hasUnsavedChanges},"Save")))):null):null))}}]),t}(i.Component);function Xt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Zt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Xt(a,!0).forEach(function(t){Object(Ht.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Xt(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ea=function(e){function t(e){var a;Object(p.a)(this,t),(a=Object(_.a)(this,Object(v.a)(t).call(this,e))).escFunction=function(e){27===e.keyCode&&a.handleCloseSideModalBlock()},a.searchSynonyms=function(e,t,n,o,i){a.setState({loading_state:!0});var l=[],s=Object(Ft.cloneDeep)(e);s.push({columnName:"status",value:"unapproved"}),tt(s,t,n,o,i).then(function(e){e&&void 0===e.error?(l=a.generateDataForUnapprovedTable(e.result?e.result:[]),a.setState({code_data_all_unapproved:l,code_data_unapproved:l,total_count_unapproved:e.total&&e.total.count?e.total.count:0,loading_state:!1})):(l=a.generateDataForUnapprovedTable([]),a.setState({code_data_all_unapproved:l,page_unapproved:0,isModalOpen:!0,modalTitle:"Loading failed",modalMessage:"An error occured while loading the list of codes.",loading_state:!1}))}).catch(function(e){console.log("fetch synonyms table error",e),l=a.generateDataForUnapprovedTable([]),a.setState({code_data_all_unapproved:l,page_unapproved:0,isModalOpen:!0,modalTitle:"Loading failed",modalMessage:"An error occured while loading the list of codes.",loading_state:!1})})},a.handleSearch=function(e){var t=e.target.value,n=Object(y.a)(a);n.state.typingTimeout&&clearTimeout(n.state.typingTimeout),n.setState({global_filter:t,typing:!0,page:0,page_unapproved:0,typingTimeout:setTimeout(function(){n.setState({typing:!1,loading_state:!0,no_data_message:"Searching for ICD10 codes"}),"Unapproved Synonyms"===n.state.activeLink?n.searchSynonyms(n.state.default_filters_unapproved,n.state.global_filter,n.state.limit_unapproved,0,n.state.default_sorting_unapproved):"All Diagnosis"===n.state.activeLink&&n.setState({activeTableSkip:0,activeTableCurrentpage:0},n.getActive)},2e3)})},a.handleMenuClick=function(){var e=Object(g.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({activeLink:t});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.titleCase=function(e){for(var t=e.toLowerCase().split(" "),a=0;a<t.length;a++)t[a]=t[a][0].toUpperCase()+t[a].slice(1);return t.join(" ")},a.handleGetAction=function(e){var t=a.state.unapproved_codes_actions;return t&&t.some(function(t){return t._id===e})?t.filter(function(t){return t._id===e})[0].action_chosen:""},a.changePageUpdateUnapproved=function(e,t){a.setState({has_unsaved_changes:!1,loading_state:!0,no_data_message:"Searching for ICD10 codes"},a.handleCloseSideModalBlock),a.searchSynonyms(a.state.default_filters_unapproved,a.state.global_filter,e,t,a.state.default_sorting_unapproved)},a.handleChangeSortingUnapproved=function(e){a.setState({default_sorting_unapproved:e,loading_state:!0,no_data_message:"Searching for ICD10 codes"}),e&&e.length>0&&a.searchSynonyms(a.state.default_filters_unapproved,a.state.global_filter,a.state.limit_unapproved,a.state.limit_unapproved*a.state.page_unapproved,e)},a.handleResetAll=function(){console.log("RESET");var e=a.state.code_data_unapproved;if(e&&e.rows){var t=e.rows;t&&Array.isArray(t)&&(t.forEach(function(e){return e.action_chosen=""}),e.rows=t,a.setState({code_info_unapproved:e})),a.props.setICDSynonymAction([])}},a.handleFilterByColumnUnapproved=function(e){if(console.log("FILTER",e),e&&Array.isArray(e)&&e.some(function(e){return"reset"===e.columnName}))a.handleResetAll();else{var t=Object(y.a)(a);t.state.typingTimeout&&clearTimeout(t.state.typingTimeout),t.setState({default_filters_unapproved:e,page_unapproved:0,typingTimeout:setTimeout(function(){t.setState({loading_state:!0,no_data_message:"Searching for ICD10 codes"}),t.searchSynonyms(e,t.state.global_filter,t.state.limit_unapproved,0,t.state.default_sorting_unapproved)},2e3)})}},a.handlePageChangeUnapproved=function(e,t){a.setState({page_unapproved:e}),a.changePageUpdateUnapproved(a.state.limit,t)},a.handlePageSizeChangeUnapproved=function(e){a.state.total_count_unapproved>=1e5?a.setState({isPageSizeModal:!0}):(a.setState({limit_unapproved:e}),a.changePageUpdateUnapproved(e,e*a.state.page_unapproved))},a.handleRadioClick=function(e,t){var n=a.state.unapproved_codes_actions,o=a.state.code_data_unapproved.rows[e];n&&n.some(function(e){return e._id===o._id})&&(n=n.filter(function(e){return e._id!==o._id})),n.push({_id:o._id,action_chosen:t}),a.props.setICDSynonymAction(n)},a.handleSaveUnapproved=function(){var e=a.state.unapproved_codes_actions;if(e){var t=e.filter(function(e){return"approve"===e.action_chosen}).map(function(e){return e._id}),n=e.filter(function(e){return"disapprove"===e.action_chosen}).map(function(e){return e._id});console.log("APPROVE",t,"DISAPPROVE",n)}},a.handleClickRow=function(e){var t=a.state,n=t.activeTableRows,o=t.has_unsaved_changes;if(n&&n[e]!==a.state.code_info){var i=n[e];if(o){var l=a.state.side_modal_get_rows_trigger;a.setState({side_modal_get_rows_trigger:!l,confirm_modal_method:function(){return a.setState({has_unsaved_changes:!1},function(){return a.handleClickRow(e)})}})}else a.setState({code_info:i},a.handleOpenBlock)}},a.handleCloseSideModalBlock=function(){if(a.state.has_unsaved_changes){var e=a.state.side_modal_get_rows_trigger;a.setState({side_modal_get_rows_trigger:!e,confirm_modal_method:function(){return a.setState({has_unsaved_changes:!1},a.handleCloseSideModalBlock)}})}else a.setState({show_side_modal_block:"none",side_modal_block_mode:""},function(){return a.setState({code_info:{}})})},a.handleOpenBlock=function(){a.setState({show_side_modal_block:"block"})},a.getActive=Object(g.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loading_state:!0}),e.next=3,at(a.state.activeTableFilter,a.state.global_filter,a.state.activeTableLimit,a.state.activeTableSkip,a.state.activeTableSort).catch(function(e){return console.log(e)});case 3:(t=e.sent)&&(t.result.length>0&&t.result.map(function(e){e.synonyms=e&&e.synonyms&&Array.isArray(e.synonyms)&&e.synonyms.length>0?e.synonyms.length>2?"".concat(e.synonyms[0],", ").concat(e.synonyms[1],", ").concat(e.synonyms.length-2," more"):e.synonyms.join(", "):"N/A",e.full_synonyms=e&&e.synonyms&&Array.isArray(e.synonyms)&&e.synonyms.length>0?e.synonyms.join(", "):"N/A",e.status=e.status?a.titleCase(e.status):"N/A"}),a.setState({activeTableRows:t.result,activeTableCount:t.total.count,activeTableCurrentpage:a.state.activeTableCurrentpage>Math.ceil(t.total.count/a.state.activeTableLimit)-1?Math.ceil(t.total.count/a.state.activeTableLimit)-1:a.state.activeTableCurrentpage})),a.setState({loading_state:!1});case 6:case"end":return e.stop()}},e)})),a.handleActiveFilter=function(e){var t=Object(y.a)(a);t.state.typingTimeout&&clearTimeout(t.state.typingTimeout);var n={};e.map(function(e){"status"===e.columnName&&"all"===e.value||(n[e.columnName]={like:e.value,options:"i"})}),t.setState({activeTableSkip:0,activeTableCurrentpage:0,activeTableFilter:n,active_default_filter:e,typingTimeout:setTimeout(function(){t.setState({no_data_message:"No available data"}),t.getActive()},2e3)})},a.handleActiveSorting=function(e){var t=Zt({},e[0],{direction:e[0].direction.toUpperCase()});"synonyms"===t.columnName&&(t.columnName="main_synonym");var n=Object.values(t).join(" ");a.setState({activeTableSort:[n]},a.getActive)},a.handleActivePageSizeChange=function(e){a.setState({activeTableLimit:e},a.getActive)},a.handleActiveCurrentPageChange=function(e){a.setState({activeTableSkip:e*a.state.activeTableLimit,activeTableCurrentpage:e},a.getActive)},a.handleOpenConfirmationModalProps=function(e){console.log(e),a.setState({confirm_modal_open:!0,confirm_modal_title:"Save Changes",confirm_modal_message:l.a.createElement("span",null,"Are you sure you want to proceed with the following changes? ",l.a.createElement("br",null),l.a.createElement("br",null),e&&e.patch_synonyms&&e.patch_synonyms.some(function(e){return"active"===e.status})?l.a.createElement(l.a.Fragment,null,l.a.createElement("b",null,"Approve")," ",l.a.createElement("br",null),l.a.createElement("ul",null,e.patch_synonyms.map(function(e){return"active"===e.status?l.a.createElement(l.a.Fragment,null,l.a.createElement("li",null,e.title)):null})),l.a.createElement("br",null)):null,e&&e.patch_synonyms&&e.patch_synonyms.some(function(e){return"inactive"===e.status})?l.a.createElement(l.a.Fragment,null,l.a.createElement("b",null,"Disapprove"),l.a.createElement("br",null),l.a.createElement("ul",null,e.patch_synonyms.map(function(e){return"inactive"===e.status?l.a.createElement(l.a.Fragment,null,l.a.createElement("li",null,e.title)):null})),l.a.createElement("br",null)):null),confirm_modal_method:function(){var t=Object(g.a)(f.a.mark(function t(){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.handleSaveUnapprovedPayload(e);case 2:a.handleCloseSideModalBlock();case 3:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()})},a.handleConfirmationModalClose=function(){a.setState({unsaved_changes_modal:!1,confirm_modal_save_button:"Save",confirm_modal_open:!1})},a.handleSaveUnapprovedPayload=function(){var e=Object(g.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.handleConfirmationModalClose(),e.next=3,it(JSON.stringify(t)).catch(function(e){return console.log(e)});case 3:a.setState({has_unsaved_changes:!1}),a.getActive();case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.addSynonym=function(e,t,n){var o=wt(e,t,n);a.setState({loading_state:!0}),nt(JSON.stringify(o)).then(function(e){e.error?a.setState({snackbarOpen:!0,snackbarMessage:"Something went wrong. New Synoym was not added."}):a.setState(Zt({},a.state,{snackbarOpen:!0,snackbarMessage:"New Synonym has been successfully added."})),a.getActive(),a.setState({has_unsaved_changes:!1},a.handleCloseSideModalBlock)}).catch(function(e){if(e.message&&e.message.includes("\n")&&(e.message.match(/\n/g)||[]).length>=2&&(e.message.includes("UM58")||e.message.includes("UM59")||e.message.includes("UM60"))){var t=e.message.split("\n"),n=t[2].indexOf("["),o=t[2].indexOf("]"),i=null;if(n&&o){var s=t[2].substring(n,o+1),r=t[2].split("[")[0],c=t[2].split("]"),d=c[c.length-1];i=l.a.createElement("span",null,r,l.a.createElement("strong",null,s),d)}else i=l.a.createElement("span",null,t[2]);"Code UM59"===t[0]?a.setState({confirm_modal_open:!0,confirm_modal_message:i,confirm_modal_title:t[1],confirm_modal_save_button:"Activate Synonym",confirm_modal_method:function(){return a.handleActivateDuplicateInactiveSynonym(t[3])}}):a.setState({isModalOpen:!0,modalTitle:t[1],modalMessage:i})}else a.setState({snackbarOpen:!0,snackbarMessage:"Something went wrong. New Synoym was not added."});a.getActive(),console.log(e),a.setState({has_unsaved_changes:!1},a.handleCloseSideModalBlock)})},a.handleActivateDeactivate=function(){var e=Object(g.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,it(JSON.stringify(t)).catch(function(e){return console.log(e)});case 2:a.setState({has_unsaved_changes:!1}),a.getActive();case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleActivateDuplicateInactiveSynonym=function(e){if(a.handleConfirmationModalClose(),e){a.setState({loading_state:!0});var t=null;try{t=JSON.parse(e)}catch(o){console.log(o)}if(t){t.action_chosen=!0;var n=Ot([t]);a.handleActivateDeactivate(n)}}},a.handleOpenUnsavedChangesModal=function(){a.setState({unsaved_changes_modal:!0},function(){return a.setState({confirm_modal_open:!0,confirm_modal_message:a.createUnsavedChangesModalBody(),confirm_modal_title:"Are you sure you want to leave this page?"})})},a.createUnsavedChangesModalBody=function(){var e=a.state,t=e.side_modal_active_link,n=e.side_modal_rows;console.log("SIDE MODAL",t,n);var o=null,i=null;if("Unapproved"===t){var s=n.filter(function(e){return"approve"===e.action_chosen}),r=n.filter(function(e){return"disapprove"===e.action_chosen});o=s.length?a.getBodyList(s,"Approve"):null,i=r.length?a.getBodyList(r,"Disapprove"):null}else if("Approved"===t){var c=n.filter(function(e){return e.action_chosen});o=c.length?a.getBodyList(c,"Deactivate"):null}else if("Inactive"===t){var d=n.filter(function(e){return e.action_chosen});o=d.length?a.getBodyList(d,"Activate"):null}return l.a.createElement("span",null,"You still have unsaved changes. Do you want to save them? Your changes will be lost if you leave without saving.",l.a.createElement("br",null),o?l.a.createElement(l.a.Fragment,null,l.a.createElement("br",null),o):null,i?l.a.createElement(l.a.Fragment,null,l.a.createElement("br",null),i):null)},a.getBodyList=function(e,t){return l.a.createElement("span",null,e?l.a.createElement(l.a.Fragment,null,l.a.createElement("b",null,t)," ",l.a.createElement("br",null),l.a.createElement("ul",{key:t+" list"},e.map(function(e){return l.a.createElement("li",{key:e.title},e.title)})),l.a.createElement("br",null)):null)},a.saveChanges=Object(g.a)(f.a.mark(function e(){var t,n,o,i,l,s;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state,n=t.side_modal_active_link,o=t.side_modal_rows,a.setState({loading_state:!0}),"Unapproved"!==n){e.next=8;break}return i=xt(o),e.next=6,a.handleSaveUnapprovedPayload(i);case 6:e.next=18;break;case 8:if("Approved"!==n){e.next=14;break}return l=Tt(o),e.next=12,a.handleActivateDeactivate(l);case 12:e.next=18;break;case 14:if("Inactive"!==n){e.next=18;break}return s=Ot(o),e.next=18,a.handleActivateDeactivate(s);case 18:if(a.state.confirm_modal_method)try{a.state.confirm_modal_method()}catch(r){console.log(r)}a.handleConfirmationModalClose();case 20:case"end":return e.stop()}},e)})),a.discardAndContinue=function(){a.setState({has_unsaved_changes:!1},function(){if(a.state.confirm_modal_method)try{a.state.confirm_modal_method()}catch(e){console.log(e)}a.handleConfirmationModalClose()})};var n={formattedColumns:{},columnExtensions:[{columnName:"full_code",width:100,wordWrapEnabled:!0},{columnName:"diagnosis",width:200,wordWrapEnabled:!0},{columnName:"synonyms",width:200,wordWrapEnabled:!0},{columnName:"status",width:200,wordWrapEnabled:!0}],columns:[{name:"full_code",title:"ICD10 Code"},{name:"diagnosis",title:"Diagnosis"},{name:"synonyms",title:"Synonyms"},{name:"status",title:"Status"}],rows:[]},o={formattedColumns:{approve_disapprove_action:["action"],approve_disapprove_reset:["reset"]},filterExtensions:[{columnName:"action",filteringEnabled:!1,sortingEnabled:!1},{columnName:"reset",filteringEnabled:!1,sortingEnabled:!1}],columnExtensions:[{columnName:"full_code",width:130,wordWrapEnabled:!0},{columnName:"full_description",width:295,wordWrapEnabled:!0},{columnName:"title",width:175,wordWrapEnabled:!0},{columnName:"action",width:200,wordWrapEnabled:!0},{columnName:"reset",width:125,wordWrapEnabled:!0}],columns:[{name:"full_code",title:"ICD10 Code"},{name:"full_description",title:"Diagnosis"},{name:"title",title:"Synonyms"},{name:"action",title:"Action",sortingEnabled:!1},{name:"reset",title:"Reset",sortingEnabled:!1,resetColumn:!0}],rows:[]};return a.state={side_modal_rows:[],side_modal_get_rows_trigger:!1,side_modal_active_link:"All",unsaved_changes_modal:!1,has_unsaved_changes:!1,modalMessageMaxWidth:"400px",confirm_modal_save_button:"Save",icd_category_dropdown_choices:e.icdCategoryDropdown,icd_categories:e.icdCategories,no_data_message:"",confirm_modal_title:"",confirm_modal_message:"",confirm_modal_open:!1,action_after_confirm:function(){},invalid_fields:[],highlightedCodeFromList:-1,loading_state:!0,code_response:[],code_info:[],show_side_modal_block:"none",side_modal_block_mode:"",code_data:n,code_data_all:n,default_filters_unapproved:[],unapproved_codes_actions:e.icdSynonymAction?e.icdSynonymAction:[],code_data_unapproved:o,code_data_all_unapproved:o,default_sorting_unapproved:[{columnName:"full_code",direction:"asc"}],total_count_unapproved:0,page_unapproved:0,limit_unapproved:10,active_default_filter:[],block_title:"",global_filter:"",default_filters:[],default_sorting:[{columnName:"full_code",direction:"asc"}],default_clicked:"",isModalOpen:!1,isPageSizeModal:!1,modalTitle:"",modalMessage:"",action_after_info:function(){},totalCount:0,typing:!1,typingTimeout:0,page:0,limit:10,disableSaveButton:!1,clickSaveButton:!1,menuTabs:["All Diagnosis","Unapproved Synonyms"],activeLink:"All Diagnosis",synonyms:[],code_repo:[],activeTableRows:[],activeTableColumns:{columnExtensions:[{columnName:"full_code",width:130,wordWrapEnabled:!0},{columnName:"full_description",width:305,wordWrapEnabled:!0},{columnName:"synonyms",width:320,wordWrapEnabled:!0},{columnName:"status",width:200,wordWrapEnabled:!0}],columns:[{name:"full_code",title:"ICD10 Code"},{name:"full_description",title:"Diagnosis"},{name:"synonyms",title:"Synonyms"},{name:"status",title:"Status",staticDropdown:!0,staticDropdownOptions:[{value:"all",label:"All"},{value:"active",label:"Active"},{value:"deactivated",label:"Deactivated"},{value:"awaiting activation",label:"Awaiting activation"}]}],rows:[]},activeTableCount:0,activeTableCurrentpage:0,activeTableLimit:10,activeTableFilter:[],activeTableSort:[],activeTableSkip:0,snackbarOpen:!1,snackbarMessage:"",confirm_modal_method:function(){}},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){"All Diagnosis"===this.state.activeLink&&this.getActive(),document.addEventListener("keydown",this.escFunction,!1)}},{key:"componentDidUpdate",value:function(e,t){var a=this;t.activeLink!==this.state.activeLink&&("Unapproved Synonyms"===this.state.activeLink?(this.setState({default_sorting_unapproved:[{columnName:"full_code",direction:"asc"}]},function(){return a.searchSynonyms(a.state.default_filters_unapproved,a.state.global_filter,a.state.limit_unapproved,a.state.limit_unapproved*a.state.page_unapproved,a.state.default_sorting_unapproved)}),this.setState({has_unsaved_changes:!1},this.handleCloseSideModalBlock)):"All Diagnosis"===this.state.activeLink&&this.setState({activeTableSort:[]},this.getActive)),e.icdSynonymAction!==this.props.icdSynonymAction&&this.props.icdSynonymAction&&this.setState({unapproved_codes_actions:this.props.icdSynonymAction})}},{key:"generateDataForUnapprovedTable",value:function(e){var t={formattedColumns:{approve_disapprove_action:["action"],approve_disapprove_reset:["reset"]},filterExtensions:[{columnName:"action",filteringEnabled:!1,sortingEnabled:!1},{columnName:"reset",filteringEnabled:!1,sortingEnabled:!1}],columnExtensions:[{columnName:"full_code",width:130,wordWrapEnabled:!0},{columnName:"full_description",width:295,wordWrapEnabled:!0},{columnName:"title",width:175,wordWrapEnabled:!0},{columnName:"action",width:200,wordWrapEnabled:!0},{columnName:"reset",width:125,wordWrapEnabled:!0}],columns:[{name:"full_code",title:"ICD10 Code"},{name:"full_description",title:"Diagnosis"},{name:"title",title:"Synonyms"},{name:"action",title:"Action",sortingEnabled:!1},{name:"reset",title:"Reset",sortingEnabled:!1,resetColumn:!0}],rows:[]};for(var a in e){var n=e[a],o={};o._id=n._id,o.full_code=n.full_code,o.full_description=n.full_description,o.title=n.title,o.action_chosen=this.handleGetAction(o._id),t.rows.push(o)}return t}},{key:"renderSideModalBlock",value:function(){var e=this;return l.a.createElement(d.SideModalBlock,{handleClose:this.handleCloseSideModalBlock,showBlock:this.state.show_side_modal_block,blockPosition:"fixed",title:this.state.block_title},l.a.createElement(Qt,{activeLink:this.state.side_modal_active_link,setActiveLink:function(t){return e.setState({side_modal_active_link:t})},hasUnsavedChanges:this.state.has_unsaved_changes,setHasUnsavedChanges:function(t){return e.setState({has_unsaved_changes:t})},onClose:this.handleCloseSideModalBlock,data:this.state.code_info,addSynonym:function(t,a,n){e.addSynonym(t,a,n)},patchSynonyms:function(){var t=Object(g.a)(f.a.mark(function t(a){var n;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=xt(a),e.handleOpenConfirmationModalProps(n);case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),deactivateSynonyms:function(){var t=Object(g.a)(f.a.mark(function t(a){var n;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading_state:!0}),n=Tt(a),t.next=4,e.handleActivateDeactivate(n);case 4:e.handleCloseSideModalBlock();case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),activateSynonyms:function(){var t=Object(g.a)(f.a.mark(function t(a){var n;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading_state:!0}),n=Ot(a),t.next=4,e.handleActivateDeactivate(n);case 4:e.handleCloseSideModalBlock();case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),getRowsForUnsavedChanges:function(t){return e.setState({side_modal_rows:t},e.handleOpenUnsavedChangesModal)},getRowsTrigger:this.state.side_modal_get_rows_trigger,changeTabUnsaved:function(t){var a=e.state.side_modal_get_rows_trigger;e.setState({side_modal_get_rows_trigger:!a,confirm_modal_method:function(){return e.setState({side_modal_active_link:t})}})}}))}},{key:"render",value:function(){var e=this,t=this.props.classes;return l.a.createElement("div",null,this.state.loading_state?l.a.createElement(qe.a,null):null,l.a.createElement(L.a,{container:!0},l.a.createElement(L.a,{container:!0,item:!0,xs:12,md:12,style:{paddingLeft:"37px"}},l.a.createElement(L.a,{container:!0},l.a.createElement(L.a,{item:!0,xs:12,md:12},l.a.createElement(V.a,{style:{width:"100%",backgroundColor:"white"},id:"code_search",placeholder:"Search code, description, or synonym",label:"",margin:"none",fullWidth:!0,variant:"outlined",value:this.state.global_filter,onKeyUp:function(t){13==(t.keyCode||t.which)&&e.state.typing&&e.state.global_filter&&(e.state.typingTimeout&&clearTimeout(e.state.typingTimeout),e.setState({page_unapproved:0,loading_state:!0,typing:!1,no_data_message:"Searching for ICD10 codes"}),"Unapproved Synonyms"===e.state.activeLink?e.searchSynonyms(e.state.default_filters_unapproved,e.state.global_filter,e.state.limit_unapproved,0,e.state.default_sorting_unapproved):"All Diagnosis"===e.state.activeLink&&e.setState({activeTableSkip:0,activeTableCurrentpage:0},e.getActive))},inputProps:{"aria-label":"bare"},onChange:this.handleSearch,InputProps:{startAdornment:l.a.createElement(z.a,{position:"start"},l.a.createElement(Ge.a,{style:{color:"rgba(54, 54, 54, 0.4)"}}))}})),l.a.createElement(L.a,{item:!0,xs:12,md:12,style:{paddingRight:"8px",marginTop:15}},l.a.createElement(L.a,{item:!0,xs:12,md:12,style:{marginLeft:"15px"}},l.a.createElement("ul",{style:{padding:"0",margin:"0"}},this.state.menuTabs.map(function(a,n){return l.a.createElement("li",{key:"".concat(a,"-").concat(n),className:t.menuList},l.a.createElement(E.a,{className:e.state.activeLink===a?t.LinkActive:t.menuLink,onClick:function(){return e.handleMenuClick(a)}},a))}))),l.a.createElement(L.a,{item:!0,xs:6,md:6})),"All Diagnosis"===this.state.activeLink?l.a.createElement(l.a.Fragment,null,l.a.createElement(d.GridHorizontalDivider,{height:"30px"}),l.a.createElement(L.a,{style:{overflow:"auto"}},l.a.createElement(He,{id:"tab-all",totalCount:this.state.activeTableCount,update:this.changePageUpdateUnapproved,updateSorting:this.handleActiveSorting,rows:this.state.activeTableRows,columns:this.state.activeTableColumns.columns,message:this.state.global_filter?"No available data":this.state.no_data_message,onClickRow:this.handleClickRow,columnExtensions:Object.keys(this.state.activeTableColumns).length>0?this.state.activeTableColumns.columnExtensions:[],disableSelect:!0,disableSearch:!0,onFilterChange:this.handleActiveFilter,onSortingChange:this.handleActiveSorting,onPageChange:this.handleActiveCurrentPageChange,ongPageSizeChange:this.handleActivePageSizeChange,defaultFilter:this.state.active_default_filter,currentPage:this.state.activeTableCurrentpage,limit:this.state.activeTableLimit,pageSizes:[10,25,50,100],disableIntegratedFiltering:!0}))):null,"Unapproved Synonyms"===this.state.activeLink?l.a.createElement(l.a.Fragment,null,l.a.createElement(d.GridHorizontalDivider,{height:"30px"}),l.a.createElement(L.a,{style:{minHeight:690,overflow:"auto"}},l.a.createElement(He,{id:"tab-unapproved",totalCount:this.state.total_count_unapproved,update:this.changePageUpdateUnapproved,updateSorting:this.handleChangeSortingUnapproved,rows:Object.keys(this.state.code_data_unapproved).length>0?this.state.code_data_unapproved.rows:[],columns:Object.keys(this.state.code_data_unapproved).length>0?this.state.code_data_unapproved.columns:[],message:this.state.global_filter?"No available data":this.state.no_data_message,onClickRow:function(){},disableSelect:!0,disableSearch:!0,formattedColumns:Object.keys(this.state.code_data_unapproved).length>0?this.state.code_data_unapproved.formattedColumns:{},columnExtensions:Object.keys(this.state.code_data_unapproved).length>0?this.state.code_data_unapproved.columnExtensions:[],filterExtensions:Object.keys(this.state.code_data_unapproved).length>0?this.state.code_data_unapproved.filterExtensions:[],onFilterChange:this.handleFilterByColumnUnapproved,onSortingChange:this.handleChangeSortingUnapproved,onPageChange:this.handlePageChangeUnapproved,ongPageSizeChange:this.handlePageSizeChangeUnapproved,defaultFilter:this.state.default_filters_unapproved,currentPage:this.state.page_unapproved,limit:this.state.limit_unapproved,pageSizes:[10,25,50,100],approveDisapproveItems:this.state.unapproved_codes_actions,onSelectedRadio:function(t,a){e.handleRadioClick(t,a)},onSelectedReset:function(t){console.log("ROW",t,e.state.code_data_unapproved.rows[t]);var a=e.state.code_data_unapproved.rows[t];if(a._id){var n=e.state.unapproved_codes_actions.filter(function(e){return e._id!==a._id});e.props.setICDSynonymAction(n)}}}),l.a.createElement(d.GridHorizontalDivider,{height:"30px"}),l.a.createElement("div",null,l.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},l.a.createElement(lt.a,{style:{width:"130px"},onClick:this.handleSaveUnapproved,variant:"contained",color:"primary",disabled:!this.state.unapproved_codes_actions||!this.state.unapproved_codes_actions.length},this.state.confirm_modal_save_button))))):null))),this.renderSideModalBlock(),l.a.createElement(d.MsgModal,{onClose:function(){e.setState({isModalOpen:!1})},title:this.state.modalTitle,isModalOpen:this.state.isModalOpen,message:this.state.modalMessage,messageMaxWidth:this.state.modalMessageMaxWidth}),l.a.createElement(Vt.a,{titleFontSize:16,isModalOpen:this.state.confirm_modal_open,onClose:this.handleConfirmationModalClose,message:this.state.confirm_modal_message,title:this.state.confirm_modal_title,buttons:this.state.unsaved_changes_modal?l.a.createElement(L.a,{container:!0,justify:"center",alignItems:"center"},l.a.createElement(L.a,{item:!0,xs:5},l.a.createElement(lt.a,{onClick:this.saveChanges,style:{margin:"0 10px",minHeight:"42px",minWidth:"150px",fontSize:14},variant:"contained",color:"primary"},"Save Changes")),l.a.createElement(L.a,{item:!0,xs:7},l.a.createElement(lt.a,{onClick:this.discardAndContinue,style:{margin:"0 10px",minHeight:"42px",minWidth:"200px",fontSize:14},variant:"outlined",color:"secondary"},"Discard and Continue"))):l.a.createElement(L.a,{container:!0,justify:"center",alignItems:"center"},l.a.createElement(L.a,{item:!0,xs:6},l.a.createElement(lt.a,{onClick:this.handleConfirmationModalClose,style:{margin:"0 10px",minHeight:"42px",minWidth:"150px",fontSize:14},variant:"outlined",color:"secondary"},"Cancel")),l.a.createElement(L.a,{item:!0,xs:6},l.a.createElement(lt.a,{onClick:this.state.confirm_modal_method,style:{margin:"0 10px",minHeight:"42px",minWidth:"150px",fontSize:14},variant:"contained",color:"primary"},this.state.confirm_modal_save_button?this.state.confirm_modal_save_button:"Save")))}),l.a.createElement(Yt.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:!!this.state.snackbarMessage,autoHideDuration:6e3,message:this.state.snackbarMessage,onClose:function(){e.setState({snackbarMessage:null})}}))}}]),t}(l.a.Component),ta=new Ke.a;ta.getAccessToken();var aa=function(e,t,a,n,o){var i={},l="doctor-specialization/search",s={};a&&Array.isArray(a)&&a.length>0&&(s.where={},a.forEach(function(e){"status"===e.columnName&&"all"===e.value?console.log("do nothing"):"effectivity_date"!==e.columnName&&"expiry_date"!==e.columnName?s.where[e.columnName]={like:e.value,options:"i"}:s.where[e.columnName]=e.value})),o&&Array.isArray(o)&&o.length>0&&(s.order="".concat(o[0].columnName," ").concat(o[0].direction)),t&&(s.skip=t),e&&(s.limit=e),n&&(i.search=n),Object.entries(s).length>0&&(i.filter=JSON.stringify(s));for(var r=0,c=0,d=Object.keys(i);c<d.length;c++){var u=d[c];l+=r?"&":"?",l+="".concat(u,"=").concat(i[u]),r+=1}var m={method:"GET"};return ta.getAccessToken()?ta.call(m,l,!0):ta.fetchAccessToken().then(function(){return ta.call(m,l,!0)})},na=function(e,t){var a={method:"PUT",body:e};return ta.getAccessToken()?ta.call(a,"doctor-specialization/edit/".concat(t),!0):ta.fetchAccessToken().then(function(){return ta.call(a,"doctor-specialization/edit/".concat(t),!0)})},oa=!1,ia=!1,la={formattedColumns:{},columnExtensions:[{columnName:"code",width:100,wordWrapEnabled:!0},{columnName:"description",width:300,wordWrapEnabled:!0},{columnName:"effectivity_date",width:180,wordWrapEnabled:!0},{columnName:"expiry_date",width:180,wordWrapEnabled:!0},{columnName:"status",width:200,wordWrapEnabled:!0}],columns:[{name:"code",title:"Code"},{name:"description",title:"Description"},{name:"effectivity_date",title:"Effectivity Date",datePicker:!0},{name:"expiry_date",title:"Expiration Date",datePicker:!0},{name:"status",title:"Status",staticDropdown:!0,staticDropdownOptions:[{value:"all",label:"All"},{value:"active",label:"Active"},{value:"deactivated",label:"Deactivated"},{value:"awaiting activation",label:"Awaiting activation"}]}]},sa=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(_.a)(this,Object(v.a)(t).call(this,e))).requiredFields=void 0,a.excludeFields=void 0,a.escFunction=function(e){27===e.keyCode&&a.handleCloseSideModalBlock()},a.initialData=function(){a.setState({no_data_message:"Searching for Doctor Specialization Codes"}),a.searchCode(10,0,a.state.default_filters,a.state.global_filter,a.state.default_sorting)},a.searchCode=function(e,t,n,o,i){aa(e,t,n,o,i).then(function(e){a.setState({no_data_message:"No available data"}),e&&void 0===e.error?a.setState({code_response:e,code_data:a.rowDataFixer(e.result?e.result:[]),loading_state:!1,totalCount:e.total&&e.total.count?e.total.count:0}):a.setState({code_response:[],loading_state:!1,isModalOpen:!0,modalTitle:"Loading failed",modalMessage:"An error occured while loading the list of codes."})}).catch(function(e){a.setState({no_data_message:"No available data",code_response:[],loading_state:!1,isModalOpen:!0,modalTitle:"Loading failed",modalMessage:e&&e.message?e.message:"An error occured while loading the list of codes.",page:0})})},a.patchCode=function(e){var t=At(e);t&&t._id&&t.code&&(a.setState({loading_state:!0}),na(JSON.stringify(t),t._id).then(function(e){a.setState({loading_state:!1,no_data_message:"No available data"}),e&&void 0===e.error&&void 0!==e.message?(a.changePageUpdate(a.state.limit,a.state.limit*a.state.page),a.setState({disableSaveButton:!0,isModalOpen:!0,modalTitle:"Success",modalMessage:e.message?e.message:"Successfully edited a Doctor Specialization code."})):a.setState({isModalOpen:!0,modalTitle:"Failed",modalMessage:"Something went wrong while saving!"})}).catch(function(e){a.setState({isModalOpen:!0,modalTitle:"Error",modalMessage:e&&e.message?e.message:"Something went wrong while saving.",loading_state:!1})}))},a.changePageUpdate=function(e,t){a.handleCloseSideModalBlock(),a.setState({loading_state:!0,no_data_message:"Searching for Doctor Specialization codes"}),a.searchCode(e,t,a.state.default_filters,a.state.global_filter,a.state.default_sorting)},a.handleChangeSorting=function(e){a.setState({default_sorting:e,loading_state:!0,no_data_message:"Searching for Doctor Specialization codes"}),e&&e.length>0&&a.searchCode(a.state.limit,a.state.page*a.state.limit,a.state.default_filters,a.state.global_filter,e)},a.handleFilterByColumn=function(e){var t=Object(y.a)(a);t.state.typingTimeout&&clearTimeout(t.state.typingTimeout),t.setState({default_filters:e,typing:!1,page:0,typingTimeout:setTimeout(function(){t.setState({loading_state:!0,no_data_message:"Searching for Doctor Specialization codes"}),t.searchCode(t.state.limit,0,e,t.state.global_filter,t.state.default_sorting)},2e3)})},a.handleSearch=function(e){var t=e.target.value,n=Object(y.a)(a);n.state.typingTimeout&&clearTimeout(n.state.typingTimeout),n.setState({global_filter:t,typing:!0,page:0,typingTimeout:setTimeout(function(){n.setState({loading_state:!0,typing:!1,limit:10,no_data_message:"Searching for Doctor Specialization codes"}),n.searchCode(n.state.limit,0,n.state.default_filters,n.state.global_filter,n.state.default_sorting)},2e3)})},a.handleClickRow=function(e){if(!oa){var t=a.state.code_data;if(t&&t[e]){var n=Mt(Object(Ft.cloneDeep)(t[e]));a.checkFields(n,!0),a.setState({code_info:n},function(){return a.handleChangeSideModalBlockMode("view")})}}},a.handlePageChange=function(e,t){a.setState({page:e}),a.changePageUpdate(a.state.limit,t)},a.handlePageSizeChange=function(e){a.state.totalCount>=1e5?a.setState({isPageSizeModal:!0}):(a.setState({limit:e}),a.changePageUpdate(e,e*a.state.page))},a.handleCloseSideModalBlock=function(){a.setState({show_side_modal_block:"none",side_modal_block_mode:"",code_info:Dt()})},a.handleChangeSideModalBlockMode=function(e){var t="";if(e&&"edit"===e){if(ia)return;t="Edit ".concat(a.state.block_title)}else e&&"view"===e&&a.state.code_info?t=a.state.code_info.code?a.state.code_info.code:"":e&&"add"===e&&(t="Add ICD10 Code");a.setState({side_modal_block_mode:e,block_title:t},a.handleOpenBlock)},a.handleOpenBlock=function(){a.setState({show_side_modal_block:"block"})},a.handleInvalidFieldsPrompt=function(){a.setState({isModalOpen:!0,modalTitle:"Incomplete/Invalid Fields",modalMessage:"Please complete the form before proceeding."})},a.checkFields=function(e,t){if(a.setState({loading_state:!0}),e){var n=a.getInvalidFields(e,t);if(n&&0!==n.length)a.handleInvalidFieldsPrompt();else{if(a.state.disableSaveButton||!a.state.clickSaveButton)return;"edit"===a.state.side_modal_block_mode?a.setState({clickSaveButton:!1,confirm_modal_message:"Are you sure you want to edit this Doctor Specialization code?",confirm_modal_open:!0,confirm_modal_title:"Confirm edit Doctor Specialization code",action_after_confirm:function(){return a.patchCode(e)}}):"add"===a.state.side_modal_block_mode&&a.setState({clickSaveButton:!1,confirm_modal_message:"Are you sure you want to add this Doctor Specialization code?",confirm_modal_open:!0,confirm_modal_title:"Confirm add Doctor Specialization code",action_after_confirm:function(){}})}}},a.getInvalidFields=function(e,t){var n=[],o=[],i={};void 0!==a.excludeFields&&(i=a.excludeFields);var l=Object.keys(i);Object.keys(e).forEach(function(i){a.requiredFields&&a.requiredFields.includes(i)&&!l.includes(i)&&!e[i]&&(t?o.push(i):n.push(i))});var s=q()(e.effectivity_date),r=q()(e.expiry_date);return e&&e.effectivity_date&&e.expiry_date&&s.isValid()&&r.isValid()&&s.startOf("day").diff(r.startOf("day"))>0&&(t?o.push("effectivity_date"):n.push("effectivity_date")),o&&0!==o.length?a.state.disableSaveButton||a.setState({disableSaveButton:!0}):a.setState({disableSaveButton:!1}),a.setState({loading_state:!1,invalid_fields:n}),n},a.requiredFields=Je.a.DoctorSpecialization.editOrAdd.checkInvalidFields,a.excludeFields=Je.a.DoctorSpecialization.editOrAdd.excludeFields,a.state={no_data_message:"",confirm_modal_title:"",confirm_modal_message:"",confirm_modal_open:!1,action_after_confirm:function(){},invalid_fields:[],code_response:[],code_info:Dt(),show_side_modal_block:"none",side_modal_block_mode:"",block_title:"",loading_state:!0,code_data:[],global_filter:"",default_filters:[],default_sorting:[{columnName:"code",direction:"asc"}],isModalOpen:!1,isPageSizeModal:!1,modalTitle:"",modalMessage:"",totalCount:0,typing:!1,typingTimeout:0,page:0,limit:10,disableSaveButton:!1,clickSaveButton:!1},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.initialData(),document.addEventListener("keydown",this.escFunction,!1)}},{key:"rowDataFixer",value:function(e){var t=function(e){return e&&q()(e).isValid()?q()(e).format("LL"):"N/A"},a=function(e){if(!e)return"N/A";for(var t=e.toLowerCase().split(" "),a=0;a<t.length;a++)t[a]=t[a][0].toUpperCase()+t[a].slice(1);return t.join(" ")},n=[];return Array.isArray(e)&&e.length>0&&(n=e.map(function(e){return e?{_id:e._id,code:e.code?e.code:"N/A",description:e.description?e.description:"N/A",effectivity_date:t(e.effectivity_date),expiry_date:t(e.expiry_date),status:e.status?a(e.status):"N/A",date_updated:e.date_updated?e.date_updated:"N/A"}:Dt()})),n}},{key:"renderSideModalBlock",value:function(){var e=this;return l.a.createElement(d.SideModalBlock,{blockPosition:"fixed",title:this.state.block_title,editIconDescription:"Edit Specialization",showBlock:this.state.show_side_modal_block,handleClose:this.handleCloseSideModalBlock,sideModalBlockMode:this.state.side_modal_block_mode,changeMode:this.handleChangeSideModalBlockMode},this.state.side_modal_block_mode?l.a.createElement(d.SideModalBody,{verticalSpacing:"15px",formFields:this.state.code_info,invalidFields:this.state.invalid_fields,handleClose:this.handleCloseSideModalBlock,refreshData:function(t){e.setState({code_info:t},function(){return e.checkFields(t,!0)})},handleSave:function(t){e.state.side_modal_block_mode&&e.setState({clickSaveButton:!0},function(){return e.checkFields(t)})},formName:"DoctorSpecialization",mode:this.state.side_modal_block_mode?this.state.side_modal_block_mode:"",checkBoxWithDropDownFieldsInitState:!(!this.state.code_info||!this.state.code_info.gender_limited),disableSaveButton:this.state.disableSaveButton,datePairField1MaxDate:this.state.code_info&&this.state.code_info.expiry_date&&q()(this.state.code_info.expiry_date).isValid()?q()(this.state.code_info.expiry_date).format("MM-DD-YY").toString():void 0,datePairField2MinDate:this.state.code_info&&this.state.code_info.effectivity_date&&q()(this.state.code_info.effectivity_date).isValid()?q()(this.state.code_info.effectivity_date).format("MM-DD-YY").toString():void 0}):null)}},{key:"render",value:function(){var e=this,t=this.props.classes;return l.a.createElement("div",null,this.state.loading_state?l.a.createElement(qe.a,null):null,l.a.createElement(L.a,{container:!0},l.a.createElement(L.a,{container:!0,style:{paddingLeft:"37px"}},l.a.createElement(L.a,{item:!0,xs:12,md:10},l.a.createElement(V.a,{style:{width:"100%",backgroundColor:"white"},id:"code_search",placeholder:"Search a code or description",label:"",margin:"none",fullWidth:!0,variant:"outlined",value:this.state.global_filter,inputProps:{"aria-label":"bare"},onChange:this.handleSearch,InputProps:{startAdornment:l.a.createElement(z.a,{position:"start"},l.a.createElement(Ge.a,{style:{color:"rgba(54, 54, 54, 0.4)"}}))},onKeyUp:function(t){13==(t.keyCode||t.which)&&e.state.typing&&e.state.global_filter&&(e.state.typingTimeout&&clearTimeout(e.state.typingTimeout),e.setState({loading_state:!0,typing:!1,limit:10,no_data_message:"Searching for Doctor Specialization codes"}),e.searchCode(e.state.limit,0,e.state.default_filters,e.state.global_filter,e.state.default_sorting))}})),l.a.createElement(L.a,{container:!0,justify:"flex-end",item:!0,xs:8,md:2,style:{paddingRight:"15px",marginTop:15,textAlign:"center"}},l.a.createElement(x.a,{icon:T.n,className:t.plusIcon}),l.a.createElement(E.a,{className:t.addACode,onClick:function(){oa||e.setState({block_title:"Add ICD10 Code",code_info:Dt(),disableSaveButton:!0},function(){return e.handleChangeSideModalBlockMode("add")})}},"Add a Code")),l.a.createElement(d.GridHorizontalDivider,{height:"30px"}),l.a.createElement(L.a,{style:{minHeight:690,overflow:"auto"}},l.a.createElement(He,{id:"tab-all",totalCount:this.state.totalCount,rows:Object.keys(this.state.code_data).length>0?this.state.code_data:[],columns:la.columns,message:this.state.global_filter?"No available data":this.state.no_data_message,onClickRow:this.handleClickRow,disableSelect:!0,disableSearch:!0,formattedColumns:la.formattedColumns,columnExtensions:la.columnExtensions,onFilterChange:this.handleFilterByColumn,updateSorting:this.handleChangeSorting,update:function(){},disableIntegratedSorting:!0,disableIntegratedFiltering:!0,onPageChange:this.handlePageChange,ongPageSizeChange:this.handlePageSizeChange,defaultFilter:this.state.default_filters,currentPage:this.state.page,limit:this.state.limit,pageSizes:[10,25,50,100]})))),this.renderSideModalBlock(),l.a.createElement(d.MsgModal,{onClose:function(){e.setState({isModalOpen:!1})},title:this.state.modalTitle,isModalOpen:this.state.isModalOpen,message:this.state.modalMessage}),l.a.createElement(ft,{onClose:function(){return e.setState({confirm_modal_open:!1})},title:this.state.confirm_modal_title,isModalOpen:this.state.confirm_modal_open,submitType:"confirm",onSubmit:function(){e.state.action_after_confirm&&e.state.action_after_confirm()},message:this.state.confirm_modal_message}))}}]),t}(l.a.Component),ra=a(317),ca=a(17),da=a.n(ca);a.d(t,"LookupPage",function(){return pa}),a.d(t,"mapStateToProps",function(){return ha}),a.d(t,"mapDispatchToProps",function(){return _a});var ua=["Codes","Locations","Industries"],ma={Codes:[{name:"ICD-10",label:""},{name:"CPT",label:""},{name:"Doctor Specialization",label:""},{name:"Diagnosis - Procedures Matrix",label:""},{name:"ICD10 Synonyms",label:""}],Locations:[{name:"Regions",label:""},{name:"Provinces",label:""},{name:"Municipalities and Cities",label:""}],Industries:[{name:"Agriculture, Hunting, Forestry And Fishing Sector",label:""},{name:"Industry Sector",label:""},{name:"Service Sector",label:""}]},fa=Object(u.a)(function(){return{borderedGrid:{maxHeight:715,overflow:"auto",paddingRight:"15px",paddingLeft:"15px",borderRight:"1px solid #C3C3C3"},plusIcon:{color:"#3AB77D",cursor:"pointer",fontSize:14,marginRight:"15px"},addACode:{fontSize:14,fontWeight:700,color:"rgba(58, 183, 125, 1)",cursor:"pointer"},codeHeader:{color:"#272E4C",textAlign:"left",opacity:.6,letterSpacing:0,textAlignLast:"left",fontSize:"12px"},codeHeaderValue:{color:"#272E4C",textAlign:"left",opacity:1,letterSpacing:0,textAlignLast:"left",fontSize:"16px",fontWeight:500},codeListItemsRoot:{flex:"none"},codeListItems:{fontSize:"14px",color:"#272E4C",textAlign:"left",opacity:1,letterSpacing:0,textAlignLast:"left","&:hover":{textDecoration:"underline",color:"#3AB77D",fontWeight:600},"&$selected":{textDecoration:"underline",color:"#3AB77D",fontWeight:600}},codeListItemsSelected:{fontSize:"14px",textDecoration:"underline",color:"#3AB77D",fontWeight:600,textAlign:"left",opacity:1,letterSpacing:0,textAlignLast:"left"},menuList:{display:"inline-block",padding:"10px 80px 10px 0"},menuLink:{color:"#929292",display:"block",fontSize:"1.10em","&:hover":{color:"#3ab77d"}},LinkActive:{color:"#3ab77d",fontWeight:"bold",textDecoration:"underline"}}}),ga=Object(u.a)(function(){return{gridContainer:{backgroundColor:""},main:{backgroundColor:"#F5F7FB",padding:"32px 24px"},headerTitle:{fontSize:"1.5rem",fontWeight:800},sideBarContainer:{borderRight:"1px solid #ccc",paddingRight:"25px"},menuList:{display:"inline-block",padding:"10px 80px 10px 0"},menuLink:{color:"#929292",display:"block",fontSize:"1.10em","&:hover":{color:"#3ab77d"}},LinkActive:{color:"#3ab77d",fontWeight:"bold",textDecoration:"underline"}}}),pa=function(){var e=Object(i.useState)("Codes"),t=Object(o.a)(e,2),a=t[0],s=t[1],r=Object(i.useState)(0),c=Object(o.a)(r,2),u=c[0],m=c[1],f=Object(i.useState)("ICD-10"),g=Object(o.a)(f,2),p=g[0],h=g[1],_=Object(i.useState)([]),v=Object(o.a)(_,2),y=v[0],b=v[1],S=Object(i.useState)(void 0),C=Object(o.a)(S,2),k=C[0],w=C[1],x=Object(i.useState)([]),T=Object(o.a)(x,2),O=T[0],D=T[1],M=Object(i.useState)([]),A=Object(o.a)(M,2),F=A[0],P=A[1],j=Object(i.useState)([]),B=Object(o.a)(j,2),I=B[0],N=B[1],z=Object(i.useState)(void 0),U=Object(o.a)(z,2),R=U[0],W=U[1],Y=fa(),V=ga();return l.a.createElement("div",{className:V.main},l.a.createElement(L.a,{container:!0,justify:"space-between",alignItems:"center",spacing:0,className:V.gridContainer},l.a.createElement(L.a,{item:!0},l.a.createElement(H.a,{className:V.headerTitle},"Lookup"))),l.a.createElement(d.GridHorizontalDivider,{height:"15px"}),l.a.createElement(L.a,{item:!0,xs:6},l.a.createElement("ul",{style:{padding:"0",margin:"0"}},ua.map(function(e,t){return l.a.createElement("li",{key:e,className:V.menuList},l.a.createElement(E.a,{className:da()(V.menuLink,u===t?V.LinkActive:null),onClick:function(){return function(e,t){s(e),m(t)}(e,t)}},e))}))),l.a.createElement(L.a,{container:!0,justify:"space-between",spacing:0},l.a.createElement(d.GridHorizontalDivider,{height:"30px"}),l.a.createElement(L.a,{item:!0,xs:2,className:V.sideBarContainer},l.a.createElement(ra.a,{items:ma[a],activeItems:function(e){return h(e)},reset:a})),"ICD-10"===p&&"Codes"===a?l.a.createElement(L.a,{item:!0,xs:12,md:10},l.a.createElement(jt,{classes:Y,icdCategories:y,setICDCategories:b,icdCategoryDropdown:k,setICDCategoryDropdown:w})):"CPT"===p&&"Codes"===a?l.a.createElement(L.a,{item:!0,xs:12,md:10},l.a.createElement(Wt,{classes:Y,cptCategories:F,setCPTCategories:P,cptCategoryRanges:I,setCPTCategoryRanges:N,cptCategoryDropdown:R,setCPTCategoryDropdown:W})):"ICD10 Synonyms"===p&&"Codes"===a?l.a.createElement(L.a,{item:!0,xs:12,md:10},l.a.createElement(ea,{classes:Y,icdSynonymAction:O,setICDSynonymAction:function(e){return D(Object(n.a)(e))}})):"Doctor Specialization"===p&&"Codes"===a?l.a.createElement(L.a,{item:!0,xs:12,md:10},l.a.createElement(sa,{classes:Y})):null))},ha=function(e){return e.lookup},_a=function(e){return{Map:Object(s.bindActionCreators)(c,e)}}}}]);
//# sourceMappingURL=8.e23b31fe.chunk.js.map
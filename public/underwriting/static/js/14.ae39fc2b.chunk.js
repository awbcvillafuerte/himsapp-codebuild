(window.webpackJsonpunderwriting=window.webpackJsonpunderwriting||[]).push([[14],{849:function(e,t,a){"use strict";a.r(t);var n=a(206),o=a(719),r=a(42),c=a(0),i=a.n(c),l=a(120),s=a(77),p=a(41),u=a(126),d=a(742),m=a(730),f=a(732),b=a(50),h=a(846),g=a(843),v=a(771),y=a(775),O=a(774),j=a(772),S=a(773),_=a(34),E=function(e){var t=e.classes,a=e.summaryPackages,n=e.summaryBenefits,o=e.selectedSummaryCategory,r=e.SetSelectedSummaryPackage,l=e.SetSelectedSummaryCategory;return Object(c.useEffect)(function(){if(a.length>0){var e=a[0];r("".concat(e.tree_path[3])),l("".concat(e.code))}},[]),i.a.createElement(_.a,{container:!0,className:t.gridContainer},i.a.createElement(_.a,{item:!0,xs:12},i.a.createElement(b.a,{className:t.sectionTitle},"Summary Per Plan Type"),i.a.createElement(h.a,{value:o,className:t.tabs},a.length>0?a.map(function(e,a){return i.a.createElement(g.a,{key:a,value:e.code,label:e.name,className:t.tab,onClick:function(){r("".concat(e.tree_path[3])),l("".concat(e.code))}})}):null),i.a.createElement(v.a,{className:t.table},i.a.createElement(j.a,null,i.a.createElement(S.a,null,i.a.createElement(O.a,{className:t.columnCategory}),i.a.createElement(O.a,{className:t.columnBenefit},"Benefit"))),i.a.createElement(y.a,null,n.length>0?n.map(function(e,a){return e.child_nodes&&e.child_nodes.length>0?e.child_nodes.map(function(n,o){return i.a.createElement(S.a,{className:a%2?t.tableRowEven:t.tableRowOdd,key:o},0===o?i.a.createElement(O.a,{component:"th",scope:"row",rowSpan:e.child_nodes.length},e.name):null,i.a.createElement(O.a,null,n.name))}):null}):null))))},k=a(96),C=function(e){return{payload:e,type:k.a.ApproveProposal.SetBenefitNodes}},w=function(e){return{payload:e,type:k.a.ApproveProposal.SetClientData}},P=function(e){return{payload:e,type:k.a.ApproveProposal.SetSelectedSummaryPackage}},x=function(e){return{payload:e,type:k.a.ApproveProposal.SetSelectedSummaryCategory}},B=function(e){return{payload:e,type:k.a.ApproveProposal.SetSelectedPlanType}},D=function(e){return{payload:e,type:k.a.ApproveProposal.SetSelectedPlanPackage}},F=function(e){return{payload:e,type:k.a.ApproveProposal.SetSelectedBenefitCategory}},N=a(664),A=a(256),T=a(125),R=a(202),W=a(257),z=a(842),M=a(663),I=a(668),L=a(258),Y=a(723),G=a.n(Y),H=Object(p.a)(function(e){return{root:{flexWrap:"wrap"},dialog:{align:"center",justify:"center",width:"100%",fontFamily:"usual"},dialogContent:{paddingTop:"0px"},dialogContentText:{fontSize:"0.875rem"},container:{paddingRight:"15px",paddingLeft:"15px",width:"450px"},dialogTitle:{marginTop:e.spacing(2),marginBottom:e.spacing(2),fontSize:"16px",color:"#272E4C",fontWeight:700},dialogContentContainer:{width:"100%"},dialogAction:{marginBottom:e.spacing(3),marginTop:e.spacing(2),justifyContent:"center"},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}),U=function(e){var t=e.isModalOpen,a=e.id,n=H();return c.createElement(N.a,{id:a,open:t,"aria-labelledby":"modal-title",className:n.dialog,style:{zIndex:9999}},c.createElement("div",null,c.createElement(_.a,{container:!0,className:n.container,justify:"flex-start",alignItems:"flex-start",direction:"column"},c.createElement(_.a,{item:!0,xs:12},c.createElement(A.a,{className:n.dialogTitle,disableTypography:!0,id:"modal-title"},e.title,c.createElement(T.a,{"aria-label":"close",className:n.closeButton,onClick:function(){e.onClose&&e.onClose(!1)}},c.createElement(G.a,null)))),c.createElement(_.a,{item:!0,xs:12,className:n.dialogContentContainer},c.createElement(R.a,{className:n.dialogContent,style:{padding:"0px 20px 10px 20px"}},c.createElement(W.a,{className:n.dialogContentText},e.message,!0===e.allowRevision?c.createElement("div",null,c.createElement(z.a,null,c.createElement(M.a,{style:{paddingTop:"15px"},className:"allowed_revision",control:c.createElement(I.a,{checked:e.allowedRevise,color:"primary",onChange:function(t){t.stopPropagation(),console.log(" e.target.checked >>>",t.target.checked),e.setAllowedRevise(t.target.checked)}}),label:"Allow the BDO to revise"}))):null)),c.createElement(L.a,{className:n.dialogAction},e.buttons)))))};U.defaultProps={isModalOpen:!1,id:"proposal_approval_modal",message:"This is a sample modal.",title:"Sample Modal",allowRevision:!1};var J=a(210),V=a(739),q=function(e){return e.pages.approveProposal.benefitNodes},K=function(e){return e.pages.approveProposal.selectedSummaryPackage},Q=function(e){return e.pages.approveProposal.selectedSummaryCategory},X=function(e){return e.pages.approveProposal.selectedPlanType},Z=function(e){return e.pages.approveProposal.selectedPlanPackage},$=function(e){return e.pages.approveProposal.selectedBenefitCategory},ee=function(e){return e.pages.approveProposal.clientData},te=Object(J.a)(ee,function(e){return e.businessData}),ae=Object(J.a)(ee,function(e){return e.natureData}),ne=Object(J.a)(ee,function(e){return e.contactDetailsData}),oe=Object(J.a)(ee,function(e){return e.HMOData}),re=Object(J.a)(ee,function(e){return e.principalData}),ce=Object(J.a)(q,function(e){return Object(V.f)(e,2)}),ie=Object(J.a)(q,function(e){return Object(V.f)(e,3)}),le=Object(J.a)(q,function(e){return Object(V.f)(e,4)}),se=Object(J.a)(q,function(e){return Object(V.f)(e,5)}),pe=Object(J.a)(q,function(e){return Object(V.f)(e,6)}),ue=Object(J.a)(q,function(e){return Object(V.f)(e,7)}),de=Object(J.a)(ce,function(e){return Object(V.d)(e)}),me=Object(J.a)(le,se,X,Z,$,function(e,t,a,n,o){return Object(V.b)(e,t,a,n,o)}),fe=Object(J.a)(se,ue,function(e,t){var a=e.filter(function(e){var a=t.filter(function(t){return t.tree_path[2]===e.tree_path[2]&&t.tree_path[3]===e.tree_path[3]&&t.tree_path[4]===e.tree_path[4]&&!0===t.included});return a=a.filter(function(e){var a=t.find(function(t){return t.name===e.name&&t.code===e.code&&"BASE"===t.tree_path[2]&&t.tree_path[3]===e.tree_path[3]&&t.tree_path[4]===e.tree_path[4]&&t.tree_path[5]===e.tree_path[5]&&t.tree_path[6]===e.tree_path[6]});return!(!a||a.included)||void 0===a}),"BASE"!==e.tree_path[2]&&["CV","RI"].includes(e.tree_path[3])&&a.length>0});return a=a.filter(function(e,t){var n=a.findIndex(function(t){return t.name===e.name&&t.code===e.code});return void 0===n||n===t})}),be=Object(J.a)(ie,ue,K,Q,function(e,t,a,n){return e.reduce(function(e,o){if("BASE"!==o.code){var r=Object.assign({},o),c=r.code,i=t.filter(function(e){return e.tree_path[2]===c&&e.tree_path[3]===a&&e.tree_path[4]===n&&!0===e.included});i=i.filter(function(e){var a=t.find(function(t){return t.name===e.name&&t.code===e.code&&"BASE"===t.tree_path[2]&&t.tree_path[3]===e.tree_path[3]&&t.tree_path[4]===e.tree_path[4]&&t.tree_path[5]===e.tree_path[5]&&t.tree_path[6]===e.tree_path[6]});return!(!a||a.included)||void 0===a}),r.child_nodes=i,r.child_nodes.length>0&&e.push(r)}return e},new Array)}),he=Object(J.a)(ie,ue,pe,function(e,t,a){return Object(V.g)(e,t,a)}),ge=Object(J.a)(se,pe,ue,X,Z,$,function(e,t,a,n,o,r){return Object(V.h)(e,t,a,n,o,r)}),ve=Object(J.a)(se,X,function(e,t){return Object(V.l)(e,t,"RB")}),ye=Object(J.a)(se,X,function(e,t){return Object(V.l)(e,t,"CV")}),Oe=Object(J.a)(se,X,function(e,t){return Object(V.l)(e,t,"RI")}),je=a(722),Se=a(726);a.d(t,"ApproveProposalPage",function(){return Ce}),a.d(t,"mapStateToProps",function(){return we}),a.d(t,"mapDispatchToProps",function(){return Pe});var _e="http://18.138.94.224:4101/api/",Ee=Object(p.a)({approveBtn:{width:115},approveWithConditionsBtn:{minWidth:115,color:"#0F808E",borderWidth:"2px",borderColor:"#E6F5F6",backgroundColor:"#E6F5F6","&:hover":{color:"#FFFFFF"}},disapproveBtn:{width:115,color:"#FD5451",borderWidth:"2px",borderColor:"#DDDFE3",backgroundColor:"#DDDFE3","&:hover":{color:"#FFFFFF"}},cancelBtn:{width:115,marginRight:25,border:"1px solid #3AB77D",color:"#3AB77D",backgroundColor:"#FFFFFF"},okayBtn:{width:115,border:"1px solid #3AB77D",color:"#3AB77D",backgroundColor:"#FFFFFF"},checkboxSize:{fontSize:"0.85rem","& > .MuiTypography-body":{fontSize:"0.85rem"}}}),ke=Object(p.a)(function(e){return{main:{backgroundColor:"#F5F7FB",padding:"32px 24px"},gridContainer:{padding:e.spacing(1)},sectionTitle:{fontSize:24,fontWeight:700,color:"#272e4c"},table:{marginTop:10,boxShadow:"0px 3px 6px #00000029"},tabs:{marginTop:10},tab:{fontWeight:"normal"},columnCategory:{width:150},columnBenefit:{width:150},columnLimit:{width:150},tableRowEven:{backgroundColor:"#F6F7FA !important"},tableRowOdd:{backgroundColor:"#FFFFFF !important"},subSectionTitle:{fontSize:16,fontWeight:400,color:"#272e4c"},fieldGroupTitle:{fontSize:13,fontWeight:700,color:"#272e4c"},listItemTextRoot:{flex:"none"},listItemTextPrimarySelected:{fontSize:14,fontWeight:700,color:"rgba(39, 46, 76, 1)",cursor:"pointer"},listItemTextPrimaryNotSelected:{fontSize:14,fontWeight:700,color:"rgba(39, 46, 76, 0.3)",cursor:"pointer"},dropzone:{width:"460px",height:"88px",marginTop:"10px",marginBottom:"20px",border:"2px dashed rgba(30, 32, 113, 0.3)",borderRadius:"5px",backgroundColor:"#e6e8ee",color:"#7b8094",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},inputLabel:{color:"#272e4c"},keyboardDatePicker:{marginTop:"10px",marginBottom:"20px",width:"212px"},checkbox:{"&.Mui-checked":{color:"#1e2071"}},radio:{"&.Mui-checked":{color:"#1e2071"}},appBar:Object(r.a)({top:"auto",bottom:0,border:"1px solid #707070",backgroundColor:"rgba(54, 54, 54, 0.64)"},e.breakpoints.up("sm"),{width:"calc(100% - 72px)"}),grow:{flexGrow:1},button:{margin:"0 10px",minHeight:"42px",minWidth:"150px"},buttonTitle:{fontWeight:700,fontSize:13},buttonSubTitle:{fontWeight:400,fontSize:7}}}),Ce=function(e){var t=e.contractNode,a=e.clientData,r=e.SetBenefitNodes,s=e.SetClientData,p=ke(),b=Ee(),h=Object(c.useState)(0),g=Object(o.a)(h,2),v=g[0],y=g[1],O=Object(c.useState)(!1),j=Object(o.a)(O,2),S=j[0],_=j[1],k=Object(c.useState)(!1),C=Object(o.a)(k,2),w=C[0],P=C[1],x=Object(c.useState)(""),B=Object(o.a)(x,2),D=B[0],F=B[1],N=Object(c.useState)(""),A=Object(o.a)(N,2),T=A[0],R=A[1],W=Object(c.useState)(null),z=Object(o.a)(W,2),M=z[0],I=z[1],L=Object(c.useState)(!1),Y=Object(o.a)(L,2),G=Y[0],H=Y[1],J=Object(c.useState)(!1),V=Object(o.a)(J,2),q=V[0],K=V[1],Q=Object(c.useState)(!1),X=Object(o.a)(Q,2),Z=X[0],$=X[1],ee=Object(c.useState)(!1),te=Object(o.a)(ee,2),ae=te[0],ne=te[1],oe=Object(c.useState)(!1),re=Object(o.a)(oe,2),ce=re[0],ie=re[1],le=Object(c.useState)(!1),se=Object(o.a)(le,2),pe=se[0],ue=se[1],de=Object(c.useState)([]),me=Object(o.a)(de,1)[0],fe=Object(c.useState)("Underwriting Manager"),be=Object(o.a)(fe,1)[0],he=Object(c.useState)(""),ge=Object(o.a)(he,1)[0],ve=function(){$(!0)},ye=function(e){P(e)},Oe=function(t){var a=_e+"benefit-plans/tree/"+e.match.params.proposal_id;return fetch(a,{method:"get",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){var a=Object(n.a)(e),o=Object(d.convertNodeData)(a,!0),c=Object(d.combineBaseBenefitNodes)(t,o);ie(!0),r(c)}).catch(function(e){ie(!0),console.log("getbenefitlist api error: ",e)})},Ce=function(e,t){_(!1),F(t),H(!1),K(!1),R(e),ye(!0),I(i.a.createElement("div",null,i.a.createElement(u.a,{className:b.okayBtn,variant:"contained",color:"secondary",onClick:function(){return ye(!1)}},"Okay")))},we=function(){_(!0),ye(!1);Se.a.put("cases/"+e.match.params.ticket_id+"/variable",ge,{proposal_approved:!1}).then(function(t){if(t&&void 0!==t.error){Ce("Failed to disapprove proposal.","Disapprove Proposal")}else Se.a.put("cases/"+e.match.params.ticket_id+"/route-case",ge,{}).then(function(t){console.log(t),Se.a.put("cases/"+e.match.params.ticket_id+"/route-case",ge,{}).then(function(e){if(e&&void 0!==e.error){Ce("Failed to disapprove proposal.","Disapprove Proposal")}else{"BDO was notified that the proposal is disapproved and can no longer be revised for further use.",function(e,t){_(!1),F(t),H(!1),K(!1),R(e),ye(!0),I(i.a.createElement("div",null,i.a.createElement(u.a,{className:b.okayBtn,variant:"contained",color:"secondary",onClick:ve},"Okay")))}("BDO was notified that the proposal is disapproved and can no longer be revised for further use.","Proposal Disapproved")}})})})},Pe=function(t){_(!0),ye(!1);var a={proposal_approved:!0,revisions:t};Se.a.put("cases/"+e.match.params.ticket_id+"/variable",ge,a).then(function(a){if(console.log("variable >>>>",a),a&&void 0!==a.error){var n="Failed to approve proposal.";Ce(n,!0===t?"Approve Proposal with conditions":"Approve Proposal")}else Se.a.put("cases/"+e.match.params.ticket_id+"/route-case",ge,{}).then(function(a){console.log(a),Se.a.put("cases/"+e.match.params.ticket_id+"/route-case",ge,{}).then(function(a){if(!0===t)Se.a.put("cases/"+e.match.params.ticket_id+"/route-case",ge,{}).then(function(e){if(e&&void 0!==e.error){Ce("Failed to approve proposal.",!0===t?"Approve Proposal with conditions":"Approve Proposal")}else{"Proposal was successfully approved.",F("Approve Proposal with conditions"),R("Proposal was successfully approved."),ye(!0),I(i.a.createElement("div",null,i.a.createElement(u.a,{className:b.okayBtn,variant:"contained",color:"secondary",onClick:ve},"Okay")))}});else if(a&&void 0!==a.error){Ce("Failed to approve proposal.","Approve Proposal")}else{"Proposal was successfully approved.",F("Approve Proposal"),R("Proposal was successfully approved."),ye(!0),I(i.a.createElement("div",null,i.a.createElement(u.a,{className:b.okayBtn,variant:"contained",color:"secondary",onClick:ve},"Okay")))}})})})};return Object(c.useEffect)(function(){_(!0),function(){var t=_e+"clients/"+e.match.params.client_id;fetch(t,{method:"get",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){var t=Object.assign({},e),n=Object(d.convertClientData)(t);s(Object.assign({},a,n)),ne(!0)}).catch(function(e){ne(!0),console.log("getbenefitlist api error: ",e)})}(),function(){_(!0);fetch("http://18.138.94.224:4101/api/base-benefit-plans/",{method:"get",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){var t=Object(n.a)(e),a=Object(d.convertNodeData)(t);Oe(a)}).catch(function(e){_(!1),console.log("getbenefitlist api error: ",e)})}()},[]),Object(c.useEffect)(function(){ae&&ce&&_(!1)},[ae,ce]),Object(c.useEffect)(function(){if(!pe&&t){var e={principalData:{numOfPrincipals:t.principals_count?t.principals_count:0,malePrincipals:t.male_principals_count?t.male_principals_count:0,femalePrincipals:t.female_principals_count?t.female_principals_count:0,numOfDependents:t.dependents_count?t.dependents_count:0,maleDependents:t.male_dependents_count?t.male_dependents_count:0,femaleDependents:t.female_dependents_count?t.female_dependents_count:0}};s(Object.assign({},a,e)),ue(!0)}},[t]),!0===Z?i.a.createElement(l.a,{to:{pathname:"/underwriting"}}):i.a.createElement("div",{className:p.main},S?i.a.createElement(je.f,null):null,function(t){switch(t){case 0:return i.a.createElement(m.a,Object.assign({submitMode:!0,invalidFields:me,classes:p},e));case 1:return i.a.createElement(f.a,Object.assign({submitMode:!0,classes:p},e));case 2:return i.a.createElement(E,Object.assign({classes:p},e));default:return null}}(v),i.a.createElement(je.d,null,0!==v?i.a.createElement(u.a,{variant:"contained",onClick:function(){v>0&&y(v-1)},id:"proposal_previous",color:"primary",className:"button back"},"Back"):null,i.a.createElement("div",{style:{flexGrow:1}}),2!==v?i.a.createElement(u.a,{variant:"contained",onClick:function(){v<2&&y(v+1)},id:"proposal_next",color:"primary",className:"button"},"Next"):i.a.createElement(i.a.Fragment,null,i.a.createElement(u.a,{variant:"contained",id:"proposal_approve_btn",color:"primary",className:"button",onClick:function(){var e="";e="Underwriting Manager"===be?"The BDO will be notified of your approval and the changes you added in this proposal. Are you sure you want to approve this?":"You included several comments for this proposal. Are you sure you want to approve this and send it to the Underwriting Department?",F("Approve Proposal"),R(e),ye(!0),I(i.a.createElement("div",null,i.a.createElement(u.a,{className:b.cancelBtn,variant:"contained",color:"secondary",onClick:function(){return ye(!1)}},"Cancel"),i.a.createElement(u.a,{className:b.approveBtn,variant:"contained",color:"primary",onClick:function(){return Pe(!1)}},"Approve")))}},"Approve"),i.a.createElement(u.a,{variant:"contained",id:"proposal_approve_btn",color:"primary",className:"button withcomment",onClick:function(){F("Approve Proposal with conditions"),R("Your comments will be sent back to the BDO agent for revisions. Are you sure you want to approve this with conditions?"),ye(!0),I(i.a.createElement("div",null,i.a.createElement(u.a,{className:b.cancelBtn,variant:"contained",color:"secondary",onClick:function(){return ye(!1)}},"Cancel"),i.a.createElement(u.a,{className:b.approveWithConditionsBtn,variant:"contained",color:"primary",onClick:function(){return Pe(!0)}},"Approve with conditions")))}},"Approve with conditions"),i.a.createElement(u.a,{variant:"contained",id:"proposal_approve_btn",color:"primary",className:"button disapprove",onClick:function(){F("Disapprove"),R("Your comments will be sent back to the BDO agent. You can choose to have the BDO revise this or reject the proposal altogether."),ye(!0),H(!0),I(i.a.createElement("div",null,i.a.createElement(u.a,{className:b.cancelBtn,variant:"contained",color:"secondary",onClick:function(){return ye(!1)}},"Cancel"),i.a.createElement(u.a,{className:b.disapproveBtn,variant:"contained",color:"primary",onClick:we},"Disapprove")))}},"Disapprove"))),i.a.createElement(U,{id:"proposal_approval_modal",isModalOpen:w,title:D,message:T,onClose:ye,buttons:M,allowRevision:G,setAllowedRevise:function(e){K(e)},allowedRevise:q}))},we=function(e){return{benefitNodes:q(e),clientData:ee(e),contractNode:de(e),categoryNode:me(e),summaryPackages:fe(e),summaryBenefits:be(e),selectedSummaryPackage:K(e),selectedSummaryCategory:Q(e),planTypeList:he(e),roomAndBoardList:ve(e),coverageList:ye(e),riderList:Oe(e),rows:ge(e),selectedPlanType:X(e),selectedPlanPackage:Z(e),selectedBenefitCategory:$(e),businessData:te(e),natureData:ae(e),contactDetailsData:ne(e),HMOData:oe(e),principalData:re(e)}},Pe=function(e){return{SetBenefitNodes:Object(s.b)(C,e),SetClientData:Object(s.b)(w,e),SetSelectedSummaryPackage:Object(s.b)(P,e),SetSelectedSummaryCategory:Object(s.b)(x,e),SetSelectedPlanType:Object(s.b)(B,e),SetSelectedPlanPackage:Object(s.b)(D,e),SetSelectedBenefitCategory:Object(s.b)(F,e)}}}}]);
//# sourceMappingURL=14.ae39fc2b.chunk.js.map
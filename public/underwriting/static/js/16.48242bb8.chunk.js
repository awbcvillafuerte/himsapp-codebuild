(window.webpackJsonpunderwriting=window.webpackJsonpunderwriting||[]).push([[16],{1128:function(e,t,a){"use strict";a.r(t);var n=a(270),o=a(29),r=a(0),l=a.n(r),i=a(734),c=a(51),s=a(59),m=a(272),d=a(752),u=a(747),p=a(267),g=a(266),f=a(260),b=a(1099),h=a(162),v=a(1126),_=a(377),E=a(1114),x=Object(p.a)({root:{"& > div":{backgroundColor:"transparent"},"& .Mui-disabled":{color:"#272E4C"}}}),C=Object(p.a)({keyboardDatePicker:{width:"100%"}}),S=function(e){var t=e.items,a=Object(m.a)(e,["items"]);return r.createElement(g.a,Object.assign({variant:"outlined",style:{width:"100%"},renderValue:function(e){if(null!=e){var a=t.find(function(t){return t.value===e});return a?a.label:"\u2014\u2014"}return"\u2014\u2014"}},a),t.map(function(e,t){return r.createElement(f.a,{key:t,value:e.value},e.label)}))},w=[{label:"",value:""},{label:"Active",value:"Active"},{label:"Approved",value:"Approved"},{label:"Disapproved",value:"Disapproved"},{label:"For Approval",value:"For Approval"},{label:"Signed",value:"Signed"},{label:"For Revision",value:"For Revision"},{label:"Submitted",value:"Submitted"},{label:"Resubmitted",value:"Resubmitted"}],k=function(e){var t=e.column,a=e.filter,n=e.onFilter,o=e.filteringEnabled,l=e.classes,i=C();if(o){if("status"===t.name){var c=w;return r.createElement(S,{onChange:function(e){return n(e.target.value?{value:e.target.value}:null)},name:"status",items:c,id:"status",value:a?a.value:""})}return"effectivity_date"===t.name||"date_created"===t.name||"date_modified"===t.name?r.createElement(b.a,{style:{padding:"0px 10px 8px 10px"},classes:l},r.createElement(E.a,{variant:"dialog",format:"MMMM DD, YYYY",inputVariant:"outlined",className:i.keyboardDatePicker,value:a?a.value:"",invalidDateMessage:"",onChange:function(e){console.log(e),n(e?{value:e}:null)}})):r.createElement(b.a,{style:{padding:"0px 10px 8px 10px"},classes:l},r.createElement(h.a,{classes:l,style:{width:"100%"},value:a?a.value:"",labelWidth:0,onChange:function(e){console.log("filter changed"),n(e.target.value?{value:e.target.value}:null)},placeholder:""}))}return null},y=function(e){return"asc"===e.direction?r.createElement(c.a,{style:{marginLeft:"10px"},icon:s.A}):r.createElement(c.a,{style:{marginLeft:"10px"},icon:s.z})},O=function(e){var t=e.onSort,a=e.children,n=e.direction;return r.createElement(v.a,{hideSortIcon:!0,onClick:t},a,n?r.createElement(y,{direction:n}):r.createElement(c.a,{style:{marginLeft:"10px"},icon:s.y}))},j=function(e){var t=e.rows,a=e.columns,o=e.formattedColumns,l=e.disablePaging,i=e.disableSearch,c=e.disableSort,s=e.disableFilter,m=e.columnExtensions,p=e.dropdownHeader,g=e.totalCount,f=e.currentPage,b=e.limit,h=e.onPageChange,v=e.onPageSizeChange,E=e.defaultFilter,C=e.columnFilteringEnabled,S=e.filterExtensions,w=e.onFilterChange,y=e.onSearchChange,j=e.onSortingChange,F=e.onRowClick,D=e.sorting,P=Object(r.useState)([]),N=Object(n.a)(P,2),A=N[0],T=N[1],z=Object(r.useState)([5,10,15,0]),W=Object(n.a)(z,1)[0],B=[];var R=function(e){var t=e.value,a=x();return r.createElement(_.a,{value:t,classes:a})};void 0!==o&&void 0!==o.text&&B.push(r.createElement(function(e){return r.createElement(u.c,Object.assign({formatterComponent:R},e))},{for:o.text}));return r.createElement(d.a,{rows:t,columns:a},B,l?null:r.createElement(u.m,{currentPage:f,onCurrentPageChange:function(e){h(e,b*e)},pageSize:b,onPageSizeChange:function(e){v(e)}}),l?null:r.createElement(u.b,{totalCount:g}),i?null:r.createElement(u.o,{onValueChange:y}),c?null:r.createElement(u.q,{defaultSorting:[],sorting:D,onSortingChange:j}),r.createElement(u.p,{selection:A,onSelectionChange:function(e){var t=e.find(function(e){return-1===A.indexOf(e)});void 0!==t&&(F(t),T([t]))}}),r.createElement(u.j,null),s?null:r.createElement(u.e,{defaultFilters:[],filters:void 0!==E?E:[],columnFilteringEnabled:C,columnExtensions:S,onFiltersChange:w}),r.createElement(d.d,{columnExtensions:m}),r.createElement(d.h,{selectByRowClick:!0,showSelectionColumn:!1}),p?null:r.createElement(d.g,{showSortingControls:!c,sortLabelComponent:O}),s?null:r.createElement(d.f,{cellComponent:k}),l?null:r.createElement(d.b,{pageSizes:W}))};j.defaultProps={rows:[],columns:[],columnExtensions:[],filterExtensions:[],sorting:[],formattedColumns:{},dropdownHeader:!1,disableSearch:!1,disablePaging:!1,disableFilter:!1,disableSort:!1,toolbarType:null,totalCount:0,currentPage:0,limit:10,defaultFilter:[],columnFilteringEnabled:!0,onSearchChange:function(e){return console.log("onSearchChange",e)},onFilterChange:function(e){return console.log("onFilterChange",e)},onPageChange:function(e,t){return console.log("onPageChange",e,t)},onPageSizeChange:function(e){return console.log("onPageSizeChange",e)},onSortingChange:function(e){return console.log("onSortingChange",e)},onRowClick:function(e){return console.log("onRowClick",e)}};var F=a(127),D=a(37),P=a(50),N=a(1117),A=a(165),T=a(123),z=a(817),W=a(163),B=a(43),R=a(273);a.d(t,"ProposalListPage",function(){return U});var I=Object(B.a)(function(e){return{main:{backgroundColor:"#F5F7FB",padding:"32px 24px"},searchInputAdornment:{color:"#00000061",marginRight:"8px"},gridContainer:{padding:e.spacing(1)},gridContainerNoPadding:{padding:e.spacing(1)},headerTitle:{fontSize:32,fontWeight:700},sectionTitle:{fontSize:24,fontWeight:700,color:"#272e4c"},subSectionTitle:{fontSize:16,fontWeight:400,color:"#272e4c"},fieldGroupTitle:{fontSize:13,fontWeight:700,color:"#272e4c"},listItemTextRoot:{flex:"none"},listItemTextPrimarySelected:{fontSize:14,fontWeight:700,color:"rgba(39, 46, 76, 1)",cursor:"pointer"},listItemTextPrimaryNotSelected:{fontSize:14,fontWeight:700,color:"rgba(39, 46, 76, 0.3)",cursor:"pointer"},dropzone:{width:"460px",height:"88px",marginTop:"10px",marginBottom:"20px",border:"2px dashed rgba(30, 32, 113, 0.3)",borderRadius:"5px",backgroundColor:"#e6e8ee",color:"#7b8094",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},inputLabel:{color:"#272e4c"},keyboardDatePicker:{marginTop:"10px",marginBottom:"20px",width:"212px"},checkbox:{"&.Mui-checked":{color:"#1e2071"}},radio:{"&.Mui-checked":{color:"#1e2071"}},appBar:Object(o.a)({top:"auto",bottom:0,border:"1px solid #707070",backgroundColor:"rgba(54, 54, 54, 0.64)"},e.breakpoints.up("sm"),{width:"calc(100% - 72px)"}),grow:{flexGrow:1},button:{margin:"0 10px",minHeight:"42px",minWidth:"150px"},buttonTitle:{fontWeight:700,fontSize:13},buttonSubTitle:{fontWeight:400,fontSize:7},searchField:{backgroundColor:"white"}}}),L={where:{}},M=10,V={},G="";console.log(G);var U=function(){var e=Object(r.useState)(!1),t=Object(n.a)(e,2),a=t[0],o=t[1],m=Object(r.useState)([]),d=Object(n.a)(m,2),u=d[0],p=d[1],g=Object(r.useState)([]),f=Object(n.a)(g,2),b=f[0],h=f[1],v=Object(r.useState)(0),E=Object(n.a)(v,2),x=E[0],C=E[1],S=Object(r.useState)([]),w=Object(n.a)(S,2),k=w[0],y=w[1],O=Object(r.useState)([]),B=Object(n.a)(O,2),U=B[0],X=B[1],Y=Object(r.useState)(),H=Object(n.a)(Y,2),J=H[0],q=H[1],K=Object(r.useState)(!0),Q=Object(n.a)(K,2),Z=Q[0],$=Q[1],ee=Object(r.useState)(""),te=Object(n.a)(ee,2),ae=te[0],ne=te[1],oe=Object(r.useState)(!1),re=Object(n.a)(oe,2),le=re[0],ie=re[1],ce=Object(r.useState)(""),se=Object(n.a)(ce,2),me=se[0],de=se[1],ue=Object(r.useState)(null),pe=Object(n.a)(ue,2),ge=pe[0],fe=pe[1],be=Boolean(ge),he=Object(r.useState)(""),ve=Object(n.a)(he,2),_e=ve[0],Ee=ve[1],xe=Object(r.useState)("all_rows"),Ce=Object(n.a)(xe,2),Se=Ce[0],we=Ce[1],ke=Object(r.useState)("pdf"),ye=Object(n.a)(ke,2),Oe=ye[0],je=ye[1],Fe=Object(r.useState)(0),De=Object(n.a)(Fe,2),Pe=De[0],Ne=De[1],Ae=I(),Te=function(e,t){$(!1),o(!0),console.log("load"),console.log(JSON.stringify(L));var a=!0;0==t&&(a=!0),R.a.getProposal(L,a,e,t).then(function(e){if(e&&void 0===e.error){a&&(e.status_total&&(V.total=e.status_total),e.status_active&&(V.active=e.status_active),e.status_approved&&(V.approved=e.status_approved),e.status_for_revision&&(V.for_revision=e.status_for_revision),e.status_signed&&(V.signed=e.status_signed),e.total&&(V.totalrow=e.total)),console.log("check"),console.log(e);var t=[];e.proposals.map(function(e){var a=e.custom_metadata.coverage_start_date&&e.custom_metadata.coverage_end_date?new Date(e.custom_metadata.coverage_start_date).toLocaleDateString("en-US",{year:"numeric",day:"numeric",month:"short"})+" - "+new Date(e.custom_metadata.coverage_end_date).toLocaleDateString("en-US",{year:"numeric",day:"numeric",month:"short"}):"-";t.push({account:e.client_registered_name?e.client_registered_name:"-",version:e.custom_metadata.version?e.custom_metadata.version:"-",proposal_no:e.proposal_number?e.proposal_number:"-",effectivity_date:a,bdobroker:e.sales_channel&&e.sales_channel.contact_person&&""!==e.sales_channel.contact_person?e.sales_channel.contact_person:"-",date_created:e.custom_metadata.date_created?new Date(e.custom_metadata.date_created).toLocaleDateString("en-US",{year:"numeric",day:"numeric",month:"short"}):"-",date_modified:e.custom_metadata.date_updated?new Date(e.custom_metadata.date_updated).toLocaleDateString("en-US",{year:"numeric",day:"numeric",month:"short"}):"-",status:e.status,action:"Submitted"===e.status?"For Evaluation":"Disapproved"===e.status?"For Revision":l.a.createElement(F.a,{disabled:!0,style:{backgroundColor:"#3AB77D",color:"white",fontSize:"12px",padding:"2px"}},"Upload Signed Proposal")})}),console.log("tmp: ",t),p(t),$(!0),o(!1)}else o(!1),$(!0),console.log("getbenefitlist api error: ",e)}),$(!0)},ze=[{name:"account",title:"Account"},{name:"proposal_no",title:"Proposal No."},{name:"effectivity_date",title:"Effectivity Date"},{name:"bdobroker",title:"BDO/Broker"},{name:"date_created",title:"Date Created"},{name:"date_modified",title:"Date Modified"},{name:"version",title:"Version"},{name:"status",title:"Status"},{name:"action",title:"Action"}];Object(r.useEffect)(function(){Te(10,0)},[]);var We=[{columnName:"account",wordWrapEnabled:!0},{columnName:"proposal_no",wordWrapEnabled:!0},{columnName:"effectivity_date",wordWrapEnabled:!0},{columnName:"bdobroker",wordWrapEnabled:!0},{columnName:"date_created",wordWrapEnabled:!0},{columnName:"date_modified",wordWrapEnabled:!0},{columnName:"version",wordWrapEnabled:!0},{columnName:"status",wordWrapEnabled:!0},{columnName:"action",wordWrapEnabled:!0}],Be=function(e){console.log(e)},Re=function(e){y(e),console.log("handle sort:",e);var t="";"account"==e[0].columnName?t="client.client_registered_name":"effectivity_date"==e[0].columnName?t="custom_metadata.coverage_start_date":"version"==e[0].columnName?t="custom_metadata.version":"date_created"==e[0].columnName?t="custom_metadata.date_created":"date_modified"==e[0].columnName?t="custom_metadata.date_updated":"status"==e[0].columnName?t="status":"bdobroker"==e[0].columnName&&(t="client.sales_channel.contact_person"),L.order=t+" "+e[0].direction,Te(10,0),G=t},Ie=function(e,t){C(e),console.log("handle page change"),L.skip=t,Te(M,t)},Le=function(e){Te(M=e,0)},Me=function(e){console.log(e),C(0),Pe&&clearTimeout(Pe),Ne(setTimeout(function(){o(!0),Te(M,0)},2e3))},Ve=function(e){if(console.log("Filter By Column: ",e),X(e),C(0),e.length>0){var t={};e.map(function(e){var a=e.columnName;"account"==e.columnName?a="client.client_registered_name":"effectivity_date"==e.columnName?(t[a="custom_metadata.coverage_start_date"]={lte:new Date(e.value)},a="custom_metadata.coverage_end_date",e.value=new Date(e.value)):"version"==e.columnName?a="custom_metadata.version":"date_created"==e.columnName?(a="custom_metadata.date_created",e.value=new Date(e.value)):"date_modified"==e.columnName?(a="custom_metadata.date_updated",e.value=new Date(e.value)):"status"==e.columnName?a="status":"bdobroker"==e.columnName?a="client.sales_channel.contact_person":"version"==e.columnName&&(a="version"),"effectivity_date"==e.columnName?t[a]={gte:e.value}:t[a]=e.value}),L.where=t}else L.where={};h(b),$(!0),Pe&&clearTimeout(Pe),Ne(setTimeout(function(){Te(M,0)},2e3))};if(Z&&(q(l.a.createElement("div",null,l.a.createElement(D.a,{container:!0},l.a.createElement(D.a,{item:!0,xs:3,style:{textAlign:"center",backgroundColor:"#F4F4F4",paddingTop:"25px",paddingBottom:"19px"}},l.a.createElement("span",{style:{color:"#3AB77D",fontSize:"20px"}},V.total),"\xa0\xa0TOTAL"),l.a.createElement(D.a,{item:!0,xs:2,style:{textAlign:"center",backgroundColor:"#F4F4F4",paddingTop:"25px",paddingBottom:"19px"}},l.a.createElement("span",{style:{color:"#3AB77D",fontSize:"20px"}},V.active),"\xa0\xa0ACTIVE"),l.a.createElement(D.a,{item:!0,xs:2,style:{textAlign:"center",backgroundColor:"#F4F4F4",paddingTop:"25px",paddingBottom:"19px"}},l.a.createElement("span",{style:{color:"#3AB77D",fontSize:"20px"}},V.approved),"\xa0\xa0APPROVED"),l.a.createElement(D.a,{item:!0,xs:3,style:{textAlign:"center",backgroundColor:"#F4F4F4",paddingTop:"25px",paddingBottom:"19px"}},l.a.createElement("span",{style:{color:"#3AB77D",fontSize:"20px"}},V.for_revision),"\xa0\xa0FOR REVISION"),l.a.createElement(D.a,{item:!0,xs:2,style:{textAlign:"center",backgroundColor:"#F4F4F4",paddingTop:"25px",paddingBottom:"19px"}},l.a.createElement("span",{style:{color:"#3AB77D",fontSize:"20px"}},V.signed),"\xa0\xa0SIGNED")),l.a.createElement("div",{style:{minWidth:"1156",overflowX:"auto"}},l.a.createElement(j,{columns:ze,rows:u,columnExtensions:We,currentPage:x,limit:M,totalCount:V.totalrow,onPageChange:Ie,onPageSizeChange:Le,onFilterChange:Ve,onSearchChange:Me,onSortingChange:Re,sorting:k,defaultFilter:U,onRowClick:Be})))),$(!1)),!0===le&&"proposal"===me)return l.a.createElement(T.a,{to:{pathname:"/underwriting/create-proposal/new"}});return l.a.createElement("div",{className:Ae.main},a?l.a.createElement(i.f,null):null,l.a.createElement(D.a,{container:!0,justify:"space-between",alignItems:"center",className:Ae.gridContainer},l.a.createElement(D.a,{item:!0,xs:8},l.a.createElement(P.a,{className:Ae.headerTitle},"Proposals")),l.a.createElement(D.a,{item:!0,xs:4,alignItems:"flex-end",alignContent:"flex-end"},l.a.createElement(N.a,{display:"flex",justifyContent:"flex-end",alignItems:"center",p:1,style:{width:"100%",height:"100%"}},l.a.createElement(N.a,{p:1,style:{display:"none"}},l.a.createElement(A.a,{style:{color:"#3AB77D",fontSize:"0.875rem"},onClick:function(e){var t=e.currentTarget;fe(t)}},l.a.createElement(c.a,{icon:s.g}),"\xa0\xa0Generate Report")),l.a.createElement(N.a,{p:1},l.a.createElement(A.a,{style:{color:"#3AB77D",fontSize:"0.875rem"},onClick:function(){de("proposal"),ie(!0)}},l.a.createElement(c.a,{icon:s.u}),"\xa0\xa0Create Proposal")))),l.a.createElement(i.e,{height:"5px"}),l.a.createElement(D.a,{item:!0,xs:9,style:{paddingRight:"30px"}},l.a.createElement(_.a,{id:"proposal_search",placeholder:"Search proposals",className:Ae.searchField,margin:"dense",variant:"outlined",fullWidth:!0,value:ae,onChange:function(e){var t=e.target.value.trim();ne(t),$(!0),L.where?L.where.or=[{client_registered_name:{like:t,options:"i"}},{status:{like:t,options:"i"}},{proposal_no:{like:t,options:"i"}},{bdobroker:{like:t,options:"i"}},{"custom_metadata.coverage_start_date":{like:t,options:"i"}},{"custom_metadata.coverage_end_date":{like:t,options:"i"}},{"custom_metadata.date_created":{like:t,options:"i"}},{"custom_metadata.date_updated":{like:t,options:"i"}},{"custom_metadata.version":{like:t,options:"i"}}]:(L.where={},L.where.or=[{client_registered_name:{like:t,options:"i"}},{status:{like:t,options:"i"}},{proposal_no:{like:t,options:"i"}},{bdobroker:{like:t,options:"i"}},{"custom_metadata.coverage_start_date":{like:t,options:"i"}},{"custom_metadata.coverage_end_date":{like:t,options:"i"}},{"custom_metadata.date_created":{like:t,options:"i"}},{"custom_metadata.date_updated":{like:t,options:"i"}},{"custom_metadata.version":{like:t,options:"i"}}]),Pe&&clearTimeout(Pe),Ne(setTimeout(function(){o(!0),Te(M,0)},2e3))},inputProps:{"aria-label":"bare"},InputProps:{startAdornment:l.a.createElement(c.a,{icon:s.x,className:Ae.searchInputAdornment})}})),l.a.createElement(D.a,{item:!0,xs:3},l.a.createElement(_.a,{id:"proposal_search",placeholder:"This Month",className:Ae.searchField,margin:"dense",variant:"outlined",fullWidth:!0,value:_e,onChange:function(e){Ee(e.target.value.trim()),$(!0)},inputProps:{"aria-label":"bare"},InputProps:{endAdornment:l.a.createElement(c.a,{icon:s.b,className:Ae.searchInputAdornment})}}))),l.a.createElement(D.a,{item:!0,xs:12,id:"TableCont"},l.a.createElement(W.a,{style:{overflowX:"auto",maxWidth:"100%"}},J)),l.a.createElement(z.a,{open:be,anchorEl:ge,exportData:Se,exportFormat:Oe,onClose:function(){fe(null)},onChangeExportData:we,onChangeExportFormat:je,generateReport:function(){console.log("handleGenerateReport"),console.log("exportData",Se),console.log("setExportFormat",Oe),fe(null)}}))}},817:function(e,t,a){"use strict";a.d(t,"a",function(){return E});var n=a(0),o=a.n(n),r=a(37),l=a(50),i=a(7),c=a(127),s=a(730),m=a(263),d=a(205),u=a(159),p=a(1124),g=a(1110),f=a(681),b=a(51),h=a(59),v=a(43),_=Object(v.a)(function(e){return{dialogAction:{marginBottom:e.spacing(1),justifyContent:"center"}}}),E=function(e){var t=e.open,a=e.anchorEl,n=e.exportData,v=e.exportFormat,E=e.onClose,x=e.onChangeExportData,C=e.onChangeExportFormat,S=e.generateReport,w=_();return o.a.createElement(s.a,{open:t,anchorEl:a,onClose:E,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},o.a.createElement(r.a,{container:!0},o.a.createElement(r.a,{item:!0},o.a.createElement(d.a,null,o.a.createElement(l.a,{variant:"body1",style:{fontWeight:"bold"}},"Choose Data"),o.a.createElement(u.a,{component:"fieldset"},o.a.createElement(g.a,{name:"report_data"},o.a.createElement(f.a,{control:o.a.createElement(p.a,{checked:"all_rows"===n,name:"all_rows",onClick:function(e){e.stopPropagation(),x("all_rows")}}),label:"Include all rows"}),o.a.createElement(f.a,{control:o.a.createElement(p.a,{checked:"filtered_rows"===n,name:"filtered_rows",onClick:function(e){e.stopPropagation(),x("filtered_rows")}}),label:"Include only filtered rows"}))),o.a.createElement(l.a,{variant:"body1",style:{fontWeight:"bold"}},"Choose Format"),o.a.createElement(u.a,{component:"fieldset"},o.a.createElement(g.a,{name:"report_format"},o.a.createElement(f.a,{control:o.a.createElement(p.a,{checked:"pdf"===v,name:"pdf",onClick:function(e){e.stopPropagation(),C("pdf")}}),label:"PDF"}),o.a.createElement(f.a,{control:o.a.createElement(p.a,{checked:"xls"===v,name:"xls",onClick:function(e){e.stopPropagation(),C("xls")}}),label:"XLS"}),o.a.createElement(f.a,{control:o.a.createElement(p.a,{checked:"xml"===v,name:"xml",onClick:function(e){e.stopPropagation(),C("xml")}}),label:"XML"})))),o.a.createElement(m.a,{className:Object(i.default)(w.dialogAction)},o.a.createElement(c.a,{variant:"contained",color:"primary",onClick:S},"Download Report\xa0\xa0",o.a.createElement(b.a,{icon:h.g}))))))}}}]);
//# sourceMappingURL=16.48242bb8.chunk.js.map
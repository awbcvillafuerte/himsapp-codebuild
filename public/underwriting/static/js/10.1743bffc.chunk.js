(window.webpackJsonpunderwriting=window.webpackJsonpunderwriting||[]).push([[10],{722:function(e,t,a){},730:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(98),c=a(99),o="http://18.140.39.215/api/1.0/workflow/",r=function(){function e(){Object(n.a)(this,e)}return Object(c.a)(e,null,[{key:"getWithToken",value:function(e,t){console.log("token: ",t);var a=o+e;return console.log("get url: ",a,t),fetch(a,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("pm_token")}}).then(function(e){return e.json()}).catch(function(e){console.log("client error: ",e)})}},{key:"postWithToken",value:function(e,t,a){console.log("token: ",t);var n=o+e;return console.log("post url: ",n,a),fetch(n,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("pm_token")},body:JSON.stringify(a)}).then(function(e){return console.log("response",e),e.json()}).catch(function(e){console.log("client error: ",e)})}},{key:"put",value:function(e,t,a){console.log("token: ",t);var n=o+e;return console.log("post url: ",n,a),fetch(n,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("pm_token")},body:JSON.stringify(a)}).then(function(e){return console.log("response",e),e.json()}).catch(function(e){console.log("client error: ",e)})}},{key:"post",value:function(e,t){var a=o+e;return console.log("post url: ",a,t),fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return console.log("response",e),e.json()}).catch(function(e){console.log("client error: ",e)})}},{key:"postLogin",value:function(e,t){var a="http://18.140.39.215/workflow/"+e;return console.log("post url: ",a,t),fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return console.log("response",e),e.json()}).catch(function(e){console.log("client error: ",e)})}},{key:"postClaim",value:function(e){return fetch(o+e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("pm_token")}}).then(function(e){return e.json()}).catch(function(e){console.log("client error: ",e)})}}]),e}()},764:function(e,t,a){"use strict";var n=a(1),c=a(4),o=a(0),r=a.n(o),l=(a(3),a(7)),s=a(8),i=a(9);function d(e){var t,a,n;return t=e,a=0,n=1,e=(Math.min(Math.max(a,t),n)-a)/(n-a),e=(e-=1)*e*e+1}var u=r.a.forwardRef(function(e,t){var a,o=e.classes,s=e.className,u=e.color,m=void 0===u?"primary":u,p=e.disableShrink,f=void 0!==p&&p,h=e.size,b=void 0===h?40:h,_=e.style,g=e.thickness,k=void 0===g?3.6:g,O=e.value,E=void 0===O?0:O,j=e.variant,y=void 0===j?"indeterminate":j,v=Object(c.a)(e,["classes","className","color","disableShrink","size","style","thickness","value","variant"]),N={},T={},w={};if("determinate"===y||"static"===y){var S=2*Math.PI*((44-k)/2);N.strokeDasharray=S.toFixed(3),w["aria-valuenow"]=Math.round(E),"static"===y?(N.strokeDashoffset="".concat(((100-E)/100*S).toFixed(3),"px"),T.transform="rotate(-90deg)"):(N.strokeDashoffset="".concat((a=(100-E)/100,a*a*S).toFixed(3),"px"),T.transform="rotate(".concat((270*d(E/70)).toFixed(3),"deg)"))}return r.a.createElement("div",Object(n.a)({className:Object(l.default)(o.root,s,"inherit"!==m&&o["color".concat(Object(i.a)(m))],{indeterminate:o.indeterminate,static:o.static}[y]),style:Object(n.a)({width:b,height:b},T,{},_),ref:t,role:"progressbar"},w,v),r.a.createElement("svg",{className:o.svg,viewBox:"".concat(22," ").concat(22," ").concat(44," ").concat(44)},r.a.createElement("circle",{className:Object(l.default)(o.circle,f&&o.circleDisableShrink,{indeterminate:o.circleIndeterminate,static:o.circleStatic}[y]),style:N,cx:44,cy:44,r:(44-k)/2,fill:"none",strokeWidth:k})))});t.a=Object(s.a)(function(e){return{root:{display:"inline-block",lineHeight:1},static:{transition:e.transitions.create("transform")},indeterminate:{animation:"$circular-rotate 1.4s linear infinite"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},svg:{},circle:{stroke:"currentColor"},circleStatic:{transition:e.transitions.create("stroke-dashoffset")},circleIndeterminate:{animation:"$circular-dash 1.4s ease-in-out infinite",strokeDasharray:"80px, 200px",strokeDashoffset:"0px"},"@keyframes circular-rotate":{"100%":{transform:"rotate(360deg)"}},"@keyframes circular-dash":{"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:"0px"},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-125px"}},circleDisableShrink:{animation:"none"}}},{name:"MuiCircularProgress",flip:!1})(u)},781:function(e,t,a){},852:function(e,t,a){"use strict";a.r(t);var n=a(98),c=a(99),o=a(101),r=a(100),l=a(102),s=a(0),i=a.n(s),d=a(73),u=a(34),m=a(160),p=a(847),f=a(828),h=a(832),b=a(831),_=a(829),g=a(830),k=a(365),O=a(87),E=a(1),j=a(4),y=(a(3),a(7)),v=a(8),N=i.a.forwardRef(function(e,t){var a=e.classes,n=e.className,c=Object(j.a)(e,["classes","className"]);return i.a.createElement("div",Object(E.a)({className:Object(y.default)(a.root,n),ref:t},c))});N.muiName="ListItemSecondaryAction";var T=Object(v.a)({root:{position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"}},{name:"MuiListItemSecondaryAction"})(N),w=a(67),S=a(207),x=a(49),C=a(764),D=a(348),P=a.n(D),A=a(121),I=(a(781),{ResetReducer:"Dashboard_ResetReducer",SetReducer:"Dashboard_SetReducer"}),R=function(e){return{payload:e,type:I.SetReducer}},M=a(730);a(722);a.d(t,"Dashboard",function(){return V}),a.d(t,"mapStateToProps",function(){return $}),a.d(t,"mapDispatchToProps",function(){return H});var z=[{name:"Created by Me",value:"created_by_me"},{name:"Created Tickets",value:"created_tickets"}],B=[{name:"By Amount",value:"amount"},{name:"By Availees",value:"availees"},{name:"By Cases",value:"cases"}],F=[],Y=[{name:"NCG A.",link:"#"},{name:"Nestle",link:"#"},{name:"Ritz Corp.",link:"#"},{name:"Innovative Tech.",link:"#"}],J=[],W="Create Proposal",U="Approve Proposal",L="Upload Signed Proposal",q="Activate Account",G="Revise Proposal",V=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(r.a)(t).call(this,e))).reset=function(){a.setState({role:"underwriting_staff",loading:!1,ticket_type:z[0].value,top_facility_sort:B[0].value})},a.handleTicketTypeSelect=function(e){a.setState({ticket_type:e.target.value})},a.handleTopFacilitySortSelect=function(e){a.setState({top_facility_sort:e.target.value})},a.handleClickOpenTicketsRow=function(e){console.log("handleClickOpenTicketsRow",e);var t=Object.assign([],a.state.openTickets);switch(console.log("openTickets: ",t),e.ticket_details.app_tas_title){case U:a.setState({redirect:!0,redirect_info:{pathname:"/underwriting/approve-proposal/"+e.client_id+"/"+e.mother_contract_id+"/"+e.ticket_details.app_uid}});break;case L:"Upload Signed Proposal"===e.ticket_details.app_tas_title?(console.log("open finalize page 1"),a.setState({redirect:!0,redirect_info:{pathname:"/underwriting/finalize-proposal/"+e.client_id+"/"+e.mother_contract_id+"/uploader/"+e.ticket_details.app_uid}})):(a.setState({redirect:!0,redirect_info:{pathname:"/underwriting/finalize-proposal/"+e.client_id+"/"+e.mother_contract_id+"/approver/"+e.ticket_details.app_uid}}),console.log("open finalize page 2"));break;case q:a.setState({redirect:!0,redirect_info:{pathname:"/underwriting/finalize-proposal/"+e.client_id+"/"+e.mother_contract_id+"/approver/"+e.ticket_details.app_uid}});break;case W:case G:a.setState({redirect:!0,redirect_info:{pathname:"/underwriting/create-proposal/"+e.ticket_details.app_uid}})}},a.gotoFinalizeProposalPage=function(){a.props.history.push("#/underwriting/finalize-proposal/approver/1"),window.location.reload()},a.queryStringToJSON=function(e){if(e.trim().length<1)return{};var t=e.slice(1).split("&"),a={};return t.forEach(function(e){e=e.split("="),a[e[0]]=decodeURIComponent(e[1]||"")}),JSON.parse(JSON.stringify(a))},a.componentDidMount=function(){var e=JSON.parse(JSON.stringify(a.props)),t=a.queryStringToJSON(e.location.search);console.log("url query: ",t),a.setState({role:t&&t.role?t.role:"underwriting_staff"}),localStorage.setItem("sidebar","dashboard")},a.state={role:"underwriting_staff",loading:!1,ticket_type:z[0].value,top_facility_sort:B[0].value,openTickets:[],proposalsCreated:[],proposalsForApproval:[],contractsToSignOff:[],redirect:!1,redirect_info:{},unassigned_tickets:[]},a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"handleClaim",value:function(e){var t=this;e.case_id&&this.setState({loading:!0},function(){M.a.postClaim("light/case/"+e.case_id+"/claim").then(function(e){void 0!==e&&void 0!==e.status&&"ok"===e.status.toLowerCase()?t.setState({loading:!1},function(){t.getOpenTickets(),t.getUnassignedTicket()}):t.setState({loading:!1})})})}},{key:"getUnassignedTicket",value:function(){var e=this;M.a.getWithToken("cases/unassigned","").then(function(t){var a=[],n=t.filter(function(e){return"TO_DO"===e.app_status&&(e.app_tas_title===W||e.app_tas_title===G||e.app_tas_title===L||e.app_tas_title===U||e.app_tas_title===q)});n.length>0?n.forEach(function(t,c){var o=P()(t.del_task_due_date).format("MMM D, YYYY"),r={ticket_id:t.app_number,due:o,ticket_type:t.app_tas_title,client_name:"",client_id:"",ticket_details:t,case_id:t.app_uid,proposal_id:"",app_index:t.del_index};a.push(r),c===n.length-1&&e.setState({unassigned_tickets:a})}):e.setState({unassigned_tickets:[]})})}},{key:"getOpenTickets",value:function(){var e=this,t=[],a=[],n=[],c=[],o="",r="";M.a.getWithToken("cases","").then(function(l){console.log("pm getWithToken response",l),void 0!==l&&l.forEach(function(l){if(console.log("item.app_tas_title",l.app_tas_title),l.app_tas_title===W||l.app_tas_title===L||l.app_tas_title===U||l.app_tas_title===q||l.app_tas_title===G){console.log("Proposal Creation and Customization yes!!",l);var s=l.del_priority,i=P()(l.del_task_due_date).format("MMM D, YYYY");console.log("due_date: ",i);var d={ticket_id:l.app_number,due:i,ticket_type:l.app_tas_title,corporate_account:"-",is_urgent:"NORMAL"!==s,ticket_details:l,mother_contract_id:"",client_id:""};o=l.app_uid,console.log("app_uid: ",l.app_uid),console.log("app_uid2: ",o),M.a.getWithToken("cases/"+l.app_uid,"").then(function(o){void 0!==o&&void 0!==o.current_task&&(r=o.current_task[0].del_index,M.a.getWithToken("cases/"+l.app_uid+"/variables?app_index="+r,"").then(function(o){void 0!==o&&void 0!==o.client_name&&(d.corporate_account=o.client_name),void 0!==o&&void 0!==o.mother_contract_id&&(d.mother_contract_id=o.mother_contract_id),void 0!==o&&void 0!==o.client_id&&(d.client_id=o.client_id),t.push(d),d.ticket_details.app_tas_title===W||d.ticket_details.app_tas_title===G?a.push(d):d.ticket_details.app_tas_title===U?n.push(d):d.ticket_details.app_tas_title===q&&c.push(d),e.setState({openTickets:t,proposalsCreated:a,proposalsForApproval:n,contractsToSignOff:c})}))})}}),console.log("Open Tickets: ",t)})}},{key:"componentWillMount",value:function(){console.log("dashboard componentWillMount"),console.log("due_date: ",P()("2019-10-28 17:00:00").format("MMM D, YYYY")),this.getOpenTickets(),this.getUnassignedTicket()}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.openTickets,c=t.role,o=t.proposalsCreated,r=t.proposalsForApproval,l=t.contractsToSignOff,i=t.redirect,d=t.redirect_info,E=t.unassigned_tickets;return console.log("role: ",c," ==== ",d),!0===i?s.createElement(A.a,{to:d}):s.createElement("div",{className:Object(y.default)("Dashboard")},s.createElement(u.a,{container:!0,spacing:2,justify:"space-between",alignItems:"flex-start"},s.createElement(u.a,{container:!0,justify:"center",alignItems:"center"},s.createElement(u.a,{item:!0},a&&s.createElement(C.a,{className:Object(y.default)("loading-indicator")}))),s.createElement(u.a,{item:!0,xs:12},s.createElement(u.a,{container:!0,justify:"flex-start",alignItems:"flex-start"},s.createElement(u.a,{item:!0,xs:12},s.createElement(x.a,{className:Object(y.default)("title")},"Dashboard")))),s.createElement(u.a,{item:!0,xs:12,md:12},s.createElement(u.a,{container:!0,justify:"space-between",spacing:4,alignItems:"flex-start"},s.createElement(u.a,{item:!0,xs:12,md:8},s.createElement(x.a,{className:Object(y.default)("sub-title")},"Your Ticket List"),s.createElement(m.a,{className:Object(y.default)("content")},s.createElement(p.a,{className:Object(y.default)("card-header"),display:"flex",flexDirection:"row",justifyContent:"space-between"},s.createElement(p.a,null,s.createElement(x.a,{className:Object(y.default)("dashboard-count"),style:{color:"#FD5451"}},n.length),s.createElement(x.a,{className:Object(y.default)("dashboard-count-description"),onClick:this.gotoFinalizeProposalPage},"Open Tickets"))),s.createElement(p.a,{className:Object(y.default)("card-content")},s.createElement(f.a,{size:"small",className:Object(y.default)("dashboard-table")},s.createElement(_.a,null,s.createElement(g.a,null,s.createElement(b.a,{className:Object(y.default)("dashboard-table-header-cell")},"ID"),s.createElement(b.a,{className:Object(y.default)("dashboard-table-header-cell")},"Due"),s.createElement(b.a,{className:Object(y.default)("dashboard-table-header-cell")},"Ticket Type"),s.createElement(b.a,{className:Object(y.default)("dashboard-table-header-cell")},"Corporate Account"))),s.createElement(h.a,null,n.map(function(t,a){return s.createElement(g.a,{key:a,style:{cursor:"pointer"},className:Object(y.default)(a%2==0?t.is_urgent?"dashboard-table-hg-even-row":"dashboard-table-even-row":t.is_urgent?"dashboard-table-hg-odd-row":"dashboard-table-odd-row"),onClick:function(a){e.handleClickOpenTicketsRow(t),console.log("handleClickOpenTicketsRow target: ",a)}},s.createElement(b.a,{className:Object(y.default)("dashboard-table-data-cell"),component:"th",scope:"row"},t.ticket_id),s.createElement(b.a,{className:Object(y.default)("dashboard-table-data-cell")},t.due),s.createElement(b.a,{className:Object(y.default)("dashboard-table-data-cell")},t.ticket_type),s.createElement(b.a,{className:Object(y.default)("dashboard-table-data-cell")},t.corporate_account))}))))),s.createElement(m.a,{className:Object(y.default)("content")},s.createElement(p.a,{className:Object(y.default)("card-header"),display:"flex",flexDirection:"row",justifyContent:"space-between"},s.createElement(p.a,null,s.createElement(x.a,{className:Object(y.default)("dashboard-count"),style:{color:"#FD5451"}},E.length),s.createElement(x.a,{className:Object(y.default)("dashboard-count-description"),onClick:this.gotoFinalizeProposalPage},"Unassigned Tickets"))),s.createElement(p.a,{className:Object(y.default)("card-content")},s.createElement(f.a,{size:"small",className:Object(y.default)("dashboard-table")},s.createElement(_.a,null,s.createElement(g.a,null,s.createElement(b.a,{className:Object(y.default)("dashboard-table-header-cell")},"ID"),s.createElement(b.a,{className:Object(y.default)("dashboard-table-header-cell")},"Due"),s.createElement(b.a,{className:Object(y.default)("dashboard-table-header-cell")},"Ticket Type"),s.createElement(b.a,{className:Object(y.default)("dashboard-table-header-cell")},"Action"))),s.createElement(h.a,null,E.map(function(t,a){return s.createElement(g.a,{key:a,className:Object(y.default)(a%2==0?t.is_urgent?"dashboard-table-hg-even-row":"dashboard-table-even-row":t.is_urgent?"dashboard-table-hg-odd-row":"dashboard-table-odd-row"),onClick:function(e){console.log("handleClickOpenTicketsRow target: ",e)}},s.createElement(b.a,{className:Object(y.default)("dashboard-table-data-cell"),component:"th",scope:"row"},t.ticket_id),s.createElement(b.a,{className:Object(y.default)("dashboard-table-data-cell")},t.due),s.createElement(b.a,{className:Object(y.default)("dashboard-table-data-cell")},t.ticket_type),s.createElement(b.a,{className:Object(y.default)("dashboard-table-data-cell")},s.createElement("span",{style:{textDecoration:"underline"},className:Object(y.default)("dashboard-list-item-link"),onClick:function(a){e.handleClaim(t),console.log("e >>>>",a)}},"Claim")))})))))),s.createElement(u.a,{item:!0,xs:12,md:4},s.createElement(x.a,{className:Object(y.default)("sub-title")},"Your Task Tray"),"underwriting_head"==c?s.createElement(m.a,{className:Object(y.default)("content"),style:{visibility:"hidden"}},s.createElement(p.a,{className:Object(y.default)("card-header")},s.createElement(x.a,{className:Object(y.default)("dashboard-count"),style:{color:"#3AB77D"}},o.length),s.createElement(x.a,{className:Object(y.default)("dashboard-count-description")},"Proposals To Be Created")),s.createElement(p.a,{className:Object(y.default)("card-content")},s.createElement("img",{src:"temp_dashboard_graph_01.png",className:Object(y.default)("dashboard-temp-graph-img"),alt:"Proposals To Be Created"}))):s.createElement(m.a,{className:Object(y.default)("content")},s.createElement(p.a,{className:Object(y.default)("card-header")},s.createElement(x.a,{className:Object(y.default)("dashboard-count"),style:{color:"#3AB77D"}},o.length),s.createElement(x.a,{className:Object(y.default)("dashboard-count-description")},"Proposals To Be Created")),s.createElement(p.a,{className:Object(y.default)("card-content"),alignItems:"flex-start"},s.createElement(k.a,{dense:!0},o.map(function(e,t){return s.createElement(O.a,{key:t},s.createElement(w.a,{id:"proposals_to_be_created_"+t,className:Object(y.default)("dashboard-list-item-text"),primary:e.corporate_account}),s.createElement(T,null,s.createElement(S.b,{className:Object(y.default)("dashboard-list-item-link"),to:"create-proposal/"+e.app_uid},"Create")))})))),"underwriting_head"==c||"underwriting_staff"==c?s.createElement(m.a,{className:Object(y.default)("content")},s.createElement(p.a,{className:Object(y.default)("card-header")},s.createElement(x.a,{className:Object(y.default)("dashboard-count"),style:{color:"#FAB435"}},F.length),s.createElement(x.a,{className:Object(y.default)("dashboard-count-description")},"Renewals to be Revised")),s.createElement(p.a,{className:Object(y.default)("card-content"),alignItems:"flex-start"},s.createElement(k.a,{dense:!0}))):s.createElement(m.a,{className:Object(y.default)("content")},s.createElement(p.a,{className:Object(y.default)("card-header")},s.createElement(x.a,{className:Object(y.default)("dashboard-count"),style:{color:"#FAB435"}},Y.length),s.createElement(x.a,{className:Object(y.default)("dashboard-count-description")},"Proposals to be Revised")),s.createElement(p.a,{className:Object(y.default)("card-content"),alignItems:"flex-start"},s.createElement(k.a,{dense:!0})))))),s.createElement(u.a,{item:!0,xs:12,md:12},s.createElement(u.a,{container:!0,justify:"space-between",spacing:4,alignItems:"flex-start"},s.createElement(u.a,{item:!0,xs:12,md:4},s.createElement(m.a,{className:Object(y.default)("content")},s.createElement(p.a,{className:Object(y.default)("card-header")},s.createElement(x.a,{className:Object(y.default)("dashboard-count"),style:{color:"#8034AD"}},r.length),s.createElement(x.a,{className:Object(y.default)("dashboard-count-description")},"Proposals Waiting Approval")),s.createElement(p.a,{className:Object(y.default)("card-content")},s.createElement(k.a,{dense:!0},r.map(function(e,t){return s.createElement(O.a,{key:t},s.createElement(w.a,{id:"proposals_for_approval_"+t,className:Object(y.default)("dashboard-list-item-text"),primary:e.corporate_account}),s.createElement(T,null,s.createElement(S.b,{className:Object(y.default)("dashboard-list-item-link"),to:"approve-proposal/"+e.app_uid},"View")))}))))),s.createElement(u.a,{item:!0,xs:12,md:4},s.createElement(m.a,{className:Object(y.default)("content")},s.createElement(p.a,{className:Object(y.default)("card-header")},s.createElement(x.a,{className:Object(y.default)("dashboard-count"),style:{color:"#272E4C"}},l.length),s.createElement(x.a,{className:Object(y.default)("dashboard-count-description")},"Contracts to Sign-Off")),s.createElement(p.a,{className:Object(y.default)("card-content")},s.createElement(k.a,{dense:!0},l.map(function(e,t){return s.createElement(O.a,{key:t},s.createElement(w.a,{id:"contracts_to_signoff_"+t,className:Object(y.default)("dashboard-list-item-text"),primary:e.corporate_account}),s.createElement(T,null,s.createElement(S.b,{className:Object(y.default)("dashboard-list-item-link"),to:"finalize-proposal/approver/"+e.app_uid},"View")))}))))),s.createElement(u.a,{item:!0,xs:12,md:4},s.createElement(m.a,{className:Object(y.default)("content")},s.createElement(p.a,{className:Object(y.default)("card-header")},s.createElement(x.a,{className:Object(y.default)("dashboard-count"),style:{color:"#1AB1C4"}},J.length),s.createElement(x.a,{className:Object(y.default)("dashboard-count-description")},"Tickets Waiting Response")),s.createElement(p.a,{className:Object(y.default)("card-content")},s.createElement(k.a,{dense:!0}))))))))}}]),t}(s.Component),$=function(e){return e.dashboard},H=function(e){return{Map:Object(d.b)(R,e)}}}}]);
//# sourceMappingURL=10.1743bffc.chunk.js.map